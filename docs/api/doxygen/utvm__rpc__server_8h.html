<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tvm: include/tvm/runtime/crt/utvm_rpc_server.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tvm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b4c7d8e826c599ba55146c099a14beb5.html">tvm</a></li><li class="navelem"><a class="el" href="dir_404558507ed35459f0d7a6d81d8c508d.html">runtime</a></li><li class="navelem"><a class="el" href="dir_a2900df4deca8dd2bcded616f0fe650a.html">crt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">utvm_rpc_server.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>MicroTVM RPC Server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for utvm_rpc_server.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="utvm__rpc__server_8h__incl.svg" width="198" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="utvm__rpc__server_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae9d8a1c4972396e7e115b69faa86ffc5"><td class="memItemLeft" align="right" valign="top">typedef ssize_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utvm__rpc__server_8h.html#ae9d8a1c4972396e7e115b69faa86ffc5">utvm_rpc_channel_write_t</a>) (void *context, const uint8_t *data, size_t num_bytes)</td></tr>
<tr class="memdesc:ae9d8a1c4972396e7e115b69faa86ffc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">TVM RPC channel write function.  <a href="#ae9d8a1c4972396e7e115b69faa86ffc5">More...</a><br /></td></tr>
<tr class="separator:ae9d8a1c4972396e7e115b69faa86ffc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1ee4f0ba1eeac0bcb9a711933667f2"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a></td></tr>
<tr class="memdesc:a3a1ee4f0ba1eeac0bcb9a711933667f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque pointer type to TVM RPC Server.  <a href="#a3a1ee4f0ba1eeac0bcb9a711933667f2">More...</a><br /></td></tr>
<tr class="separator:a3a1ee4f0ba1eeac0bcb9a711933667f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3ba4573457fcc5b89f3cefafd0a719e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utvm__rpc__server_8h.html#a3ba4573457fcc5b89f3cefafd0a719e8">UTvmRpcServerInit</a> (uint8_t *memory, size_t memory_size_bytes, size_t page_size_bytes_log2, <a class="el" href="utvm__rpc__server_8h.html#ae9d8a1c4972396e7e115b69faa86ffc5">utvm_rpc_channel_write_t</a> write_func, void *write_func_ctx)</td></tr>
<tr class="memdesc:a3ba4573457fcc5b89f3cefafd0a719e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the TVM RPC Server.  <a href="#a3ba4573457fcc5b89f3cefafd0a719e8">More...</a><br /></td></tr>
<tr class="separator:a3ba4573457fcc5b89f3cefafd0a719e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f00aa62f4e9f609e0ae996eba1ea84e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utvm__rpc__server_8h.html#a8f00aa62f4e9f609e0ae996eba1ea84e">UTvmRpcServerReceiveByte</a> (<a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a> server, uint8_t byte)</td></tr>
<tr class="memdesc:a8f00aa62f4e9f609e0ae996eba1ea84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy received data into an internal buffer for processing.  <a href="#a8f00aa62f4e9f609e0ae996eba1ea84e">More...</a><br /></td></tr>
<tr class="separator:a8f00aa62f4e9f609e0ae996eba1ea84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed77a5b0e62afc7aef9c85225e301a41"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utvm__rpc__server_8h.html#aed77a5b0e62afc7aef9c85225e301a41">UTvmRpcServerLoop</a> (<a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a> server)</td></tr>
<tr class="memdesc:aed77a5b0e62afc7aef9c85225e301a41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform normal processing of received data.  <a href="#aed77a5b0e62afc7aef9c85225e301a41">More...</a><br /></td></tr>
<tr class="separator:aed77a5b0e62afc7aef9c85225e301a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MicroTVM RPC Server. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ae9d8a1c4972396e7e115b69faa86ffc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef ssize_t(* utvm_rpc_channel_write_t) (void *context, const uint8_t *data, size_t num_bytes)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TVM RPC channel write function. </p>
<p>Tries to write <code>num_bytes</code> from <code>data</code> to the underlying channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to data to write. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>Number of bytes avaiable in data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written. </dd></dl>

</div>
</div>
<a class="anchor" id="a3a1ee4f0ba1eeac0bcb9a711933667f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque pointer type to TVM RPC Server. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3ba4573457fcc5b89f3cefafd0a719e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a> UTvmRpcServerInit </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>memory_size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>page_size_bytes_log2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="utvm__rpc__server_8h.html#ae9d8a1c4972396e7e115b69faa86ffc5">utvm_rpc_channel_write_t</a>&#160;</td>
          <td class="paramname"><em>write_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>write_func_ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the TVM RPC Server. </p>
<p>Call this on device startup before calling anyother utvm_rpc_server_ functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memory</td><td>A memory block used by the runtime as dynamic memory, primarily to allocate tensors. </td></tr>
    <tr><td class="paramname">memory_size_bytes</td><td>Size of the memory block, in bytes. Should be a multiple of (1 &lt;&lt; page_size_bytes_log2) </td></tr>
    <tr><td class="paramname">page_size_bytes_log2</td><td>Log2 of the size of each memory page. The internal allocator allocates one page at a time; more pages reduces waste but increases overhead. </td></tr>
    <tr><td class="paramname">write_func</td><td>A callback function invoked by the TVM RPC Server to write data back to the host. Internally, the TVM RPC Server will block until all data in a reply packet has been written. </td></tr>
    <tr><td class="paramname">write_func_ctx</td><td>An opaque pointer passed to write_func when it is called. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the TVM RPC Server. The pointer is allocated in the same memory space as the TVM workspace. </dd></dl>

</div>
</div>
<a class="anchor" id="aed77a5b0e62afc7aef9c85225e301a41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UTvmRpcServerLoop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a>&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform normal processing of received data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>The TVM RPC Server pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true while the server is still running. false when it shuts down gracefully. </dd></dl>

</div>
</div>
<a class="anchor" id="a8f00aa62f4e9f609e0ae996eba1ea84e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t UTvmRpcServerReceiveByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="utvm__rpc__server_8h.html#a3a1ee4f0ba1eeac0bcb9a711933667f2">utvm_rpc_server_t</a>&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy received data into an internal buffer for processing. </p>
<p>Currently only handles 1 byte of data. In the future, the goal of this function is to be safe to invoke from an ISR. At that time, this function will just append to an internal buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>The TVM RPC Server pointer. </td></tr>
    <tr><td class="paramname">byte</td><td>The received byte of data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes copied to the internal buffer. May be less than data_size_bytes when the internal buffer fills. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
