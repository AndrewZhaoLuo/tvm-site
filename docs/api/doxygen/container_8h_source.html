<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tvm: include/tvm/runtime/container.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tvm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b4c7d8e826c599ba55146c099a14beb5.html">tvm</a></li><li class="navelem"><a class="el" href="dir_404558507ed35459f0d7a6d81d8c508d.html">runtime</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">container.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="container_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Licensed to the Apache Software Foundation (ASF) under one</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * or more contributor license agreements.  See the NOTICE file</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * distributed with this work for additional information</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * regarding copyright ownership.  The ASF licenses this file</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * to you under the Apache License, Version 2.0 (the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * &quot;License&quot;); you may not use this file except in compliance</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * with the License.  You may obtain a copy of the License at</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *   http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * software distributed under the License is distributed on an</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * KIND, either express or implied.  See the License for the</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * specific language governing permissions and limitations</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * under the License.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#ifndef TVM_RUNTIME_CONTAINER_H_</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define TVM_RUNTIME_CONTAINER_H_</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifndef USE_FALLBACK_STL_MAP</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="container_8h.html#ab1d917df41ea16c0eb385b7a4661765e">   28</a></span>&#160;<span class="preprocessor">#define USE_FALLBACK_STL_MAP 0</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;dmlc/logging.h&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;tvm/runtime/logging.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="runtime_2memory_8h.html">tvm/runtime/memory.h</a>&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="object_8h.html">tvm/runtime/object.h</a>&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;initializer_list&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// We use c++14 std::experimental::string_view for optimizing hash computation</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// only right now, its usage is limited in this file. Any broader usage of</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// std::experiment in our core codebase is discouraged and needs community</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// discussion for each use case. Reference for feature test macros of</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// string_view:</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// https://isocpp.org/std/standing-documents/sd-6-sg10-feature-test-recommendations</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// https://en.cppreference.com/w/User:D41D8CD98F/feature_testing_macros</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#if defined(__cpp_lib_experimental_string_view) &amp;&amp; __cpp_lib_experimental_string_view &gt;= 201411</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#define TVM_USE_CXX14_STRING_VIEW_HASH 1</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="container_8h.html#a6407a1cc4df1e6d995286b6d00f98bff">   53</a></span>&#160;<span class="preprocessor">#define TVM_USE_CXX14_STRING_VIEW_HASH 0</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// Tested with clang version 9.0.1 and c++17. It will detect string_view support</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// correctly.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#if defined(__cpp_lib_string_view) &amp;&amp; __cpp_lib_string_view &gt;= 201606</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#define TVM_USE_CXX17_STRING_VIEW_HASH 1</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="container_8h.html#a08f8776a8d5e0590a2ffc7adb0932909">   61</a></span>&#160;<span class="preprocessor">#define TVM_USE_CXX17_STRING_VIEW_HASH 0</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#if TVM_USE_CXX17_STRING_VIEW_HASH</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;string_view&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#elif TVM_USE_CXX14_STRING_VIEW_HASH</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;experimental/string_view&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;type_traits&gt;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="namespacellvm.html">   74</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// String to llvm object compatibility.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">class </span>StringRef;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}  <span class="comment">// namespace llvm</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacetvm.html">tvm</a> {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">namespace </span>runtime {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// Forward declare TVMArgValue</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">class </span>TVMArgValue;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1ObjectHash.html">   86</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtvm_1_1runtime_1_1ObjectHash.html">ObjectHash</a> {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">size_t</span> operator()(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; a) <span class="keyword">const</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;};</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1ObjectEqual.html">   96</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">ObjectEqual</a> {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; b) <span class="keyword">const</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;};</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ArrayType, <span class="keyword">typename</span> ElemType&gt;</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">  146</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase</a> {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a45c91b04c230f7400727b1bc02a93f02">  153</a></span>&#160;  <span class="keyword">const</span> ElemType&amp; <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a45c91b04c230f7400727b1bc02a93f02">operator[]</a>(<span class="keywordtype">size_t</span> idx)<span class="keyword"> const </span>{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">size_t</span> size = Self()-&gt;GetSize();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    ICHECK_LT(idx, size) &lt;&lt; <span class="stringliteral">&quot;Index &quot;</span> &lt;&lt; idx &lt;&lt; <span class="stringliteral">&quot; out of bounds &quot;</span> &lt;&lt; size &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> *(<span class="keyword">reinterpret_cast&lt;</span>ElemType*<span class="keyword">&gt;</span>(AddressOf(idx)));</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a4b37b5fcd2285b818e8f623da8b326b2">  164</a></span>&#160;  ElemType&amp; <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a4b37b5fcd2285b818e8f623da8b326b2">operator[]</a>(<span class="keywordtype">size_t</span> idx) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">size_t</span> size = Self()-&gt;GetSize();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    ICHECK_LT(idx, size) &lt;&lt; <span class="stringliteral">&quot;Index &quot;</span> &lt;&lt; idx &lt;&lt; <span class="stringliteral">&quot; out of bounds &quot;</span> &lt;&lt; size &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">return</span> *(<span class="keyword">reinterpret_cast&lt;</span>ElemType*<span class="keyword">&gt;</span>(AddressOf(idx)));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ad1cf3446de62c7aba99235f2843f839f">  173</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ad1cf3446de62c7aba99235f2843f839f">~InplaceArrayBase</a>() {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (!(std::is_standard_layout&lt;ElemType&gt;::value &amp;&amp; std::is_trivial&lt;ElemType&gt;::value)) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordtype">size_t</span> size = Self()-&gt;GetSize();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; size; ++i) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        ElemType* fp = <span class="keyword">reinterpret_cast&lt;</span>ElemType*<span class="keyword">&gt;</span>(AddressOf(i));</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        fp-&gt;ElemType::~ElemType();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a483d75a65f68676ed0a16fca8024ccd6">  195</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a483d75a65f68676ed0a16fca8024ccd6">EmplaceInit</a>(<span class="keywordtype">size_t</span> idx, Args&amp;&amp;... args) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">void</span>* field_ptr = AddressOf(idx);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">new</span> (field_ptr) ElemType(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ae447f7c7a742fb3f5613a632706509df">  205</a></span>&#160;  <span class="keyword">inline</span> ArrayType* <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ae447f7c7a742fb3f5613a632706509df">Self</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>ArrayType*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>));</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a2a0235e3e9b03abffc3839d14e1b7342">  215</a></span>&#160;  <span class="keywordtype">void</span>* <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a2a0235e3e9b03abffc3839d14e1b7342">AddressOf</a>(<span class="keywordtype">size_t</span> idx)<span class="keyword"> const </span>{</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    static_assert(</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keyword">alignof</span>(ArrayType) % <span class="keyword">alignof</span>(ElemType) == 0 &amp;&amp; <span class="keyword">sizeof</span>(ArrayType) % <span class="keyword">alignof</span>(ElemType) == 0,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="stringliteral">&quot;The size and alignment of ArrayType should respect &quot;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="stringliteral">&quot;ElemType&#39;s alignment.&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">size_t</span> kDataStart = <span class="keyword">sizeof</span>(ArrayType);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    ArrayType* <span class="keyword">self</span> = Self();</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">char</span>* data_start = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<span class="keyword">self</span>) + kDataStart;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> data_start + idx * <span class="keyword">sizeof</span>(ElemType);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;};</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Converter, <span class="keyword">typename</span> TIter&gt;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html">  234</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#aa4c2c9d77272b79dad3c3a4ff392d186">  236</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#aa4c2c9d77272b79dad3c3a4ff392d186">difference_type</a> = <span class="keyword">typename</span> std::iterator_traits&lt;TIter&gt;::difference_type;</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a1a2d3f6fa9436d7b5b125124c5c20faf">  237</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a1a2d3f6fa9436d7b5b125124c5c20faf">value_type</a> = <span class="keyword">typename</span> Converter::ResultType;</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#adc1b48d98f5d1780edadde8130287de4">  238</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#adc1b48d98f5d1780edadde8130287de4">pointer</a> = <span class="keyword">typename</span> Converter::ResultType*;</div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a5fe6cfc0f51ecc13f40796d626cdbfd5">  239</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a5fe6cfc0f51ecc13f40796d626cdbfd5">reference</a> = <span class="keyword">typename</span> Converter::ResultType&amp;;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#ad3b2d03b6683bdaee0b524612b53d419">  240</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#ad3b2d03b6683bdaee0b524612b53d419">iterator_category</a> = <span class="keyword">typename</span> std::iterator_traits&lt;TIter&gt;::iterator_category;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#abd170b9025d87892f41780c2a4d8bbfc">  242</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#abd170b9025d87892f41780c2a4d8bbfc">IterAdapter</a>(TIter iter) : iter_(iter) {}</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a40f67dd792619d7d41ac45fc0f52a0c4">  243</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a40f67dd792619d7d41ac45fc0f52a0c4">operator++</a>() {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    ++iter_;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#acb643cc554062422a4fd00bbfb3b0a6d">  247</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#acb643cc554062422a4fd00bbfb3b0a6d">operator--</a>() {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    --iter_;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a76971f210bcd72c05992ae57b2ac8b2e">  251</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a76971f210bcd72c05992ae57b2ac8b2e">operator++</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    ++iter_;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#ad6a362ac9b5e17443f252f16f1c82703">  256</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#ad6a362ac9b5e17443f252f16f1c82703">operator--</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    --iter_;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a9084e513e3a9b49a81fecd403fa415f1">  262</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a9084e513e3a9b49a81fecd403fa415f1">operator+</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#aa4c2c9d77272b79dad3c3a4ff392d186">difference_type</a> offset)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a>(iter_ + offset); }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#ab5671b2b9d56c2abcfb8d3f03cf6fd9e">  264</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#ab5671b2b9d56c2abcfb8d3f03cf6fd9e">operator-</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#aa4c2c9d77272b79dad3c3a4ff392d186">difference_type</a> offset)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a>(iter_ - offset); }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T = IterAdapter&gt;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;iterator_category, std::random_access_iterator_tag&gt;::value,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                          <span class="keyword">typename</span> T::difference_type&gt;::type <span class="keyword">inline</span></div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a5bbe56d308014b49fec6374315f8d43a">  269</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a5bbe56d308014b49fec6374315f8d43a">operator-</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a>&amp; rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> iter_ - rhs.iter_;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#ac4066242008f1e60533099615a20fdbd">  273</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#ac4066242008f1e60533099615a20fdbd">operator==</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> iter_ == other.iter_; }</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a6e54667aa71ae41d33c22d6bd3973404">  274</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a6e54667aa71ae41d33c22d6bd3973404">operator!=</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter</a> other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other); }</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1IterAdapter.html#a4869a61f3e598fcbf8cdb3c14d66f859">  275</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a1a2d3f6fa9436d7b5b125124c5c20faf">value_type</a> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html#a4869a61f3e598fcbf8cdb3c14d66f859">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Converter::convert(*iter_); }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  TIter iter_;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;};</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Converter, <span class="keyword">typename</span> TIter&gt;</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">  287</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ad836e9ac0b9fc9c801d69fbedbd77d51">  289</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ad836e9ac0b9fc9c801d69fbedbd77d51">difference_type</a> = <span class="keyword">typename</span> std::iterator_traits&lt;TIter&gt;::difference_type;</div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#adbf346bfbc9caff697aa754216d14a7c">  290</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#adbf346bfbc9caff697aa754216d14a7c">value_type</a> = <span class="keyword">typename</span> Converter::ResultType;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ade7d41e23d7ac8a0d64e237dfcf958c6">  291</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ade7d41e23d7ac8a0d64e237dfcf958c6">pointer</a> = <span class="keyword">typename</span> Converter::ResultType*;</div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0e19189278a3986380ce021cac7ceded">  292</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0e19189278a3986380ce021cac7ceded">reference</a> = <span class="keyword">typename</span> Converter::ResultType&amp;;  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a4548877b6a33598c7278101027b97ec6">  293</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a4548877b6a33598c7278101027b97ec6">iterator_category</a> = <span class="keyword">typename</span> std::iterator_traits&lt;TIter&gt;::iterator_category;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a579235eb3691b76d29b4ae5f178318ef">  295</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a579235eb3691b76d29b4ae5f178318ef">ReverseIterAdapter</a>(TIter iter) : iter_(iter) {}</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a362bd28f025d28551159e46c415309bd">  296</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a362bd28f025d28551159e46c415309bd">operator++</a>() {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    --iter_;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#afa7ed1b09064bb3d6dea7ad886145346">  300</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#afa7ed1b09064bb3d6dea7ad886145346">operator--</a>() {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    ++iter_;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#acb427db7d19a75da1625be0248983aab">  304</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#acb427db7d19a75da1625be0248983aab">operator++</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    --iter_;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a53f1d3671d30c2e58cf229f377c96409">  309</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a53f1d3671d30c2e58cf229f377c96409">operator--</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    ++iter_;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a326af819f031fc52b80de3bb2da87fa2">  314</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a326af819f031fc52b80de3bb2da87fa2">operator+</a>(<a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ad836e9ac0b9fc9c801d69fbedbd77d51">difference_type</a> offset)<span class="keyword"> const </span>{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>(iter_ - offset);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T = ReverseIterAdapter&gt;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;iterator_category, std::random_access_iterator_tag&gt;::value,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                          <span class="keyword">typename</span> T::difference_type&gt;::type <span class="keyword">inline</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a67f728a692ed84a78a20a2095815f260">  321</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a67f728a692ed84a78a20a2095815f260">operator-</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a>&amp; rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> rhs.iter_ - iter_;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ae71116873ea643de9f8ec1836cc116db">  325</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ae71116873ea643de9f8ec1836cc116db">operator==</a>(<a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> iter_ == other.iter_; }</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a2a049030ff85513916a05924bf519d2c">  326</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a2a049030ff85513916a05924bf519d2c">operator!=</a>(<a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter</a> other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other); }</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0b4fc047041f8e1cb3454ee89120444a">  327</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#adbf346bfbc9caff697aa754216d14a7c">value_type</a> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0b4fc047041f8e1cb3454ee89120444a">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Converter::convert(*iter_); }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  TIter iter_;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;};</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html">  334</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>, <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase</a>&lt;ArrayNode, ObjectRef&gt; {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a3e88cee6eb31d0e495f7debd94b7573d">  337</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a3e88cee6eb31d0e495f7debd94b7573d">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;size_; }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a410953f5ac23f6ca5caa257def8b08bd">  344</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a410953f5ac23f6ca5caa257def8b08bd">at</a>(int64_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;operator[](i); }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a2860450a1004d1f41a9e3586f77cc7aa">  347</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a2860450a1004d1f41a9e3586f77cc7aa">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>*<span class="keyword">&gt;</span>(InplaceArrayBase::AddressOf(0)); }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a2d43c95564271491432d279c12f7f94c">  350</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a2d43c95564271491432d279c12f7f94c">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> begin() + size_; }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a71be89dffaf8f77fcb8c3d5bbdc202ed">  353</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a71be89dffaf8f77fcb8c3d5bbdc202ed">clear</a>() { ShrinkBy(size_); }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a22cafc90ebeb8d6a50ce3bc4e183a403">  360</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a22cafc90ebeb8d6a50ce3bc4e183a403">SetItem</a>(int64_t i, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> item) { this-&gt;operator[](i) = std::move(item); }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#abfcb7af7536da67a1789d99abfbb4e93">  368</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#abfcb7af7536da67a1789d99abfbb4e93">CopyFrom</a>(int64_t cap, <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* from) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    int64_t size = from-&gt;size_;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    ICHECK_GE(cap, size) &lt;&lt; <span class="stringliteral">&quot;ValueError: not enough capacity&quot;</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> p = ArrayNode::Empty(cap);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* write = p-&gt;MutableBegin();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* read = from-&gt;MutableBegin();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// To ensure exception safety, size is only incremented after the initialization succeeds</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">for</span> (int64_t&amp; i = p-&gt;size_ = 0; i &lt; size; ++i) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keyword">new</span> (write++) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(*read++);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a1507dd1a766a7ef40f04dbf8c14ffe25">  387</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a1507dd1a766a7ef40f04dbf8c14ffe25">MoveFrom</a>(int64_t cap, <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* from) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    int64_t size = from-&gt;size_;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    ICHECK_GE(cap, size) &lt;&lt; <span class="stringliteral">&quot;ValueError: not enough capacity&quot;</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> p = ArrayNode::Empty(cap);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* write = p-&gt;MutableBegin();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* read = from-&gt;MutableBegin();</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// To ensure exception safety, size is only incremented after the initialization succeeds</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">for</span> (int64_t&amp; i = p-&gt;size_ = 0; i &lt; size; ++i) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keyword">new</span> (write++) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(std::move(*read++));</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    from-&gt;size_ = 0;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#aae210dbc3667622a873a27b822462ace">  407</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#aae210dbc3667622a873a27b822462ace">CreateRepeated</a>(int64_t n, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; val) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> p = ArrayNode::Empty(n);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr = p-&gt;MutableBegin();</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (int64_t&amp; i = p-&gt;size_ = 0; i &lt; n; ++i) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keyword">new</span> (itr++) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(val);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#aad476c718ecd7e40ccbea2dff86c708e">  416</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = TypeIndex::kRuntimeArray;</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a546645f765e0a3cef1ef59cdd34d9d96">  417</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;Array&quot;</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">size_t</span> GetSize()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;size_; }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* MutableBegin()<span class="keyword"> const </span>{</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>*<span class="keyword">&gt;</span>(InplaceArrayBase::AddressOf(0));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* MutableEnd()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MutableBegin() + size_; }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> Empty(int64_t n = kInitSize) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    ICHECK_GE(n, 0);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> p = make_inplace_array_object&lt;ArrayNode, ObjectRef&gt;(n);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    p-&gt;capacity_ = n;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    p-&gt;size_ = 0;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* InitRange(int64_t idx, IterType first, IterType last) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr = MutableBegin() + idx;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">for</span> (; first != last; ++first) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> ref = *first;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keyword">new</span> (itr++) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(std::move(ref));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* MoveElementsLeft(int64_t dst, int64_t src_begin, int64_t src_end) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* from = MutableBegin() + src_begin;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* to = MutableBegin() + dst;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">while</span> (src_begin++ != src_end) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      *to++ = std::move(*from++);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* MoveElementsRight(int64_t dst, int64_t src_begin, int64_t src_end) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* from = MutableBegin() + src_end;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* to = MutableBegin() + (src_end - src_begin + dst);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">while</span> (src_begin++ != src_end) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      *--to = std::move(*--from);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* EnlargeBy(int64_t delta, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; val = <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(<span class="keyword">nullptr</span>)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr = MutableEnd();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">while</span> (delta-- &gt; 0) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keyword">new</span> (itr++) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(val);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      ++size_;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* ShrinkBy(int64_t delta) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr = MutableEnd();</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">while</span> (delta-- &gt; 0) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      (--itr)-&gt;<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>::~<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      --size_;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  int64_t size_;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  int64_t capacity_;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keyword">static</span> constexpr int64_t kInitSize = 4;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keyword">static</span> constexpr int64_t kIncFactor = 2;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// CRTP parent class</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase&lt;ArrayNode, ObjectRef&gt;</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Reference class</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>, <span class="keyword">typename</span>&gt;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ArrayNode.html#a23070656da6784a7e4c33c4b0ea9de35">  541</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Array.html">Array</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// To specialize make_object&lt;ArrayNode&gt;</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> make_object&lt;&gt;();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;};</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, T&gt;::value&gt;::type&gt;</div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html">  566</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Array.html">Array</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a203f4dc8f7a37ac325f6d1e192d2f8c1">  568</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1arith_1_1IterSplitExpr.html">value_type</a> = T;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// constructors</span></div><div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#af8b7450aea8633a51d3e8c75ed9fe2be">  573</a></span>&#160;<span class="comment"></span>  <a class="code" href="classtvm_1_1runtime_1_1Array.html#af8b7450aea8633a51d3e8c75ed9fe2be">Array</a>() { data_ = ArrayNode::Empty(); }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a87edbe5dfbdd7deda742bd187ebee234">  579</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html#a87edbe5dfbdd7deda742bd187ebee234">Array</a>(<a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp;&amp; other) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>() {  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    data_ = std::move(other.data_);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a7bd47dead26bddcdd54db780a3135992">  587</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html#a7bd47dead26bddcdd54db780a3135992">Array</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp; other) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>() {  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    data_ = other.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#ac261cdb80487fb29ac42b28678f8cbef">data_</a>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#af5035bdfd76577c89f9fcde46db7edc4">  595</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#af5035bdfd76577c89f9fcde46db7edc4">Array</a>(<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> n) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(n) {}</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#aacdeb14d66a7f85e94ee843c459f7959">  604</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html#aacdeb14d66a7f85e94ee843c459f7959">Array</a>(IterType first, IterType last) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    Assign(first, last);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a478af2e3338db97bf9dd3411de6d9a8a">  612</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html#a478af2e3338db97bf9dd3411de6d9a8a">Array</a>(std::initializer_list&lt;T&gt; init) {  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    Assign(init.begin(), init.end());</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a9af024da3af390f431b941e1378f813e">  620</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html#a9af024da3af390f431b941e1378f813e">Array</a>(<span class="keyword">const</span> std::vector&lt;T&gt;&amp; init) {  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    Assign(init.begin(), init.end());</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a7c03ae71aa89ec2591ae9ba7b3acc9d1">  629</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a7c03ae71aa89ec2591ae9ba7b3acc9d1">Array</a>(<span class="keyword">const</span> <span class="keywordtype">size_t</span> n, <span class="keyword">const</span> T&amp; val) { data_ = ArrayNode::CreateRepeated(n, val); }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a8f52fa8c97344586060ca735a3b91b39">  636</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Array.html#a8f52fa8c97344586060ca735a3b91b39">operator=</a>(<a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp;&amp; other) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    data_ = std::move(other.data_);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a5bc26222aa0257ece4c3a9d4d70fa1d8">  646</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Array.html#a5bc26222aa0257ece4c3a9d4d70fa1d8">operator=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp; other) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    data_ = other.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#ac261cdb80487fb29ac42b28678f8cbef">data_</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// iterators</span></div><div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html">  653</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html">ValueConverter</a> {</div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a0db77cfd8032391d76dffc88eae8e09b">  654</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a0db77cfd8032391d76dffc88eae8e09b">ResultType</a> = T;</div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a4bb65df089f7cafd324faa1cc6175403">  655</a></span>&#160;    <span class="keyword">static</span> T <a class="code" href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a4bb65df089f7cafd324faa1cc6175403">convert</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; n) { <span class="keywordflow">return</span> DowncastNoCheck&lt;T&gt;(n); }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  };</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a98e5ad633b8195d954c98067213ae29f">  658</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> = <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">IterAdapter&lt;ValueConverter, const ObjectRef*&gt;</a>;</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a4886f1509998e380f032896a5afb27b9">  659</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">reverse_iterator</a> = <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">ReverseIterAdapter&lt;ValueConverter, const ObjectRef*&gt;</a>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#ae9734c8e6324f9be27fce8d45d0aa6f4">  662</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1Array.html#ae9734c8e6324f9be27fce8d45d0aa6f4">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a>(GetArrayNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1Array.html#ae9734c8e6324f9be27fce8d45d0aa6f4">begin</a>()); }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a6b097149e69ea03fe3b812a3f5f7fcd9">  665</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a6b097149e69ea03fe3b812a3f5f7fcd9">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a>(GetArrayNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1Array.html#a6b097149e69ea03fe3b812a3f5f7fcd9">end</a>()); }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#af3f2fbd0d476ae66fe526f0685b7cb6c">  668</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">reverse_iterator</a> <a class="code" href="classtvm_1_1runtime_1_1Array.html#af3f2fbd0d476ae66fe526f0685b7cb6c">rbegin</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// ArrayNode::end() is never nullptr</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">reverse_iterator</a>(GetArrayNode()-&gt;end() - 1);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a1dda4b706346d1299cea059957e9ee70">  674</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">reverse_iterator</a> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a1dda4b706346d1299cea059957e9ee70">rend</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// ArrayNode::begin() is never nullptr</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">reverse_iterator</a>(GetArrayNode()-&gt;begin() - 1);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// const methods in std::vector</span></div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#ac84683f61368eb10e26e72a0097cccd7">  686</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> T <a class="code" href="classtvm_1_1runtime_1_1Array.html#ac84683f61368eb10e26e72a0097cccd7">operator[]</a>(int64_t i)<span class="keyword"> const </span>{</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    ICHECK(p != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot index a null array&quot;</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    ICHECK(0 &lt;= i &amp;&amp; i &lt; p-&gt;size_)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;IndexError: indexing &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; on an array of size &quot;</span> &lt;&lt; p-&gt;size_;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">return</span> DowncastNoCheck&lt;T&gt;(*(p-&gt;<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a2860450a1004d1f41a9e3586f77cc7aa">begin</a>() + i));</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#aed6387e67d18b9d5ad18f510fd600a25">  695</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#aed6387e67d18b9d5ad18f510fd600a25">size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> p == <span class="keyword">nullptr</span> ? 0 : GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a420e3711ae1cdfc044e4f90b600e76cd">  701</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a420e3711ae1cdfc044e4f90b600e76cd">capacity</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> p == <span class="keyword">nullptr</span> ? 0 : GetArrayNode()-&gt;capacity_;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a7afdaa55d2e55e942e732f072a97a862">  707</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a7afdaa55d2e55e942e732f072a97a862">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size() == 0; }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a4b76dbe39fd58a3160cd898378a02469">  710</a></span>&#160;  <span class="keyword">const</span> T <a class="code" href="classtvm_1_1runtime_1_1Array.html#a4b76dbe39fd58a3160cd898378a02469">front</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    ICHECK(p != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot index a null array&quot;</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    ICHECK_GT(p-&gt;size_, 0) &lt;&lt; <span class="stringliteral">&quot;IndexError: cannot index an empty array&quot;</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">return</span> DowncastNoCheck&lt;T&gt;(*(p-&gt;<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a2860450a1004d1f41a9e3586f77cc7aa">begin</a>()));</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a0f3e68f408a65464de76fa5dc3e34a11">  718</a></span>&#160;  <span class="keyword">const</span> T <a class="code" href="classtvm_1_1runtime_1_1Array.html#a0f3e68f408a65464de76fa5dc3e34a11">back</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    ICHECK(p != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot index a null array&quot;</span>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    ICHECK_GT(p-&gt;size_, 0) &lt;&lt; <span class="stringliteral">&quot;IndexError: cannot index an empty array&quot;</span>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">return</span> DowncastNoCheck&lt;T&gt;(*(p-&gt;<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a2d43c95564271491432d279c12f7f94c">end</a>() - 1));</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// mutation in std::vector, implements copy-on-write</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#aa026b914ee05f81b6c20130b8905f257">  732</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#aa026b914ee05f81b6c20130b8905f257">push_back</a>(<span class="keyword">const</span> T&amp; item) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = CopyOnWrite(1);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    p-&gt;<a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a483d75a65f68676ed0a16fca8024ccd6">EmplaceInit</a>(p-&gt;size_++, item);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a78b7d88d169c1305f5dac0818f34141f">  742</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a78b7d88d169c1305f5dac0818f34141f">insert</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> position, <span class="keyword">const</span> T&amp; val) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot insert a null array&quot;</span>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    int64_t idx = std::distance(begin(), position);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">auto</span> addr = CopyOnWrite(1)                               <span class="comment">//</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    -&gt;EnlargeBy(1)                           <span class="comment">//</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    -&gt;MoveElementsRight(idx + 1, idx, size)  <span class="comment">//</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    -&gt;MutableBegin();</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keyword">new</span> (addr + idx) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(val);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#ab07747919e590f2a5b80c5c2f9bde6ce">  760</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#ab07747919e590f2a5b80c5c2f9bde6ce">insert</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> position, IterType first, IterType last) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (first == last) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot insert a null array&quot;</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    int64_t idx = std::distance(begin(), position);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    int64_t numel = std::distance(first, last);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    CopyOnWrite(numel)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        -&gt;EnlargeBy(numel)</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        -&gt;MoveElementsRight(idx + numel, idx, size)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        -&gt;InitRange(idx, first, last);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#aa39300bd019f435ab23353b991019811">  775</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#aa39300bd019f435ab23353b991019811">pop_back</a>() {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot pop_back because array is null&quot;</span>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    ICHECK_GT(size, 0) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot pop_back because array is empty&quot;</span>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    CopyOnWrite()-&gt;ShrinkBy(1);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a0fd88d16147aad4ed810846ce53d21c9">  786</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a0fd88d16147aad4ed810846ce53d21c9">erase</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> position) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot erase a null array&quot;</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    int64_t st = std::distance(begin(), position);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    ICHECK(0 &lt;= st &amp;&amp; st &lt; size) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot erase at index &quot;</span> &lt;&lt; st</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                 &lt;&lt; <span class="stringliteral">&quot;, because Array size is &quot;</span> &lt;&lt; size;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    CopyOnWrite()                             <span class="comment">//</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        -&gt;MoveElementsLeft(st, st + 1, size)  <span class="comment">//</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        -&gt;ShrinkBy(1);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a69e661cb034323ccb707cd73ee3624e4">  802</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a69e661cb034323ccb707cd73ee3624e4">erase</a>(<a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> first, <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">iterator</a> last) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">if</span> (first == last) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot erase a null array&quot;</span>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    int64_t st = std::distance(begin(), first);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    int64_t ed = std::distance(begin(), last);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    ICHECK_LT(st, ed) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot erase array in range [&quot;</span> &lt;&lt; st &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; ed &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    ICHECK(0 &lt;= st &amp;&amp; st &lt;= size &amp;&amp; 0 &lt;= ed &amp;&amp; ed &lt;= size)</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot erase array in range [&quot;</span> &lt;&lt; st &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; ed &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, because array size is &quot;</span> &lt;&lt; size;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    CopyOnWrite()                         <span class="comment">//</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        -&gt;MoveElementsLeft(st, ed, size)  <span class="comment">//</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        -&gt;ShrinkBy(ed - st);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a8064044f8928cf3fed003507d65604c7">  823</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a8064044f8928cf3fed003507d65604c7">resize</a>(int64_t n) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    ICHECK_GE(n, 0) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot resize an Array to negative size&quot;</span>;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> (data_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      SwitchContainer(n);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    int64_t size = GetArrayNode()-&gt;size_;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (size &lt; n) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      CopyOnWrite(n - size)-&gt;EnlargeBy(n - size);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size &gt; n) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      CopyOnWrite()-&gt;ShrinkBy(size - n);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a1a7727b86efaf35c58a5198ab1c139c8">  841</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a1a7727b86efaf35c58a5198ab1c139c8">reserve</a>(int64_t n) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span> (data_ == <span class="keyword">nullptr</span> || n &gt; GetArrayNode()-&gt;capacity_) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      SwitchContainer(n);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a0c6b43e7ddd25655961a4bdf2251fd4e">  848</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a0c6b43e7ddd25655961a4bdf2251fd4e">clear</a>() {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (data_ != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = CopyOnWrite();</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      p-&gt;<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a71be89dffaf8f77fcb8c3d5bbdc202ed">clear</a>();</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Array&#39;s own methods</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#ab5db2ee9a8be71931324dac552be24c4">  863</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#ab5db2ee9a8be71931324dac552be24c4">Set</a>(int64_t i, T value) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = this-&gt;CopyOnWrite();</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    ICHECK(0 &lt;= i &amp;&amp; i &lt; p-&gt;size_)</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;IndexError: indexing &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; on an array of size &quot;</span> &lt;&lt; p-&gt;size_;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    *(p-&gt;MutableBegin() + i) = std::move(value);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a50385ee3535af422c478d91166331a3c">  871</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* <a class="code" href="classtvm_1_1runtime_1_1Array.html#a50385ee3535af422c478d91166331a3c">GetArrayNode</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>*<span class="keyword">&gt;</span>(data_.get()); }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a127d022f391a566b51abf16ce4bd74af">  880</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#a127d022f391a566b51abf16ce4bd74af">MutateByApply</a>(F fmutate) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (data_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keyword">struct </span>StackFrame {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      int64_t i;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      int64_t size;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    };</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    std::unique_ptr&lt;StackFrame&gt; s = std::make_unique&lt;StackFrame&gt;();</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    s-&gt;p = GetArrayNode();</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    s-&gt;itr = s-&gt;p-&gt;MutableBegin();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    s-&gt;i = 0;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    s-&gt;size = s-&gt;p-&gt;size_;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (!data_.unique()) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// Loop invariant: keeps iterating when</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="comment">// 1) data is not unique</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="comment">// 2) no elements are actually mutated yet</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">for</span> (; s-&gt;i &lt; s-&gt;size; ++s-&gt;i, ++s-&gt;itr) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        T new_elem = fmutate(DowncastNoCheck&lt;T&gt;(*s-&gt;itr));</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// do nothing when there is no mutation</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span> (new_elem.same_as(*s-&gt;itr)) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="comment">// loop invariant breaks when the first real mutation happens</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment">// we copy the elements into a new unique array</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> copy = ArrayNode::CopyFrom(s-&gt;p-&gt;capacity_, s-&gt;p);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        s-&gt;itr = copy-&gt;MutableBegin() + (s-&gt;i++);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        *s-&gt;itr++ = std::move(new_elem);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        data_ = std::move(copy);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="comment">// make sure `data_` is unique and break</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// when execution comes to this line, it is guaranteed that either</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="comment">//    1) i == size</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">// or 2) data_.unique() is true</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">for</span> (; s-&gt;i &lt; s-&gt;size; ++s-&gt;i, ++s-&gt;itr) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      *s-&gt;itr = std::move(fmutate(std::move(DowncastNoCheck&lt;T&gt;(std::move(*s-&gt;itr)))));</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#abd2918a29b15ea51e0ff7c88affa212f">  930</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html#abd2918a29b15ea51e0ff7c88affa212f">Assign</a>(IterType first, IterType last) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    int64_t cap = std::distance(first, last);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    ICHECK_GE(cap, 0) &lt;&lt; <span class="stringliteral">&quot;ValueError: cannot construct an Array of negative size&quot;</span>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> (p != <span class="keyword">nullptr</span> &amp;&amp; data_.<a class="code" href="classtvm_1_1runtime_1_1Object.html#afd548730a6139d19fe24473ad66026d7">unique</a>() &amp;&amp; p-&gt;capacity_ &gt;= cap) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="comment">// do not have to make new space</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      p-&gt;<a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html#a71be89dffaf8f77fcb8c3d5bbdc202ed">clear</a>();</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="comment">// create new space</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      data_ = ArrayNode::Empty(cap);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      p = GetArrayNode();</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// To ensure exception safety, size is only incremented after the initialization succeeds</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>* itr = p-&gt;MutableBegin();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">for</span> (int64_t&amp; i = p-&gt;size_ = 0; i &lt; cap; ++i, ++first, ++itr) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keyword">new</span> (itr) <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(*first);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#ae82a366999c6d2a503411868f3bcf6af">  957</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* <a class="code" href="classtvm_1_1runtime_1_1Array.html#ae82a366999c6d2a503411868f3bcf6af">CopyOnWrite</a>() {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">if</span> (data_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> SwitchContainer(ArrayNode::kInitSize);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (!data_.unique()) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keywordflow">return</span> SwitchContainer(capacity());</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>*<span class="keyword">&gt;</span>(data_.get());</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  }</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Array.html#a031d3a0bc8443b3895567333103a4bb2">  968</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a> = <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* CopyOnWrite(int64_t reserve_extra) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* p = GetArrayNode();</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">if</span> (p == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="comment">// necessary to get around the constexpr address issue before c++17</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keyword">const</span> int64_t kInitSize = ArrayNode::kInitSize;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">return</span> SwitchContainer(<a class="code" href="namespacetvm.html#a0df5ca82d2c566f628ebb2f1e84a3fcb">std::max</a>(kInitSize, reserve_extra));</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (p-&gt;capacity_ &gt;= p-&gt;size_ + reserve_extra) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">return</span> CopyOnWrite();</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    int64_t cap = p-&gt;capacity_ * ArrayNode::kIncFactor;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    cap = <a class="code" href="namespacetvm.html#a0df5ca82d2c566f628ebb2f1e84a3fcb">std::max</a>(cap, p-&gt;size_ + reserve_extra);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">return</span> SwitchContainer(cap);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>* SwitchContainer(int64_t capacity) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span> (data_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      data_ = ArrayNode::Empty(capacity);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_.unique()) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      data_ = ArrayNode::MoveFrom(capacity, GetArrayNode());</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      data_ = ArrayNode::CopyFrom(capacity, GetArrayNode());</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">ArrayNode</a>*<span class="keyword">&gt;</span>(data_.get());</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;};</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T,</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, T&gt;::value&gt;::type&gt;</div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2"> 1015</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">Concat</a>(<a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a> lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html">Array&lt;T&gt;</a>&amp; rhs) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; x : rhs) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    lhs.<a class="code" href="classtvm_1_1runtime_1_1Array.html#aa026b914ee05f81b6c20130b8905f257">push_back</a>(x);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">return</span> std::move(lhs);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">// Specialize make_object&lt;ArrayNode&gt; to make sure it is correct.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a57b4c19389363853e409527badb5b177"> 1024</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;ArrayNode&gt;</a> <a class="code" href="namespacetvm_1_1runtime.html#a57b4c19389363853e409527badb5b177">make_object</a>() {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">return</span> ArrayNode::Empty();</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html"> 1029</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ADTObj.html">ADTObj</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>, <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase</a>&lt;ADTObj, ObjectRef&gt; {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html#a8c1835b988e836dd451a343bac7e402d"> 1032</a></span>&#160;  int32_t <a class="code" href="classtvm_1_1runtime_1_1ADTObj.html#a8c1835b988e836dd451a343bac7e402d">tag</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html#a699d898a036382a0c86fba219bcf8102"> 1034</a></span>&#160;  uint32_t <a class="code" href="classtvm_1_1runtime_1_1ADTObj.html#a699d898a036382a0c86fba219bcf8102">size</a>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// The fields of the structure follows directly in memory.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html#ae35ebc3d49a7264ac1ed16a80472347f"> 1037</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = TypeIndex::kRuntimeADT;</div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html#ab083e5c0b35f64b668eaf5cfb0f98098"> 1038</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;runtime.ADT&quot;</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1ADTObj.html">ADTObj</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordtype">size_t</span> GetSize()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size; }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator&gt;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordtype">void</span> Init(Iterator begin, Iterator end) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordtype">size_t</span> num_elems = std::distance(begin, end);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    this-&gt;size = 0;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keyword">auto</span> it = begin;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; num_elems; ++i) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      InplaceArrayBase::EmplaceInit(i, *it++);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="comment">// Only increment size after the initialization succeeds</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      this-&gt;size++;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADTObj.html#a96ef507f2261998fb326f88992b9738a"> 1066</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">InplaceArrayBase&lt;ADTObj, ObjectRef&gt;</a>;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;};</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html"> 1071</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#a204397cb319fdb83a72b1d9112a09caa"> 1079</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ADT.html#a204397cb319fdb83a72b1d9112a09caa">ADT</a>(int32_t tag, std::vector&lt;ObjectRef&gt; fields) : <a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a>(tag, fields.begin(), fields.end()){};</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator&gt;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#aea0665ed087095ed39354064e5071d4f"> 1089</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ADT.html#aea0665ed087095ed39354064e5071d4f">ADT</a>(int32_t tag, Iterator begin, Iterator end) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordtype">size_t</span> num_elems = std::distance(begin, end);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keyword">auto</span> ptr = make_inplace_array_object&lt;ADTObj, ObjectRef&gt;(num_elems);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    ptr-&gt;tag = tag;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    ptr-&gt;Init(begin, end);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    data_ = std::move(ptr);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#a9ebe228980db0256d72fc01ba5c7ae89"> 1103</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ADT.html#a9ebe228980db0256d72fc01ba5c7ae89">ADT</a>(int32_t tag, std::initializer_list&lt;ObjectRef&gt; init) : <a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a>(tag, init.begin(), init.end()){};</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#a88cf389012aad0e129c84c056ae546fc"> 1111</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1ADT.html#a88cf389012aad0e129c84c056ae546fc">operator[]</a>(<span class="keywordtype">size_t</span> idx)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> operator-&gt;()-&gt;operator[](idx); }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#ae27124341aa924bfd3e8e0606fb16f1c"> 1116</a></span>&#160;  int32_t <a class="code" href="classtvm_1_1runtime_1_1ADT.html#ae27124341aa924bfd3e8e0606fb16f1c">tag</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> operator-&gt;()-&gt;tag; }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#af51613add20f67643684b1c7fdd5569a"> 1121</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1ADT.html#af51613add20f67643684b1c7fdd5569a">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> operator-&gt;()-&gt;size; }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ADT.html#a871e902541f0a7e550e74ae0c621994c"> 1131</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a> <a class="code" href="classtvm_1_1runtime_1_1ADT.html#a871e902541f0a7e550e74ae0c621994c">Tuple</a>(Args&amp;&amp;... args) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a>(0, std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  }</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="object_8h.html#ac6e7295a4999e2c8e4a2c990beca887a">TVM_DEFINE_OBJECT_REF_METHODS</a>(<a class="code" href="classtvm_1_1runtime_1_1ADT.html">ADT</a>, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>, <a class="code" href="classtvm_1_1runtime_1_1ADTObj.html">ADTObj</a>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;};</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html"> 1139</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a> {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html#a4ab9dd883ceed3efccf663acfbcd152f"> 1142</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classtvm_1_1runtime_1_1StringObj.html#a4ab9dd883ceed3efccf663acfbcd152f">data</a>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html#a866c6a8805c30f6cc4faac2298985d23"> 1145</a></span>&#160;  uint64_t <a class="code" href="classtvm_1_1runtime_1_1StringObj.html#a866c6a8805c30f6cc4faac2298985d23">size</a>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html#a9d0bb5c54d59456980767be2398dbc16"> 1147</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = TypeIndex::kRuntimeString;</div><div class="line"><a name="l01148"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html#a4b4433ded5abdaae4ac417cee103f8d2"> 1148</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;runtime.String&quot;</span>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj.html#a7fb804f7dc96dd9f705c84095f37f1ca"> 1153</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html">FromStd</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;};</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html"> 1184</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01189"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#ac5d930b522e9fef9c07e51819d96d2f3"> 1189</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1String.html#ac5d930b522e9fef9c07e51819d96d2f3">String</a>() : <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>(<a class="code" href="namespacestd.html">std</a>::string()) {}</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>(std::string other);  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a68df7bab89fca339e3918438dd80300d"> 1205</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1String.html#a68df7bab89fca339e3918438dd80300d">String</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* other)  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      : <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>(<a class="code" href="namespacestd.html">std</a>::string(other)) {}</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; operator=(std::string other);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; operator=(<span class="keyword">const</span> <span class="keywordtype">char</span>* other);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44"> 1231</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span> memncmp(data(), other.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), size(), other.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>());</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#abe6782ebaf76b9e3e1ef6ae21f5447c7"> 1243</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#abe6782ebaf76b9e3e1ef6ae21f5447c7">compare</a>(<span class="keyword">const</span> std::string&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">return</span> memncmp(data(), other.data(), size(), other.size());</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a03f9f2382fbbf611af6591ce1afb0dca"> 1255</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#a03f9f2382fbbf611af6591ce1afb0dca">compare</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> memncmp(data(), other, size(), std::strlen(other));</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#ac785c91cb744c18f3ef21fab098d02b2"> 1264</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classtvm_1_1runtime_1_1String.html#ac785c91cb744c18f3ef21fab098d02b2">c_str</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>()-&gt;data; }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de"> 1271</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>* ptr = <span class="keyword">get</span>();</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">return</span> ptr-&gt;size;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a812045bfefb0f80f850d1b39f0e40489"> 1281</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#a812045bfefb0f80f850d1b39f0e40489">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size(); }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a897a877128c8b8a7e57dec0847cf33c7"> 1288</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#a897a877128c8b8a7e57dec0847cf33c7">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size() == 0; }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#aaeda6a88310d41a22ce884fb1570b0d2"> 1296</a></span>&#160;  <span class="keywordtype">char</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#aaeda6a88310d41a22ce884fb1570b0d2">at</a>(<span class="keywordtype">size_t</span> pos)<span class="keyword"> const </span>{</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">if</span> (pos &lt; size()) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">return</span> data()[pos];</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="keywordflow">throw</span> std::out_of_range(<span class="stringliteral">&quot;tvm::String index out of bounds&quot;</span>);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5"> 1309</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>()-&gt;data; }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keyword">operator</span> std::string()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> std::string{<span class="keyword">get</span>()-&gt;data, size()}; }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// LLVM compatibility function, implemented in src/target/llvm/llvm_common.h</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment"></span>  <span class="keyword">inline</span> <span class="keyword">operator</span> llvm::StringRef() <span class="keyword">const</span>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> CanConvertFrom(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1TVMArgValue.html">TVMArgValue</a>&amp; val);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a0ea0aa1d24073721ee7bf9bd5d23c53a"> 1339</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1String.html#a0ea0aa1d24073721ee7bf9bd5d23c53a">HashBytes</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">size_t</span> size) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// This function falls back to string copy with c++11 compiler and is</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// recommended to be compiled with c++14</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="preprocessor">#if TVM_USE_CXX17_STRING_VIEW_HASH</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> std::hash&lt;std::string_view&gt;()(std::string_view(data, size));</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="preprocessor">#elif TVM_USE_CXX14_STRING_VIEW_HASH</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">return</span> std::hash&lt;std::experimental::string_view&gt;()(std::experimental::string_view(data, size));</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">return</span> std::hash&lt;std::string&gt;()(std::string(data, size));</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <a class="code" href="object_8h.html#a782d0de62fbf75736e29c1e79c22c7f1">TVM_DEFINE_NOTNULLABLE_OBJECT_REF_METHODS</a>(<a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>, <a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a>);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> memncmp(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs, <span class="keywordtype">size_t</span> lhs_count, <span class="keywordtype">size_t</span> rhs_count);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">Concat</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keywordtype">size_t</span> lhs_size, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs, <span class="keywordtype">size_t</span> rhs_size) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    std::string <a class="code" href="namespacetvm_1_1tir_1_1builtin.html#ae7816fdebd5d56f2145cdf371b756eb4">ret</a>(lhs, lhs_size);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    ret.append(rhs, rhs_size);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>(ret);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="comment">// Overload + operator</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#ac0e10a4b0b377bd0783ee2b8feba4d2f"> 1389</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">tvm::runtime::ObjectEqual</a>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;};</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html"> 1393</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html">StringObj::FromStd</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a> {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html#ae16447bf3dfb1874dc8e04633ba820b4"> 1403</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html#ae16447bf3dfb1874dc8e04633ba820b4">FromStd</a>(std::string other) : data_container{other} {}</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  std::string data_container;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html#a7fb804f7dc96dd9f705c84095f37f1ca"> 1409</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;};</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a02fca36e3ff55cc1e83635b02a11fca3"> 1412</a></span>&#160;<span class="keyword">inline</span> String::String(std::string other) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="keyword">auto</span> ptr = make_object&lt;StringObj::FromStd&gt;(std::move(other));</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  ptr-&gt;<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a> = ptr-&gt;data_container.size();</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  ptr-&gt;data = ptr-&gt;data_container.data();</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  data_ = std::move(ptr);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;}</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#a3b3c8614af05adc454f47132e04552ed"> 1419</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; String::operator=(std::string other) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> replace{std::move(other)};</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  data_.swap(replace.data_);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1String.html#aaf3615a763a98184d648c976565f6893"> 1425</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; String::operator=(<span class="keyword">const</span> <span class="keywordtype">char</span>* other) { <span class="keywordflow">return</span> operator=(std::string(other)); }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a3dbaf8d9ec6bd68590a23da05d8a2831"> 1427</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="keywordtype">size_t</span> lhs_size = lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordtype">size_t</span> rhs_size = rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">String::Concat</a>(lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), lhs_size, rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), rhs_size);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a5c069145ecfa5909a77841f60332af4d"> 1433</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordtype">size_t</span> lhs_size = lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordtype">size_t</span> rhs_size = rhs.size();</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">String::Concat</a>(lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), lhs_size, rhs.data(), rhs_size);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#acc9820cf44823ad5098183e9dbd7b867"> 1439</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keywordtype">size_t</span> lhs_size = lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keywordtype">size_t</span> rhs_size = rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">String::Concat</a>(lhs.data(), lhs_size, rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), rhs_size);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a935d5423ffab64da49612e80f775a8ff"> 1445</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keywordtype">size_t</span> lhs_size = std::strlen(lhs);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordtype">size_t</span> rhs_size = rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">String::Concat</a>(lhs, lhs_size, rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), rhs_size);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;}</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a"> 1451</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a> <a class="code" href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">operator+</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordtype">size_t</span> lhs_size = lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>();</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordtype">size_t</span> rhs_size = std::strlen(rhs);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">String::Concat</a>(lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), lhs_size, rhs, rhs_size);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;}</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">// Overload &lt; operator</span></div><div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a2865dffa2fddf5eff9d7ed397563ebd6"> 1458</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt; 0; }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ad5305faaeefd679da62186dab423bdab"> 1460</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">operator&lt;</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &gt; 0; }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a263e89c942dc4b01075dd01b6882a814"> 1462</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt; 0; }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#acbbf6ce2f770d4f348ace3407ee9c500"> 1464</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt; 0; }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4"> 1466</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">operator&lt;</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &gt; 0; }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">// Overload &gt; operator</span></div><div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#af7996be0c57184e8ff9e655d0d055edc"> 1469</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">operator&gt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt; 0; }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a031e6c8e64cd9db11754355e3250ab4c"> 1471</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">operator&gt;</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &lt; 0; }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#abf23f2e6b19c87ecf3f27a7506ddf4c0"> 1473</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">operator&gt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt; 0; }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a2001f8f5205170a33ea1b9db314549c9"> 1475</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">operator&gt;</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt; 0; }</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0"> 1477</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">operator&gt;</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &lt; 0; }</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">// Overload &lt;= operator</span></div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a92428efae022d4982b2644f8960d4386"> 1480</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">operator&lt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt;= 0; }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a8daf39dc422f228fae2ec11a426bab28"> 1482</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">operator&lt;=</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &gt;= 0; }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a9cf2e7e67fd12d69c5bce2be881c8296"> 1484</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">operator&lt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt;= 0; }</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div><div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a1d696c920a17b8c54775705062de75be"> 1486</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">operator&lt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt;= 0; }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a"> 1488</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">operator&lt;=</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &gt;= 0; }</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">// Overload &gt;= operator</span></div><div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a944029d40e689e4d2acab53ce36a5c99"> 1491</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt;= 0; }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a8f8694e651078c6df7c5c26898ee9f14"> 1493</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">operator&gt;=</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) &lt;= 0; }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#af7310fb8b9944f41f8f30021d92847eb"> 1495</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt;= 0; }</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#afb4bb211393bf9d17b138cad36421c84"> 1497</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &gt;= 0; }</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4"> 1499</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">operator&gt;=</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) &lt;= 0; }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">// Overload == operator</span></div><div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#aba04626a0c1e717679d673bc90c6a23f"> 1502</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) == 0; }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a81dae8fb1a2fa349cfb272525294f954"> 1504</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">operator==</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) == 0; }</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a5109f107067bdcf493aafafd8896e031"> 1506</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) == 0; }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a5a5995094218eac7fe1f98e1abee852d"> 1508</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) == 0; }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2"> 1510</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">operator==</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) == 0; }</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">// Overload != operator</span></div><div class="line"><a name="l01513"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a7d584f14566754b91a0e7f415b83fbda"> 1513</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> std::string&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) != 0; }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ab556e58d616b05ce4ae338f887b17cb4"> 1515</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">operator!=</a>(<span class="keyword">const</span> std::string&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) != 0; }</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a504adcfea8e21b2865b56cdfad447918"> 1517</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) != 0; }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a2a808c040486da95a7fa2f4725b55635"> 1519</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs) { <span class="keywordflow">return</span> lhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(rhs) != 0; }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280"> 1521</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">operator!=</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; rhs) { <span class="keywordflow">return</span> rhs.<a class="code" href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">compare</a>(lhs) != 0; }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#a2c20920d4a09a6c022768b353ec8df2a"> 1523</a></span>&#160;<span class="keyword">inline</span> std::ostream&amp; <a class="code" href="namespacetvm_1_1runtime.html#a2c20920d4a09a6c022768b353ec8df2a">operator&lt;&lt;</a>(std::ostream&amp; out, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">String</a>&amp; input) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  out.write(input.<a class="code" href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">data</a>(), input.<a class="code" href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">size</a>());</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="keywordflow">return</span> out;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> String::memncmp(<span class="keyword">const</span> <span class="keywordtype">char</span>* lhs, <span class="keyword">const</span> <span class="keywordtype">char</span>* rhs, <span class="keywordtype">size_t</span> lhs_count, <span class="keywordtype">size_t</span> rhs_count) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordflow">if</span> (lhs == rhs &amp;&amp; lhs_count == rhs_count) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; lhs_count &amp;&amp; i &lt; rhs_count; ++i) {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">if</span> (lhs[i] &lt; rhs[i]) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">if</span> (lhs[i] &gt; rhs[i]) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">if</span> (lhs_count &lt; rhs_count) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lhs_count &gt; rhs_count) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1ObjectHash.html#ac97f4e15c15ac91185c7ead75d04dd3f"> 1544</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">size_t</span> ObjectHash::operator()(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; a)<span class="keyword"> const </span>{</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* str = a.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#a2d76fa1fb628ff276a284e61123589c5">as</a>&lt;<a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a>&gt;()) {</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">return</span> String::HashBytes(str-&gt;data, str-&gt;size);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  }</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structtvm_1_1runtime_1_1ObjectPtrHash.html">ObjectPtrHash</a>()(a);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1ObjectEqual.html#a3f1385e14a5a9f96035b0b567e5994a0"> 1551</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> ObjectEqual::operator()(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>&amp; b)<span class="keyword"> const </span>{</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">if</span> (a.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#ae31a5b9f40781d60a2901994ead700e8">same_as</a>(b)) {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* str_a = a.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#a2d76fa1fb628ff276a284e61123589c5">as</a>&lt;<a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a>&gt;()) {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* str_b = b.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#a2d76fa1fb628ff276a284e61123589c5">as</a>&lt;<a class="code" href="classtvm_1_1runtime_1_1StringObj.html">StringObj</a>&gt;()) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">return</span> String::memncmp(str_a-&gt;data, str_b-&gt;data, str_a-&gt;size, str_b-&gt;size) == 0;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    }</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"><a class="line" href="structtvm_1_1runtime_1_1NullOptType.html"> 1564</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtvm_1_1runtime_1_1NullOptType.html">NullOptType</a> {};</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html"> 1580</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01582"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a060b345337ea063b80b6380878704c00"> 1582</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a> = <span class="keyword">typename</span> T::ContainerType;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  static_assert(std::is_base_of&lt;ObjectRef, T&gt;::value, <span class="stringliteral">&quot;Optional is only defined for ObjectRef.&quot;</span>);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// default constructors.</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp;) = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional</a>(<a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp;&amp;) = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp;) = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; operator=(<a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp;&amp;) = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01595"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#aa07cc5bd536a18454ed737fb42b80be2"> 1595</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#aa07cc5bd536a18454ed737fb42b80be2">Optional</a>(<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> ptr) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(ptr) {}</div><div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a37dde5a68fe4e1f13494a66f79da419b"> 1597</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a37dde5a68fe4e1f13494a66f79da419b">Optional</a>(<a class="code" href="structtvm_1_1runtime_1_1NullOptType.html">NullOptType</a>) {}  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// nullptr handling.</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">// disallow implicit conversion as 0 can be implicitly converted to nullptr_t</span></div><div class="line"><a name="l01600"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a4474559794818ad1257b70e681929938"> 1600</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a4474559794818ad1257b70e681929938">Optional</a>(std::nullptr_t) {}</div><div class="line"><a name="l01601"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#ab0f16ec4c71f65eec4a2ea9a83711a73"> 1601</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Optional.html#ab0f16ec4c71f65eec4a2ea9a83711a73">operator=</a>(std::nullptr_t) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    data_ = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="comment">// normal value handling.</span></div><div class="line"><a name="l01606"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a39892e077bef2ff9379bd97b2f3e1a69"> 1606</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a39892e077bef2ff9379bd97b2f3e1a69">Optional</a>(T other)  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(<a class="code" href="namespacestd.html">std</a>::move(other)) {}</div><div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a98b43ed21bc060868ac03dab520a5da2"> 1608</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a98b43ed21bc060868ac03dab520a5da2">operator=</a>(T other) {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    ObjectRef::operator=(std::move(other));</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// delete the int constructor</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// since Optional&lt;Integer&gt;(0) is ambiguious</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// 0 can be implicitly casted to nullptr_t</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional</a>(<span class="keywordtype">int</span> val) = <span class="keyword">delete</span>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; operator=(<span class="keywordtype">int</span> val) = <span class="keyword">delete</span>;</div><div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f"> 1621</a></span>&#160;  T <a class="code" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">value</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    ICHECK(data_ != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">return</span> T(data_);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  }</div><div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a15be72990266fc89e03fdf08bae0f331"> 1629</a></span>&#160;  T <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a15be72990266fc89e03fdf08bae0f331">value_or</a>(T default_value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_ != <span class="keyword">nullptr</span> ? T(data_) : default_value; }</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a3b2e44b31ccfcb1e8f13fac3aefca792"> 1632</a></span>&#160;  <span class="keyword">explicit</span> <span class="keyword">operator</span> bool()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span> != <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="comment">// operator overloadings</span></div><div class="line"><a name="l01634"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#ae162e2c75ca786277c01a0f91b157fee"> 1634</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#ae162e2c75ca786277c01a0f91b157fee">operator==</a>(std::nullptr_t)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_ == <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l01635"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a32af8cd9a493a1b072c03e5becbfa8b6"> 1635</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a32af8cd9a493a1b072c03e5becbfa8b6">operator!=</a>(std::nullptr_t)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_ != <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l01636"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#aba83dc01d0f82381c3505c20a6bb36b7"> 1636</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#aba83dc01d0f82381c3505c20a6bb36b7">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// support case where sub-class returns a symbolic ref type.</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keyword">using</span> RetType = decltype(value() == other.<a class="code" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">value</a>());</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">if</span> (same_as(other)) <span class="keywordflow">return</span> RetType(<span class="keyword">true</span>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> != <span class="keyword">nullptr</span> &amp;&amp; other != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="keywordflow">return</span> value() == other.<a class="code" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">value</a>();</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="comment">// one of them is nullptr.</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">return</span> RetType(<span class="keyword">false</span>);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  }</div><div class="line"><a name="l01647"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a19b27f0fea9c594cb61d22e4d64fd66f"> 1647</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a19b27f0fea9c594cb61d22e4d64fd66f">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">Optional&lt;T&gt;</a>&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="comment">// support case where sub-class returns a symbolic ref type.</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="keyword">using</span> RetType = decltype(value() != other.<a class="code" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">value</a>());</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordflow">if</span> (same_as(other)) <span class="keywordflow">return</span> RetType(<span class="keyword">false</span>);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> != <span class="keyword">nullptr</span> &amp;&amp; other != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="keywordflow">return</span> value() != other.<a class="code" href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">value</a>();</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="comment">// one of them is nullptr.</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="keywordflow">return</span> RetType(<span class="keyword">true</span>);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  }</div><div class="line"><a name="l01658"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#abb41934cee66ce6f25eba0f6de68ff1f"> 1658</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#abb41934cee66ce6f25eba0f6de68ff1f">operator==</a>(<span class="keyword">const</span> T&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keyword">using</span> RetType = decltype(value() == other);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span> (same_as(other)) <span class="keywordflow">return</span> RetType(<span class="keyword">true</span>);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> != <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> value() == other;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">return</span> RetType(<span class="keyword">false</span>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  }</div><div class="line"><a name="l01664"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a415f6b164bc4b4496e717129bd88396b"> 1664</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a415f6b164bc4b4496e717129bd88396b">operator!=</a>(<span class="keyword">const</span> T&amp; other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other); }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;</div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a2e5b8e5065518ef40c70d5575edf8806"> 1666</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#a2e5b8e5065518ef40c70d5575edf8806">operator==</a>(<span class="keyword">const</span> U&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keyword">using</span> RetType = decltype(value() == other);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> RetType(<span class="keyword">false</span>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> value() == other;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  }</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;</div><div class="line"><a name="l01672"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#ae13ed54071e9b2605ab0e9810d4af9b1"> 1672</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html#ae13ed54071e9b2605ab0e9810d4af9b1">operator!=</a>(<span class="keyword">const</span> U&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keyword">using</span> RetType = decltype(value() != other);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> RetType(<span class="keyword">true</span>);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> value() != other;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div><div class="line"><a name="l01677"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Optional.html#a44303056ef977eb853c76910e9b71573"> 1677</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> _type_is_nullable = <span class="keyword">true</span>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;};</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ClosureObj.html"> 1684</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1ClosureObj.html">ClosureObj</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a> {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ClosureObj.html#a4d209f38e8290db391d27a05aa2bc892"> 1686</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = TypeIndex::kRuntimeClosure;</div><div class="line"><a name="l01687"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1ClosureObj.html#a481f12bd7c46e792c9edd4a04125c686"> 1687</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;runtime.Closure&quot;</span>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="object_8h.html#ac2b7418e9549512b5db0126cf2a716f1">TVM_DECLARE_BASE_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1ClosureObj.html">ClosureObj</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;};</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Closure.html"> 1692</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Closure.html">Closure</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="object_8h.html#ac6e7295a4999e2c8e4a2c990beca887a">TVM_DEFINE_OBJECT_REF_METHODS</a>(<a class="code" href="classtvm_1_1runtime_1_1Closure.html">Closure</a>, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>, <a class="code" href="classtvm_1_1runtime_1_1ClosureObj.html">ClosureObj</a>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;};</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="preprocessor">#if (USE_FALLBACK_STL_MAP != 0)</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a> {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keyword">using</span> key_type = <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keyword">using</span> mapped_type = <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a> = std::unordered_map&lt;ObjectRef, ObjectRef, ObjectHash, ObjectEqual&gt;;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="keyword">using</span> iterator = ContainerType::iterator;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keyword">using</span> const_iterator = ContainerType::const_iterator;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="keyword">using</span> KVType = ContainerType::value_type;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  static_assert(std::is_standard_layout&lt;KVType&gt;::value, <span class="stringliteral">&quot;KVType is not standard layout&quot;</span>);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  static_assert(<span class="keyword">sizeof</span>(KVType) == 16 || <span class="keyword">sizeof</span>(KVType) == 8, <span class="stringliteral">&quot;sizeof(KVType) incorrect&quot;</span>);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = runtime::TypeIndex::kRuntimeMap;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;Map&quot;</span>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="keywordtype">size_t</span> size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.size(); }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordtype">size_t</span> count(<span class="keyword">const</span> key_type&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.count(key); }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keyword">const</span> mapped_type&amp; at(<span class="keyword">const</span> key_type&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.at(key); }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  mapped_type&amp; at(<span class="keyword">const</span> key_type&amp; key) { <span class="keywordflow">return</span> data_.at(key); }</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  iterator begin() { <span class="keywordflow">return</span> data_.begin(); }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  const_iterator begin()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.begin(); }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  iterator end() { <span class="keywordflow">return</span> data_.end(); }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  const_iterator end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.end(); }</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  const_iterator find(<span class="keyword">const</span> key_type&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.find(key); }</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  iterator find(<span class="keyword">const</span> key_type&amp; key) { <span class="keywordflow">return</span> data_.find(key); }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keywordtype">void</span> erase(<span class="keyword">const</span> iterator&amp; position) { data_.erase(position); }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="keywordtype">void</span> erase(<span class="keyword">const</span> key_type&amp; key) { data_.erase(key); }</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> Empty() { <span class="keywordflow">return</span> make_object&lt;MapNode&gt;(); }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> CreateFromRange(IterType first, IterType last) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> p = make_object&lt;MapNode&gt;();</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    p-&gt;data_ = <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a>(first, last);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  }</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> InsertMaybeReHash(<span class="keyword">const</span> KVType&amp; kv, <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a>* map) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* map_node = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>*<span class="keyword">&gt;</span>(map-&gt;<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html#a06d1de2ed3cfdde9f698155b14948fc7">get</a>());</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    map_node-&gt;data_[kv.first] = kv.second;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> CopyFrom(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* from) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> p = make_object&lt;MapNode&gt;();</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    p-&gt;data_ = <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a>(from-&gt;data_.<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ad1ae0eaa6dfdc48d5f037ee51a867fe7">begin</a>(), from-&gt;data_.<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a8c31c029a28ca7f5ab0ceb3fcf7ded89">end</a>());</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  }</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a> data_;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>&gt;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Map.html">Map</a>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;};</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html"> 1823</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a> {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a26ef1b067ec33d0bcd86b72afc6bf608"> 1826</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a> = <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>;</div><div class="line"><a name="l01828"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a49fbdf8758a6e4376c0c3ffcf573bc77"> 1828</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a> = <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>;</div><div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca"> 1830</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a> = std::pair&lt;ObjectRef, ObjectRef&gt;;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  static_assert(std::is_standard_layout&lt;KVType&gt;::value, <span class="stringliteral">&quot;KVType is not standard layout&quot;</span>);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  static_assert(<span class="keyword">sizeof</span>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>) == 16 || <span class="keyword">sizeof</span>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>) == 8, <span class="stringliteral">&quot;sizeof(KVType) incorrect&quot;</span>);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a8ada6761aea90e293b2ce9beed519183"> 1837</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> uint32_t _type_index = runtime::TypeIndex::kRuntimeMap;</div><div class="line"><a name="l01838"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#aa84cf88d4cc292125cd21e9222f005ec"> 1838</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* _type_key = <span class="stringliteral">&quot;Map&quot;</span>;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <a class="code" href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>, <a class="code" href="classtvm_1_1runtime_1_1Object.html">Object</a>);</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a5c0c770f7667f911aa8bec879e3ac214"> 1845</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a5c0c770f7667f911aa8bec879e3ac214">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size_; }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keywordtype">size_t</span> count(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) <span class="keyword">const</span>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; at(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) <span class="keyword">const</span>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; at(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> begin() <span class="keyword">const</span>;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> end() <span class="keyword">const</span>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> find(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) <span class="keyword">const</span>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordtype">void</span> erase(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; position);</div><div class="line"><a name="l01883"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a3fda35a31720bc5d9c70d0b4fe26ecf0"> 1883</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a3fda35a31720bc5d9c70d0b4fe26ecf0">erase</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) { <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a3fda35a31720bc5d9c70d0b4fe26ecf0">erase</a>(find(key)); }</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html"> 1885</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <span class="keyword">public</span>:</div><div class="line"><a name="l01887"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a6b105410198a644ddbd1b83695711715"> 1887</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a6b105410198a644ddbd1b83695711715">iterator_category</a> = std::forward_iterator_tag;</div><div class="line"><a name="l01888"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#adf62c96244160116493dd6a3f6ca3b6e"> 1888</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#adf62c96244160116493dd6a3f6ca3b6e">difference_type</a> = int64_t;</div><div class="line"><a name="l01889"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#af27376d48f56d42f28440536d1774405"> 1889</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#af27376d48f56d42f28440536d1774405">value_type</a> = <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>;</div><div class="line"><a name="l01890"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a0c38eac8fa87129d754972cd305a6a89"> 1890</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a0c38eac8fa87129d754972cd305a6a89">pointer</a> = <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*;</div><div class="line"><a name="l01891"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abc5b09553663c05b863c4a406a343c92"> 1891</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abc5b09553663c05b863c4a406a343c92">reference</a> = <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp;;</div><div class="line"><a name="l01893"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ad605c9f9aaed23e669c2a3c595d08ba4"> 1893</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ad605c9f9aaed23e669c2a3c595d08ba4">iterator</a>() : index(0), self(nullptr) {}</div><div class="line"><a name="l01895"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a264c17028af85fe4619852f804e9464a"> 1895</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a264c17028af85fe4619852f804e9464a">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; other)<span class="keyword"> const </span>{</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">return</span> index == other.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a> &amp;&amp; <span class="keyword">self</span> == other.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5bac4439279428fb3c0d44aa6b1cc798">self</a>;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    }</div><div class="line"><a name="l01899"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4adb64a40bda0e39d95f8d82b2df5df3"> 1899</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4adb64a40bda0e39d95f8d82b2df5df3">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other); }</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a0c38eac8fa87129d754972cd305a6a89">pointer</a> operator-&gt;() <span class="keyword">const</span>;</div><div class="line"><a name="l01903"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ac09b2cd5327e5102ab373b482530f1e2"> 1903</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abc5b09553663c05b863c4a406a343c92">reference</a> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ac09b2cd5327e5102ab373b482530f1e2">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *((*this).operator-&gt;()); }</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; operator++();</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; operator--();</div><div class="line"><a name="l01909"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5230a8db9f60b62bc74d14ab8c3580ad"> 1909</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5230a8db9f60b62bc74d14ab8c3580ad">operator++</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      ++(*this);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    }</div><div class="line"><a name="l01915"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abd9253b9f7f2bcc9535a6047b3d1b529"> 1915</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abd9253b9f7f2bcc9535a6047b3d1b529">operator--</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      --(*this);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   <span class="keyword">protected</span>:</div><div class="line"><a name="l01923"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a75e3f2657cdb7cc613bf922429983165"> 1923</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a75e3f2657cdb7cc613bf922429983165">iterator</a>(uint64_t index, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* <span class="keyword">self</span>) : index(index), self(self) {}</div><div class="line"><a name="l01925"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814"> 1925</a></span>&#160;    uint64_t <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a>;</div><div class="line"><a name="l01927"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5bac4439279428fb3c0d44aa6b1cc798"> 1927</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* <span class="keyword">self</span>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a10a48b1eb7dbae119faa38e62ec5b5b9"> 1929</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>;</div><div class="line"><a name="l01930"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#aa0828044326a83e6aa287a1cf03477ce"> 1930</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  };</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> Empty();</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> CreateFromRange(IterType first, IterType last);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> InsertMaybeReHash(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp; kv, <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a>* map);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> CopyFrom(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* from);</div><div class="line"><a name="l01961"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e"> 1961</a></span>&#160;  uint64_t <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>;</div><div class="line"><a name="l01963"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5"> 1963</a></span>&#160;  uint64_t <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="comment">// Reference class</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>&gt;</div><div class="line"><a name="l01966"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#ad052dfd6b3b90d3e5e20ebf5544d550b"> 1966</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Map.html">Map</a>;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;};</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html"> 1970</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>,</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                     <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">runtime::InplaceArrayBase</a>&lt;SmallMapNode, MapNode::KVType&gt; {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keyword">static</span> constexpr uint64_t kInitSize = 2;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="keyword">static</span> constexpr uint64_t kMaxSize = 4;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">MapNode::KVType</a>;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  ~<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a99bd2454e0afbfb9fdf2644f5f709783"> 1987</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a99bd2454e0afbfb9fdf2644f5f709783">count</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> find(key).index &lt; size_; }</div><div class="line"><a name="l01993"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a0593c84ceb05afb1a3f87045a3dc3a59"> 1993</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a0593c84ceb05afb1a3f87045a3dc3a59">at</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> itr = find(key);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    ICHECK(itr.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a> &lt; size_) &lt;&lt; <span class="stringliteral">&quot;IndexError: key is not in Map&quot;</span>;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">return</span> itr-&gt;second;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  }</div><div class="line"><a name="l02003"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a866679f23f724edc2d165f530f058b09"> 2003</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a866679f23f724edc2d165f530f058b09">at</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) {</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> itr = find(key);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    ICHECK(itr.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a> &lt; size_) &lt;&lt; <span class="stringliteral">&quot;IndexError: key is not in Map&quot;</span>;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">return</span> itr-&gt;second;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  }</div><div class="line"><a name="l02009"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a3e3295669feb01b40d022786c47c7981"> 2009</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a3e3295669feb01b40d022786c47c7981">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(0, <span class="keyword">this</span>); }</div><div class="line"><a name="l02011"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a9979171ea0db97d08bffb1bb328c7b96"> 2011</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a9979171ea0db97d08bffb1bb328c7b96">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(size_, <span class="keyword">this</span>); }</div><div class="line"><a name="l02017"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#aeb11bbd3d8a715fa95e4e4c213902061"> 2017</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#aeb11bbd3d8a715fa95e4e4c213902061">find</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* ptr = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(AddressOf(0));</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; size_; ++i, ++ptr) {</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">ObjectEqual</a>()(ptr-&gt;first, key)) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(i, <span class="keyword">this</span>);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(size_, <span class="keyword">this</span>);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  }</div><div class="line"><a name="l02030"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#aa8d46402a1b371bb9c711602942f1eab"> 2030</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#aa8d46402a1b371bb9c711602942f1eab">erase</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; position) { Erase(position.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a>); }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordtype">void</span> Erase(<span class="keyword">const</span> uint64_t index) {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">if</span> (index &gt;= size_) {</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* begin = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(AddressOf(0));</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* last = begin + (size_ - 1);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="keywordflow">if</span> (index + 1 == size_) {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      last-&gt;first.ObjectRef::~ObjectRef();</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      last-&gt;second.ObjectRef::~ObjectRef();</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      *(begin + index) = std::move(*last);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    }</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    size_ -= 1;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  }</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;SmallMapNode&gt;</a> Empty(uint64_t n = kInitSize) {</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="namespacetvm_1_1runtime.html#a0537c9d197068a02c26cd702ab42f6ff">using ::tvm::runtime::make_inplace_array_object</a>;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;SmallMapNode&gt;</a> p = make_inplace_array_object&lt;SmallMapNode, KVType&gt;(n);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    p-&gt;size_ = 0;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    p-&gt;slots_ = n;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;SmallMapNode&gt;</a> CreateFromRange(uint64_t n, IterType first, IterType last) {</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;SmallMapNode&gt;</a> p = Empty(n);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* ptr = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(p-&gt;AddressOf(0));</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="keywordflow">for</span> (; first != last; ++first, ++p-&gt;size_) {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <span class="keyword">new</span> (ptr++) <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(*first);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    }</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;SmallMapNode&gt;</a> CopyFrom(<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>* from) {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* first = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(from-&gt;<a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a2a0235e3e9b03abffc3839d14e1b7342">AddressOf</a>(0));</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* last = first + from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordflow">return</span> CreateFromRange(from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>, first, last);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  }</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> InsertMaybeReHash(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp; kv, <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a>* map) {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>* map_node = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>*<span class="keyword">&gt;</span>(map-&gt;<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html#a06d1de2ed3cfdde9f698155b14948fc7">get</a>());</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> itr = map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#aeb11bbd3d8a715fa95e4e4c213902061">find</a>(kv.first);</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keywordflow">if</span> (itr.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a> &lt; map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      itr-&gt;second = kv.second;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    }</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keywordflow">if</span> (map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a> &lt; map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>) {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* ptr = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a2a0235e3e9b03abffc3839d14e1b7342">AddressOf</a>(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>));</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keyword">new</span> (ptr) <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(kv);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      ++map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    }</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    uint64_t next_size = <a class="code" href="namespacetvm.html#a0df5ca82d2c566f628ebb2f1e84a3fcb">std::max</a>(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a> * 2, uint64_t(kInitSize));</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    next_size = <a class="code" href="namespacetvm.html#aac2abc149c1a47944c37b560181b15c0">std::min</a>(next_size, uint64_t(kMaxSize));</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    ICHECK_GT(next_size, map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> new_map = CreateFromRange(next_size, map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a3e3295669feb01b40d022786c47c7981">begin</a>(), map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html#a9979171ea0db97d08bffb1bb328c7b96">end</a>());</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    InsertMaybeReHash(kv, &amp;new_map);</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    *map = std::move(new_map);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  uint64_t IncItr(uint64_t index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> index + 1 &lt; size_ ? index + 1 : size_; }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  uint64_t DecItr(uint64_t index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> index &gt; 0 ? index - 1 : size_; }</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* DeRefItr(uint64_t index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(AddressOf(index)); }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  uint64_t GetSize()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size_; }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l02137"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#ab0425277cedf5598f463c24385a0e5a5"> 2137</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>;</div><div class="line"><a name="l02138"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#a10a48b1eb7dbae119faa38e62ec5b5b9"> 2138</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>;</div><div class="line"><a name="l02139"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1SmallMapNode.html#ac34d5957634812ed6f022af20a049c24"> 2139</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1InplaceArrayBase.html">runtime::InplaceArrayBase</a>&lt;<a class="code" href="classtvm_1_1runtime_1_1SmallMapNode.html">SmallMapNode</a>, <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>::<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&gt;;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;};</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html"> 2200</a></span>&#160;class <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a> {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> kBlockCap = 16;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">double</span> kMaxLoadFactor = 0.99;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keyword">static</span> constexpr uint8_t kEmptySlot = uint8_t(0b11111111);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keyword">static</span> constexpr uint8_t kProtectedSlot = uint8_t(0b11111110);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> kNumJumpDists = 126;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keyword">struct </span>ListNode;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="keyword">struct </span>Block {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    uint8_t bytes[kBlockCap + kBlockCap * <span class="keyword">sizeof</span>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>)];</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  };</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  static_assert(<span class="keyword">sizeof</span>(Block) == kBlockCap * (<span class="keyword">sizeof</span>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>) + 1), <span class="stringliteral">&quot;sizeof(Block) incorrect&quot;</span>);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  static_assert(std::is_standard_layout&lt;Block&gt;::value, <span class="stringliteral">&quot;Block is not standard layout&quot;</span>);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02227"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#ac3b9b13f9e074e20afe3bbd68cce35f3"> 2227</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#ac3b9b13f9e074e20afe3bbd68cce35f3">~DenseMapNode</a>() { this-&gt;Reset(); }</div><div class="line"><a name="l02229"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#ace1ea25bb95eb97d15788e83649db912"> 2229</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#ace1ea25bb95eb97d15788e83649db912">count</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !Search(key).IsNone(); }</div><div class="line"><a name="l02235"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a6071908cdeb00617d3b28a70d05ac649"> 2235</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a6071908cdeb00617d3b28a70d05ac649">at</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> At(key); }</div><div class="line"><a name="l02241"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a773d2e9099e34ab3bcf3b1870d0aee28"> 2241</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a773d2e9099e34ab3bcf3b1870d0aee28">at</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key) { <span class="keywordflow">return</span> At(key); }</div><div class="line"><a name="l02247"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a65deca60bf7d1b512b0f42b26dbdb882"> 2247</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a65deca60bf7d1b512b0f42b26dbdb882">find</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    ListNode node = Search(key);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">return</span> node.IsNone() ? end() : <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(node.index, <span class="keyword">this</span>);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  }</div><div class="line"><a name="l02255"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a2e0612bed81949dd88fd440a467aa8c0"> 2255</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a2e0612bed81949dd88fd440a467aa8c0">erase</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>&amp; position) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    uint64_t index = position.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">index</a>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">if</span> (position.<a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5bac4439279428fb3c0d44aa6b1cc798">self</a> != <span class="keyword">nullptr</span> &amp;&amp; index &lt;= this-&gt;slots_) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      Erase(ListNode(index, <span class="keyword">this</span>));</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    }</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  }</div><div class="line"><a name="l02262"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a182df92fc8085f81b68933da80782098"> 2262</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a182df92fc8085f81b68933da80782098">begin</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">if</span> (slots_ == 0) {</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(0, <span class="keyword">this</span>);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    }</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">for</span> (uint64_t index = 0; index &lt;= slots_; ++index) {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">if</span> (!ListNode(index, <span class="keyword">this</span>).IsEmpty()) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(index, <span class="keyword">this</span>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      }</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    }</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(slots_ + 1, <span class="keyword">this</span>);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  }</div><div class="line"><a name="l02274"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a467a2dacd260ee1e0fc5d233ba4b46d4"> 2274</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a467a2dacd260ee1e0fc5d233ba4b46d4">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> slots_ == 0 ? <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(0, <span class="keyword">this</span>) : <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">iterator</a>(slots_ + 1, <span class="keyword">this</span>); }</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  ListNode Search(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">if</span> (this-&gt;size_ == 0) {</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordflow">return</span> ListNode();</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    }</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">for</span> (ListNode iter = GetListHead(<a class="code" href="structtvm_1_1runtime_1_1ObjectHash.html">ObjectHash</a>()(key)); !iter.IsNone(); iter.MoveToNext(<span class="keyword">this</span>)) {</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">ObjectEqual</a>()(key, iter.Key())) {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        <span class="keywordflow">return</span> iter;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">return</span> ListNode();</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; At(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    ListNode iter = Search(key);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    ICHECK(!iter.IsNone()) &lt;&lt; <span class="stringliteral">&quot;IndexError: key is not in Map&quot;</span>;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">return</span> iter.Val();</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="keywordtype">bool</span> TryInsert(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key, ListNode* result) {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">if</span> (slots_ == 0) {</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    }</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="comment">// required that `iter` to be the head of a linked list through which we can iterator</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    ListNode iter = IndexFromHash(<a class="code" href="structtvm_1_1runtime_1_1ObjectHash.html">ObjectHash</a>()(key));</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="comment">// `iter` can be: 1) empty; 2) body of an irrelevant list; 3) head of the relevant list</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="comment">// Case 1: empty</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">if</span> (iter.IsEmpty()) {</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      iter.NewHead(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(key, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(<span class="keyword">nullptr</span>)));</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      this-&gt;size_ += 1;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      *result = iter;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    }</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">// Case 2: body of an irrelevant list</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">if</span> (!iter.IsHead()) {</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="comment">// we move the elements around and construct the single-element linked list</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="keywordflow">return</span> IsFull() ? false : TrySpareListHead(iter, key, result);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="comment">// Case 3: head of the relevant list</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="comment">// we iterate through the linked list until the end</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment">// make sure `iter` is the previous element of `next`</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    ListNode next = iter;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="comment">// find equal item, do not insert</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">ObjectEqual</a>()(key, next.Key())) {</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        *result = next;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      }</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="comment">// make sure `iter` is the previous element of `next`</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      iter = next;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    } <span class="keywordflow">while</span> (next.MoveToNext(<span class="keyword">this</span>));</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="comment">// `iter` is the tail of the linked list</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="comment">// always check capacity before insertion</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">if</span> (IsFull()) {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    }</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="comment">// find the next empty slot</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    uint8_t jump;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">if</span> (!iter.GetNextEmpty(<span class="keyword">this</span>, &amp;jump, result)) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    }</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    result-&gt;NewTail(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(key, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(<span class="keyword">nullptr</span>)));</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="comment">// link `iter` to `empty`, and move forward</span></div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    iter.SetJump(jump);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    this-&gt;size_ += 1;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <span class="keywordtype">bool</span> TrySpareListHead(ListNode target, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key, ListNode* result) {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="comment">// `target` is not the head of the linked list</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="comment">// move the original item of `target` (if any)</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="comment">// and construct new item on the position `target`</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="comment">// To make `target` empty, we</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="comment">// 1) find `w` the previous element of `target` in the linked list</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="comment">// 2) copy the linked list starting from `r = target`</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="comment">// 3) paste them after `w`</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">// read from the linked list after `r`</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    ListNode r = target;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="comment">// write to the tail of `w`</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    ListNode w = target.FindPrev(<span class="keyword">this</span>);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="comment">// after `target` is moved, we disallow writing to the slot</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordtype">bool</span> is_first = <span class="keyword">true</span>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    uint8_t r_meta, jump;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    ListNode empty;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="comment">// `jump` describes how `w` is jumped to `empty`</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <span class="comment">// rehash if there is no empty space after `w`</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="keywordflow">if</span> (!w.GetNextEmpty(<span class="keyword">this</span>, &amp;jump, &amp;empty)) {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      }</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <span class="comment">// move `r` to `empty`</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      empty.NewTail(std::move(r.Data()));</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="comment">// clear the metadata of `r`</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      r_meta = r.Meta();</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="keywordflow">if</span> (is_first) {</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        is_first = <span class="keyword">false</span>;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        r.SetProtected();</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        r.SetEmpty();</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      }</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="comment">// link `w` to `empty`, and move forward</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      w.SetJump(jump);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      w = empty;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="comment">// move `r` forward as well</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    } <span class="keywordflow">while</span> (r.MoveToNext(<span class="keyword">this</span>, r_meta));</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="comment">// finally we have done moving the linked list</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="comment">// fill data_ into `target`</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    target.NewHead(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(key, <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(<span class="keyword">nullptr</span>)));</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    this-&gt;size_ += 1;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    *result = target;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordtype">void</span> Erase(<span class="keyword">const</span> ListNode&amp; iter) {</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    this-&gt;size_ -= 1;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordflow">if</span> (!iter.HasNext()) {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <span class="comment">// `iter` is the last</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">if</span> (!iter.IsHead()) {</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="comment">// cut the link if there is any</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        iter.FindPrev(<span class="keyword">this</span>).SetJump(0);</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      }</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      iter.Data().KVType::~KVType();</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      iter.SetEmpty();</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      ListNode last = iter, prev = iter;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keywordflow">for</span> (last.MoveToNext(<span class="keyword">this</span>); last.HasNext(); prev = last, last.MoveToNext(<span class="keyword">this</span>)) {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      iter.Data() = std::move(last.Data());</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      last.SetEmpty();</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      prev.SetJump(0);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    }</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  }</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="keywordtype">void</span> Reset() {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    uint64_t n_blocks = CalcNumBlocks(this-&gt;slots_);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keywordflow">for</span> (uint64_t bi = 0; bi &lt; n_blocks; ++bi) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      uint8_t* meta_ptr = data_[bi].bytes;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* data_ptr = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(data_[bi].bytes + kBlockCap);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; kBlockCap; ++j, ++meta_ptr, ++data_ptr) {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        uint8_t&amp; meta = *meta_ptr;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="keywordflow">if</span> (meta != uint8_t(kProtectedSlot) &amp;&amp; meta != uint8_t(kEmptySlot)) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;          meta = uint8_t(kEmptySlot);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;          data_ptr-&gt;KVType::~KVType();</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        }</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    }</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    ReleaseMemory();</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  }</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="keywordtype">void</span> ReleaseMemory() {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keyword">delete</span>[] data_;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    data_ = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    slots_ = 0;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    size_ = 0;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    fib_shift_ = 63;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  }</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;DenseMapNode&gt;</a> Empty(uint32_t fib_shift, uint64_t n_slots) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    ICHECK_GT(n_slots, uint64_t(SmallMapNode::kMaxSize));</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;DenseMapNode&gt;</a> p = make_object&lt;DenseMapNode&gt;();</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    uint64_t n_blocks = CalcNumBlocks(n_slots - 1);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    Block* block = p-&gt;data_ = <span class="keyword">new</span> Block[n_blocks];</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    p-&gt;slots_ = n_slots - 1;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    p-&gt;size_ = 0;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    p-&gt;fib_shift_ = fib_shift;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; n_blocks; ++i, ++block) {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      std::fill(block-&gt;bytes, block-&gt;bytes + kBlockCap, uint8_t(kEmptySlot));</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    }</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  }</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="keyword">static</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;DenseMapNode&gt;</a> CopyFrom(<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* from) {</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;DenseMapNode&gt;</a> p = make_object&lt;DenseMapNode&gt;();</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    uint64_t n_blocks = CalcNumBlocks(from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    p-&gt;data_ = <span class="keyword">new</span> Block[n_blocks];</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    p-&gt;slots_ = from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    p-&gt;size_ = from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a>;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    p-&gt;fib_shift_ = from-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#af7555a75a5dbdf2f1c1af3fd240e54e7">fib_shift_</a>;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">for</span> (uint64_t bi = 0; bi &lt; n_blocks; ++bi) {</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      uint8_t* meta_ptr_from = from-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">data_</a>[bi].bytes;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* data_ptr_from = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(from-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">data_</a>[bi].bytes + kBlockCap);</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      uint8_t* meta_ptr_to = p-&gt;data_[bi].bytes;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* data_ptr_to = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(p-&gt;data_[bi].bytes + kBlockCap);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; kBlockCap;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;           ++j, ++meta_ptr_from, ++data_ptr_from, ++meta_ptr_to, ++data_ptr_to) {</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        uint8_t&amp; meta = *meta_ptr_to = *meta_ptr_from;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        ICHECK(meta != kProtectedSlot);</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="keywordflow">if</span> (meta != uint8_t(kEmptySlot)) {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;          <span class="keyword">new</span> (data_ptr_to) <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(*data_ptr_from);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        }</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      }</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    }</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  }</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> InsertMaybeReHash(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp; kv, <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a>* map) {</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* map_node = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>*<span class="keyword">&gt;</span>(map-&gt;<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html#a06d1de2ed3cfdde9f698155b14948fc7">get</a>());</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    ListNode iter;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="comment">// Try to insert. If succeed, we simply return</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">if</span> (map_node-&gt;TryInsert(kv.first, &amp;iter)) {</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      iter.Val() = kv.second;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    }</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    ICHECK_GT(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>, uint64_t(SmallMapNode::kMaxSize));</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">// Otherwise, start rehash</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> p = Empty(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#af7555a75a5dbdf2f1c1af3fd240e54e7">fib_shift_</a> - 1, map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a> * 2 + 2);</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <span class="comment">// Insert the given `kv` into the new hash map</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    InsertMaybeReHash(kv, &amp;p);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    uint64_t n_blocks = CalcNumBlocks(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">// Then Insert data from the original block.</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">for</span> (uint64_t bi = 0; bi &lt; n_blocks; ++bi) {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      uint8_t* meta_ptr = map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">data_</a>[bi].bytes;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* data_ptr = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(map_node-&gt;<a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">data_</a>[bi].bytes + kBlockCap);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; kBlockCap; ++j, ++meta_ptr, ++data_ptr) {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        uint8_t&amp; meta = *meta_ptr;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <span class="keywordflow">if</span> (meta != uint8_t(kProtectedSlot) &amp;&amp; meta != uint8_t(kEmptySlot)) {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;          meta = uint8_t(kEmptySlot);</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;          <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a> kv = std::move(*data_ptr);</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;          InsertMaybeReHash(kv, &amp;p);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    }</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    map_node-&gt;ReleaseMemory();</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    *map = p;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  }</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keywordtype">bool</span> IsFull()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size_ + 1 &gt; (slots_ + 1) * kMaxLoadFactor; }</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  uint64_t IncItr(uint64_t index)<span class="keyword"> const </span>{</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keywordflow">for</span> (++index; index &lt;= slots_; ++index) {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="keywordflow">if</span> (!ListNode(index, <span class="keyword">this</span>).IsEmpty()) {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">return</span> index;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      }</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="keywordflow">return</span> slots_ + 1;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  }</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  uint64_t DecItr(uint64_t index)<span class="keyword"> const </span>{</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <span class="keywordflow">while</span> (index != 0) {</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      index -= 1;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <span class="keywordflow">if</span> (!ListNode(index, <span class="keyword">this</span>).IsEmpty()) {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="keywordflow">return</span> index;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      }</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">return</span> slots_ + 1;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  }</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>* DeRefItr(uint64_t index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;ListNode(index, <span class="keyword">this</span>).Data(); }</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  ListNode IndexFromHash(uint64_t hash_value)<span class="keyword"> const </span>{</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">return</span> ListNode(FibHash(hash_value, fib_shift_), <span class="keyword">this</span>);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  }</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  ListNode GetListHead(uint64_t hash_value)<span class="keyword"> const </span>{</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    ListNode node = IndexFromHash(hash_value);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="keywordflow">return</span> node.IsHead() ? node : ListNode();</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keyword">static</span> uint64_t CalcNumBlocks(uint64_t n_slots_m1) {</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    uint64_t n_slots = n_slots_m1 &gt; 0 ? n_slots_m1 + 1 : 0;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="keywordflow">return</span> (n_slots + kBlockCap - 1) / kBlockCap;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  }</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> CalcTableSize(uint64_t cap, uint32_t* fib_shift, uint64_t* n_slots) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    uint32_t shift = 64;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    uint64_t slots = 1;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">for</span> (uint64_t c = cap; c; c &gt;&gt;= 1) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      shift -= 1;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      slots &lt;&lt;= 1;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    ICHECK_GT(slots, cap);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> (slots &lt; cap * 2) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      *fib_shift = shift - 1;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      *n_slots = slots &lt;&lt; 1;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      *fib_shift = shift;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      *n_slots = slots;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    }</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keyword">static</span> uint64_t FibHash(uint64_t hash_value, uint32_t fib_shift) {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    constexpr uint64_t coeff = 11400714819323198485ull;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordflow">return</span> (coeff * hash_value) &gt;&gt; fib_shift;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  }</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="keyword">struct </span>ListNode {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    ListNode() : index(0), block(<span class="keyword">nullptr</span>) {}</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    ListNode(uint64_t index, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* <span class="keyword">self</span>)</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        : index(index), block(self-&gt;data_ + (index / kBlockCap)) {}</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    uint8_t&amp; Meta()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *(block-&gt;bytes + index % kBlockCap); }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp; Data()<span class="keyword"> const </span>{</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <span class="keywordflow">return</span> *(<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>*<span class="keyword">&gt;</span>(block-&gt;bytes + kBlockCap +</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                                         (index % kBlockCap) * <span class="keyword">sizeof</span>(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>)));</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; Key()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Data().first; }</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">mapped_type</a>&amp; Val()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Data().second; }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordtype">bool</span> IsHead()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (Meta() &amp; 0b10000000) == 0b00000000; }</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    <span class="keywordtype">bool</span> IsNone()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> block == <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="keywordtype">bool</span> IsEmpty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Meta() == uint8_t(kEmptySlot); }</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <span class="keywordtype">bool</span> IsProtected()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Meta() == uint8_t(kProtectedSlot); }</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="keywordtype">void</span> SetEmpty()<span class="keyword"> const </span>{ Meta() = uint8_t(kEmptySlot); }</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordtype">void</span> SetProtected()<span class="keyword"> const </span>{ Meta() = uint8_t(kProtectedSlot); }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <span class="keywordtype">void</span> SetJump(uint8_t jump)<span class="keyword"> const </span>{ (Meta() &amp;= 0b10000000) |= jump; }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <span class="keywordtype">void</span> NewHead(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a> v)<span class="keyword"> const </span>{</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      Meta() = 0b00000000;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      <span class="keyword">new</span> (&amp;Data()) <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(std::move(v));</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    }</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="keywordtype">void</span> NewTail(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a> v)<span class="keyword"> const </span>{</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      Meta() = 0b10000000;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      <span class="keyword">new</span> (&amp;Data()) <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>(std::move(v));</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    }</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordtype">bool</span> HasNext()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> kNextProbeLocation[Meta() &amp; 0b01111111] != 0; }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordtype">bool</span> MoveToNext(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* <span class="keyword">self</span>, uint8_t meta) {</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      uint64_t offset = kNextProbeLocation[meta &amp; 0b01111111];</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">if</span> (offset == 0) {</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        index = 0;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        block = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      }</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      index = (index + offset) &amp; (self-&gt;slots_);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      block = <span class="keyword">self</span>-&gt;data_ + (index / kBlockCap);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    }</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="keywordtype">bool</span> MoveToNext(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* <span class="keyword">self</span>) { <span class="keywordflow">return</span> MoveToNext(<span class="keyword">self</span>, Meta()); }</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    ListNode FindPrev(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* <span class="keyword">self</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <span class="comment">// start from the head of the linked list, which must exist</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      ListNode next = <span class="keyword">self</span>-&gt;IndexFromHash(<a class="code" href="structtvm_1_1runtime_1_1ObjectHash.html">ObjectHash</a>()(Key()));</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="comment">// `prev` is always the previous item of `next`</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      ListNode prev = next;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <span class="keywordflow">for</span> (next.MoveToNext(<span class="keyword">self</span>); index != next.index; prev = next, next.MoveToNext(<span class="keyword">self</span>)) {</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      }</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      <span class="keywordflow">return</span> prev;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keywordtype">bool</span> GetNextEmpty(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html">DenseMapNode</a>* <span class="keyword">self</span>, uint8_t* jump, ListNode* result)<span class="keyword"> const </span>{</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <span class="keywordflow">for</span> (uint8_t idx = 1; idx &lt; kNumJumpDists; ++idx) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        ListNode candidate((index + kNextProbeLocation[idx]) &amp; (self-&gt;slots_), <span class="keyword">self</span>);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">if</span> (candidate.IsEmpty()) {</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;          *jump = idx;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;          *result = candidate;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        }</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      }</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    }</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    uint64_t index;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    Block* block;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  };</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l02715"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#af7555a75a5dbdf2f1c1af3fd240e54e7"> 2715</a></span>&#160;  uint32_t <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#af7555a75a5dbdf2f1c1af3fd240e54e7">fib_shift_</a>;</div><div class="line"><a name="l02717"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc"> 2717</a></span>&#160;  Block* <a class="code" href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">data_</a>;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  <span class="comment">/* clang-format off */</span></div><div class="line"><a name="l02720"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#ab5bf2de594d1445caba3beff09317d0b"> 2720</a></span>&#160;  TVM_DLL <span class="keyword">static</span> constexpr uint64_t kNextProbeLocation[kNumJumpDists] {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="comment">// Quadratic probing with triangle numbers. See also:</span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">// 1) https://en.wikipedia.org/wiki/Quadratic_probing</span></div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="comment">// 2) https://fgiesen.wordpress.com/2015/02/22/triangular-numbers-mod-2n/</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="comment">// 3) https://github.com/skarupke/flat_hash_map</span></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    21, 28, 36, 45, 55, 66, 78, 91, 105, 120,</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    136, 153, 171, 190, 210, 231, 253, 276, 300, 325,</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    351, 378, 406, 435, 465, 496, 528, 561, 595, 630,</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    666, 703, 741, 780, 820, 861, 903, 946, 990, 1035,</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    1081, 1128, 1176, 1225, 1275, 1326, 1378, 1431, 1485, 1540,</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    1596, 1653, 1711, 1770, 1830, 1891, 1953, 2016, 2080, 2145,</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    2211, 2278, 2346, 2415, 2485, 2556, 2628,</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="comment">// larger triangle numbers</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    8515, 19110, 42778, 96141, 216153,</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    486591, 1092981, 2458653, 5532801, 12442566,</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    27993903, 62983476, 141717030, 318844378, 717352503,</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    1614057336, 3631522476, 8170957530, 18384510628, 41364789378,</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    93070452520, 209408356380, 471168559170, 1060128894105, 2385289465695,</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    5366898840628, 12075518705635, 27169915244790, 61132312065111, 137547689707000,</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    309482283181501, 696335127828753, 1566753995631385, 3525196511162271, 7931691992677701,</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    17846306936293605, 40154190677507445, 90346928918121501, 203280589587557251, 457381325854679626,</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    1029107982097042876, 2315492959180353330, 5209859154120846435,</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  };</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="comment">/* clang-format on */</span></div><div class="line"><a name="l02745"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1DenseMapNode.html#ab0425277cedf5598f463c24385a0e5a5"> 2745</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;};</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;</div><div class="line"><a name="l02748"></a><span class="lineno"><a class="line" href="container_8h.html#a1d45968795b6054f63824cb9c5512d5a"> 2748</a></span>&#160;<span class="preprocessor">#define TVM_DISPATCH_MAP(base, var, body)     \</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="preprocessor">  {                                           \</span></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="preprocessor">    using TSmall = SmallMapNode*;             \</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="preprocessor">    using TDense = DenseMapNode*;             \</span></div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="preprocessor">    uint64_t slots = base-&gt;slots_;            \</span></div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="preprocessor">    if (slots &lt;= SmallMapNode::kMaxSize) {    \</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="preprocessor">      TSmall var = static_cast&lt;TSmall&gt;(base); \</span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="preprocessor">      body;                                   \</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="preprocessor">    } else {                                  \</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="preprocessor">      TDense var = static_cast&lt;TDense&gt;(base); \</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="preprocessor">      body;                                   \</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="preprocessor">    }                                         \</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div><div class="line"><a name="l02762"></a><span class="lineno"><a class="line" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e"> 2762</a></span>&#160;<span class="preprocessor">#define TVM_DISPATCH_MAP_CONST(base, var, body) \</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="preprocessor">  {                                             \</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="preprocessor">    using TSmall = const SmallMapNode*;         \</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="preprocessor">    using TDense = const DenseMapNode*;         \</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="preprocessor">    uint64_t slots = base-&gt;slots_;              \</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="preprocessor">    if (slots &lt;= SmallMapNode::kMaxSize) {      \</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="preprocessor">      TSmall var = static_cast&lt;TSmall&gt;(base);   \</span></div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="preprocessor">      body;                                     \</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;<span class="preprocessor">    } else {                                    \</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="preprocessor">      TDense var = static_cast&lt;TDense&gt;(base);   \</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="preprocessor">      body;                                     \</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="preprocessor">    }                                           \</span></div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#adf85d43ef116b85c8aa2a25599bc5584"> 2776</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a0c38eac8fa87129d754972cd305a6a89">MapNode::iterator::pointer</a> MapNode::iterator::operator-&gt;()<span class="keyword"> const </span>{</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">self</span>, p, { <span class="keywordflow">return</span> p-&gt;DeRefItr(index); });</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;}</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div><div class="line"><a name="l02780"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#aa080c358ffab71cff472538a435eb615"> 2780</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>&amp; MapNode::iterator::operator++() {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">self</span>, p, {</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    index = p-&gt;IncItr(index);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  });</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;}</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a08393c19a1c8b1c4057a33832cd48662"> 2787</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>&amp; MapNode::iterator::operator--() {</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">self</span>, p, {</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    index = p-&gt;DecItr(index);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  });</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;}</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a670b7adb420248489fd57a9458ced561"> 2794</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">size_t</span> MapNode::count(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;count(key); });</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;}</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a49edd4ddc34a4e0b097c34560b9b3b4e"> 2798</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">MapNode::mapped_type</a>&amp; MapNode::at(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">MapNode::key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;at(key); });</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;}</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div><div class="line"><a name="l02802"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a29503ec61af7a5bb9b030a00cfdff01a"> 2802</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">MapNode::mapped_type</a>&amp; MapNode::at(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">MapNode::key_type</a>&amp; key) {</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <a class="code" href="container_8h.html#a1d45968795b6054f63824cb9c5512d5a">TVM_DISPATCH_MAP</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;at(key); });</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;}</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#ad1ae0eaa6dfdc48d5f037ee51a867fe7"> 2806</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a> MapNode::begin()<span class="keyword"> const </span>{</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;begin(); });</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;}</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div><div class="line"><a name="l02810"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a8c31c029a28ca7f5ab0ceb3fcf7ded89"> 2810</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a> MapNode::end()<span class="keyword"> const </span>{</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;end(); });</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a9733900c9d9d1af5687b7ba32ef7f5e9"> 2814</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a> MapNode::find(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">MapNode::key_type</a>&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <a class="code" href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;find(key); });</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;}</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div><div class="line"><a name="l02818"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#afac316cac6b4fc06d81c66df46482ba6"> 2818</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> MapNode::erase(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>&amp; position) {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="container_8h.html#a1d45968795b6054f63824cb9c5512d5a">TVM_DISPATCH_MAP</a>(<span class="keyword">this</span>, p, { <span class="keywordflow">return</span> p-&gt;erase(position); });</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;}</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="preprocessor">#undef TVM_DISPATCH_MAP</span></div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="preprocessor">#undef TVM_DISPATCH_MAP_CONST</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div><div class="line"><a name="l02825"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#ad486baa9df3b8061218bbad6cea53df9"> 2825</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> MapNode::Empty() { <span class="keywordflow">return</span> SmallMapNode::Empty(); }</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div><div class="line"><a name="l02827"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a2d2eef30b22325a3535a25a1f9728f63"> 2827</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> MapNode::CopyFrom(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* from) {</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="keywordflow">if</span> (from-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a> &lt;= SmallMapNode::kMaxSize) {</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="keywordflow">return</span> SmallMapNode::CopyFrom(static_cast&lt;SmallMapNode*&gt;(from));</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">return</span> DenseMapNode::CopyFrom(static_cast&lt;DenseMapNode*&gt;(from));</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  }</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;}</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l02836"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a6b54c7503c17ee3bb7eadcd1ac0ed009"> 2836</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> MapNode::CreateFromRange(IterType first, IterType last) {</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  int64_t _cap = std::distance(first, last);</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="keywordflow">if</span> (_cap &lt; 0) {</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <span class="keywordflow">return</span> SmallMapNode::Empty();</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  }</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  uint64_t cap = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(_cap);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordflow">if</span> (cap &lt; SmallMapNode::kMaxSize) {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="keywordflow">return</span> SmallMapNode::CreateFromRange(cap, first, last);</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  }</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  uint32_t fib_shift;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  uint64_t n_slots;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  DenseMapNode::CalcTableSize(cap, &amp;fib_shift, &amp;n_slots);</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> obj = DenseMapNode::Empty(fib_shift, n_slots);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <span class="keywordflow">for</span> (; first != last; ++first) {</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a> kv(*first);</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    DenseMapNode::InsertMaybeReHash(kv, &amp;obj);</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="keywordflow">return</span> obj;</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;}</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1MapNode.html#a6c6d3b97ee1bb90279026329eb3a9756"> 2856</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> MapNode::InsertMaybeReHash(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">KVType</a>&amp; kv, <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a>* map) {</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  constexpr uint64_t kSmallMapMaxSize = SmallMapNode::kMaxSize;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* base = <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>*<span class="keyword">&gt;</span>(map-&gt;<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html#a06d1de2ed3cfdde9f698155b14948fc7">get</a>());</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="keywordflow">if</span> (base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a> &lt; kSmallMapMaxSize) {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    SmallMapNode::InsertMaybeReHash(kv, map);</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a> == kSmallMapMaxSize) {</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="keywordflow">if</span> (base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">size_</a> &lt; base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">slots_</a>) {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      SmallMapNode::InsertMaybeReHash(kv, map);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> new_map = MapNode::CreateFromRange(base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#ad1ae0eaa6dfdc48d5f037ee51a867fe7">begin</a>(), base-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a8c31c029a28ca7f5ab0ceb3fcf7ded89">end</a>());</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      DenseMapNode::InsertMaybeReHash(kv, &amp;new_map);</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      *map = std::move(new_map);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    DenseMapNode::InsertMaybeReHash(kv, map);</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  }</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;}</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;MapNode&gt;</a> make_object&lt;&gt;() = <span class="keyword">delete</span>;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> V,</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, K&gt;::value&gt;::type,</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, V&gt;::value&gt;::type&gt;</div><div class="line"><a name="l02891"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html"> 2891</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Map.html">Map</a> : <span class="keyword">public</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a> {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l02893"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a4375820aee7e1c0581c3b0ab3fb383fb"> 2893</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1tir_1_1IterVar.html">key_type</a> = K;</div><div class="line"><a name="l02894"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a80593f9746b11a51bf0e69033877aab8"> 2894</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1te_1_1IterVarAttr.html">mapped_type</a> = V;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  <span class="keyword">class </span>iterator;</div><div class="line"><a name="l02899"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ab37f503bb71aa9f8399d3d92fed4a0d3"> 2899</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#ab37f503bb71aa9f8399d3d92fed4a0d3">Map</a>() { data_ = MapNode::Empty(); }</div><div class="line"><a name="l02904"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a932f36903b04ecbe0568d76890549680"> 2904</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#a932f36903b04ecbe0568d76890549680">Map</a>(<a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp;&amp; other) { data_ = std::move(other.data_); }</div><div class="line"><a name="l02909"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ae9ecf711c97150ca34732459b3b2f125"> 2909</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#ae9ecf711c97150ca34732459b3b2f125">Map</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp; other) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(other.data_) {}</div><div class="line"><a name="l02915"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ac62909410a98a078ff01f688cdf70ffe"> 2915</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Map.html#ac62909410a98a078ff01f688cdf70ffe">operator=</a>(<a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp;&amp; other) {</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    data_ = std::move(other.data_);</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  }</div><div class="line"><a name="l02924"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a6b398835e5160e792634c8ee0783f284"> 2924</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Map.html#a6b398835e5160e792634c8ee0783f284">operator=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp; other) {</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    data_ = other.<a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html#ac261cdb80487fb29ac42b28678f8cbef">data_</a>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  }</div><div class="line"><a name="l02932"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a5389bd1ee67baed336ae520a230002e9"> 2932</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#a5389bd1ee67baed336ae520a230002e9">Map</a>(<a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">ObjectPtr&lt;Object&gt;</a> n) : <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">ObjectRef</a>(n) {}</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterType&gt;</div><div class="line"><a name="l02940"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a892484a52bf9ba0c48512154ba63a2bf"> 2940</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#a892484a52bf9ba0c48512154ba63a2bf">Map</a>(IterType begin, IterType end) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    data_ = MapNode::CreateFromRange(begin, end);</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  }</div><div class="line"><a name="l02947"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a9306ec8e65e9a6fb9bce97b34edf2e86"> 2947</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#a9306ec8e65e9a6fb9bce97b34edf2e86">Map</a>(std::initializer_list&lt;std::pair&lt;K, V&gt;&gt; init) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    data_ = MapNode::CreateFromRange(init.begin(), init.end());</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  }</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Hash, <span class="keyword">typename</span> Equal&gt;</div><div class="line"><a name="l02955"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ac40191ef3c2de0c546b48102fa43cd88"> 2955</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1Map.html#ac40191ef3c2de0c546b48102fa43cd88">Map</a>(<span class="keyword">const</span> std::unordered_map&lt;K, V, Hash, Equal&gt;&amp; init) {  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    data_ = MapNode::CreateFromRange(init.begin(), init.end());</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  }</div><div class="line"><a name="l02963"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a7fbfe0e01b0fa54e151bd481956dcfec"> 2963</a></span>&#160;  <span class="keyword">const</span> V <a class="code" href="classtvm_1_1runtime_1_1Map.html#a7fbfe0e01b0fa54e151bd481956dcfec">at</a>(<span class="keyword">const</span> K&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> DowncastNoCheck&lt;V&gt;(GetMapNode()-&gt;at(key)); }</div><div class="line"><a name="l02969"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a865a58097e473b532b1373bd15a1e91f"> 2969</a></span>&#160;  <span class="keyword">const</span> V <a class="code" href="classtvm_1_1runtime_1_1Map.html#a865a58097e473b532b1373bd15a1e91f">operator[]</a>(<span class="keyword">const</span> K&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;at(key); }</div><div class="line"><a name="l02971"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a26079aec4fc32333eb492a8c4a2ca849"> 2971</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#a26079aec4fc32333eb492a8c4a2ca849">size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* n = GetMapNode();</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">return</span> n == <span class="keyword">nullptr</span> ? 0 : n-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a5c0c770f7667f911aa8bec879e3ac214">size</a>();</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  }</div><div class="line"><a name="l02976"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#aa713b1b421fda78159a0a66740943c6c"> 2976</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#aa713b1b421fda78159a0a66740943c6c">count</a>(<span class="keyword">const</span> K&amp; key)<span class="keyword"> const </span>{</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* n = GetMapNode();</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <span class="keywordflow">return</span> n == <span class="keyword">nullptr</span> ? 0 : GetMapNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a670b7adb420248489fd57a9458ced561">count</a>(key);</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  }</div><div class="line"><a name="l02981"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#afc8d39f3c9e33bca6083253f7288d900"> 2981</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#afc8d39f3c9e33bca6083253f7288d900">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size() == 0; }</div><div class="line"><a name="l02983"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a093955a395c75f89c5a7f8a71b13250a"> 2983</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#a093955a395c75f89c5a7f8a71b13250a">clear</a>() {</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* n = GetMapNode();</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="keywordflow">if</span> (n != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      data_ = MapNode::Empty();</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    }</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  }</div><div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ad3a78d88e3a9292d11ce04ff2dfe0702"> 2994</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#ad3a78d88e3a9292d11ce04ff2dfe0702">Set</a>(<span class="keyword">const</span> K&amp; key, <span class="keyword">const</span> V&amp; value) {</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    CopyOnWrite();</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    MapNode::InsertMaybeReHash(<a class="code" href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">MapNode::KVType</a>(key, value), &amp;data_);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  }</div><div class="line"><a name="l02999"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#ab2e291c9d0a9ad6f3eeae63df135a090"> 2999</a></span>&#160;  iterator <a class="code" href="classtvm_1_1runtime_1_1Map.html#ab2e291c9d0a9ad6f3eeae63df135a090">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> iterator(GetMapNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1Map.html#ab2e291c9d0a9ad6f3eeae63df135a090">begin</a>()); }</div><div class="line"><a name="l03001"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a60c1dac32729c4bf8351972da11793e4"> 3001</a></span>&#160;  iterator <a class="code" href="classtvm_1_1runtime_1_1Map.html#a60c1dac32729c4bf8351972da11793e4">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> iterator(GetMapNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1Map.html#a60c1dac32729c4bf8351972da11793e4">end</a>()); }</div><div class="line"><a name="l03003"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#abce8c6206f11edfd3c493b843d52685f"> 3003</a></span>&#160;  iterator <a class="code" href="classtvm_1_1runtime_1_1Map.html#abce8c6206f11edfd3c493b843d52685f">find</a>(<span class="keyword">const</span> K&amp; key)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> iterator(GetMapNode()-&gt;<a class="code" href="classtvm_1_1runtime_1_1Map.html#abce8c6206f11edfd3c493b843d52685f">find</a>(key)); }</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a67431af5ae08050343eaf70629e5e310"> 3005</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html#a67431af5ae08050343eaf70629e5e310">erase</a>(<span class="keyword">const</span> K&amp; key) { CopyOnWrite()-&gt;erase(key); }</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03015"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#a156c1e32c6e7a8a39e43091166563170"> 3015</a></span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* <a class="code" href="classtvm_1_1runtime_1_1Map.html#a156c1e32c6e7a8a39e43091166563170">CopyOnWrite</a>() {</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="keywordflow">if</span> (data_.get() == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      data_ = MapNode::Empty();</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!data_.unique()) {</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      data_ = MapNode::CopyFrom(GetMapNode());</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    }</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="keywordflow">return</span> GetMapNode();</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  }</div><div class="line"><a name="l03024"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map.html#aba81b4b8973bf5912d98c6c545571f65"> 3024</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">ContainerType</a> = <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03027"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html"> 3027</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a> {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;   <span class="keyword">public</span>:</div><div class="line"><a name="l03029"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a0d4e97d796619afb8d02cab10451edf5"> 3029</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a0d4e97d796619afb8d02cab10451edf5">iterator_category</a> = std::bidirectional_iterator_tag;</div><div class="line"><a name="l03030"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#abc9b8a0b8afac7b49c204c3e33f6b3be"> 3030</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#abc9b8a0b8afac7b49c204c3e33f6b3be">difference_type</a> = int64_t;</div><div class="line"><a name="l03031"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a6e1fd44c0112f97adb7db4090c224707"> 3031</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a6e1fd44c0112f97adb7db4090c224707">value_type</a> = <span class="keyword">const</span> std::pair&lt;K, V&gt;;</div><div class="line"><a name="l03032"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a569d224e69ea0f65717e6dcb0dd53e5b"> 3032</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a569d224e69ea0f65717e6dcb0dd53e5b">pointer</a> = <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a6e1fd44c0112f97adb7db4090c224707">value_type</a>*;</div><div class="line"><a name="l03033"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ae7e2ecfde14f41cfbe28a2c845a023b7"> 3033</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ae7e2ecfde14f41cfbe28a2c845a023b7">reference</a> = <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a6e1fd44c0112f97adb7db4090c224707">value_type</a>;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;</div><div class="line"><a name="l03035"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ad8b40ddeffccb6f221601eda70202f9a"> 3035</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ad8b40ddeffccb6f221601eda70202f9a">iterator</a>() : itr() {}</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;</div><div class="line"><a name="l03038"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ade3c126684dcdc6ed432f3bb7eb62099"> 3038</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ade3c126684dcdc6ed432f3bb7eb62099">operator==</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a>&amp; other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> itr == other.itr; }</div><div class="line"><a name="l03040"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a540d6f4cb2b8a4430049fad7d24db3d1"> 3040</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a540d6f4cb2b8a4430049fad7d24db3d1">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a>&amp; other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> itr != other.itr; }</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a569d224e69ea0f65717e6dcb0dd53e5b">pointer</a> operator-&gt;() <span class="keyword">const</span> = <span class="keyword">delete</span>;</div><div class="line"><a name="l03044"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a788c24447dd50bef05bf8cdc7c7f2f66"> 3044</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ae7e2ecfde14f41cfbe28a2c845a023b7">reference</a> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a788c24447dd50bef05bf8cdc7c7f2f66">operator*</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      <span class="keyword">auto</span>&amp; kv = *itr;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      <span class="keywordflow">return</span> std::make_pair(DowncastNoCheck&lt;K&gt;(kv.first), DowncastNoCheck&lt;V&gt;(kv.second));</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    }</div><div class="line"><a name="l03049"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a8052ae36e24a4973c1a123c99cf5152c"> 3049</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a>&amp; <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a8052ae36e24a4973c1a123c99cf5152c">operator++</a>() {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      ++itr;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    }</div><div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ac1e67f17ae0b5d4c72670908469fff50"> 3054</a></span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a> <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ac1e67f17ae0b5d4c72670908469fff50">operator++</a>(<span class="keywordtype">int</span>) {</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a> copy = *<span class="keyword">this</span>;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      ++(*this);</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    }</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   <span class="keyword">private</span>:</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1Map_1_1iterator.html">iterator</a>(<span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a>&amp; itr)  <span class="comment">// NOLINT(*)</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        : itr(itr) {}</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>, <span class="keyword">typename</span>&gt;</div><div class="line"><a name="l03065"></a><span class="lineno"><a class="line" href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ad052dfd6b3b90d3e5e20ebf5544d550b"> 3065</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classtvm_1_1runtime_1_1Map.html">Map</a>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <a class="code" href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">MapNode::iterator</a> itr;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  };</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>* GetMapNode()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classtvm_1_1runtime_1_1MapNode.html">MapNode</a>*<span class="keyword">&gt;</span>(data_.get()); }</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;};</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> V,</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, K&gt;::value&gt;::type,</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;          <span class="keyword">typename</span> = <span class="keyword">typename</span> std::enable_if&lt;std::is_base_of&lt;ObjectRef, V&gt;::value&gt;::type&gt;</div><div class="line"><a name="l03084"></a><span class="lineno"><a class="line" href="namespacetvm_1_1runtime.html#aff337677f23f7d665960f553fb52ab86"> 3084</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a> <a class="code" href="namespacetvm_1_1runtime.html#aff337677f23f7d665960f553fb52ab86">Merge</a>(<a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a> lhs, <span class="keyword">const</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html">Map&lt;K, V&gt;</a>&amp; rhs) {</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : rhs) {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    lhs.<a class="code" href="classtvm_1_1runtime_1_1Map.html#ad3a78d88e3a9292d11ce04ff2dfe0702">Set</a>(p.first, p.second);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  }</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <span class="keywordflow">return</span> std::move(lhs);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;}</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;}  <span class="comment">// namespace runtime</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="comment">// expose the functions to the root namespace.</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Array.html">runtime::Array</a>;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ArrayNode.html">runtime::ArrayNode</a>;</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="keyword">using</span> <a class="code" href="namespacetvm_1_1runtime.html#a756a222aed384e208f32d35d3412c918">runtime::Downcast</a>;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1IterAdapter.html">runtime::IterAdapter</a>;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="keyword">using</span> <a class="code" href="namespacetvm_1_1runtime.html#a57b4c19389363853e409527badb5b177">runtime::make_object</a>;</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Map.html">runtime::Map</a>;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1MapNode.html">runtime::MapNode</a>;</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Object.html">runtime::Object</a>;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="keyword">using</span> <a class="code" href="structtvm_1_1runtime_1_1ObjectEqual.html">runtime::ObjectEqual</a>;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;<span class="keyword">using</span> <a class="code" href="structtvm_1_1runtime_1_1ObjectHash.html">runtime::ObjectHash</a>;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectPtr.html">runtime::ObjectPtr</a>;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;<span class="keyword">using</span> <a class="code" href="structtvm_1_1runtime_1_1ObjectPtrEqual.html">runtime::ObjectPtrEqual</a>;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;<span class="keyword">using</span> <a class="code" href="structtvm_1_1runtime_1_1ObjectPtrHash.html">runtime::ObjectPtrHash</a>;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1ObjectRef.html">runtime::ObjectRef</a>;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1Optional.html">runtime::Optional</a>;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1String.html">runtime::String</a>;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="keyword">using</span> <a class="code" href="classtvm_1_1runtime_1_1StringObj.html">runtime::StringObj</a>;</div><div class="line"><a name="l03111"></a><span class="lineno"><a class="line" href="namespacetvm.html#aae7034e3e41c18e7fb78ff32bfc6a318"> 3111</a></span>&#160;constexpr <a class="code" href="structtvm_1_1runtime_1_1NullOptType.html">runtime::NullOptType</a> <a class="code" href="namespacetvm.html#aae7034e3e41c18e7fb78ff32bfc6a318">NullOpt</a>{};</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;}  <span class="comment">// namespace tvm</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacestd.html">std</a> {</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="keyword">struct </span>hash&lt;::<a class="code" href="classtvm_1_1runtime_1_1String.html">tvm::runtime::String</a>&gt; {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  std::size_t operator()(const ::tvm::runtime::String&amp; str)<span class="keyword"> const </span>{</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    return ::tvm::runtime::String::HashBytes(str.data(), str.size());</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  }</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;};</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;}  <span class="comment">// namespace std</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="preprocessor">#endif  // TVM_RUNTIME_CONTAINER_H_</span></div><div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a569d224e69ea0f65717e6dcb0dd53e5b"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a569d224e69ea0f65717e6dcb0dd53e5b">tvm::runtime::Map::iterator::pointer</a></div><div class="ttdeci">value_type * pointer</div><div class="ttdef"><b>Definition:</b> container.h:3032</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_afa52eb43328fdca2972a8312bb1ed6d0"><div class="ttname"><a href="namespacetvm_1_1runtime.html#afa52eb43328fdca2972a8312bb1ed6d0">tvm::runtime::operator&gt;</a></div><div class="ttdeci">bool operator&gt;(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1477</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1StringObj_html_a866c6a8805c30f6cc4faac2298985d23"><div class="ttname"><a href="classtvm_1_1runtime_1_1StringObj.html#a866c6a8805c30f6cc4faac2298985d23">tvm::runtime::StringObj::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdoc">The length of the string object. </div><div class="ttdef"><b>Definition:</b> container.h:1145</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1ObjectEqual_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1ObjectEqual.html">tvm::runtime::ObjectEqual</a></div><div class="ttdoc">String-aware ObjectRef hash functor. </div><div class="ttdef"><b>Definition:</b> container.h:96</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a03f9f2382fbbf611af6591ce1afb0dca"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a03f9f2382fbbf611af6591ce1afb0dca">tvm::runtime::String::compare</a></div><div class="ttdeci">int compare(const char *other) const</div><div class="ttdoc">Compares this to other. </div><div class="ttdef"><b>Definition:</b> container.h:1255</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_a9ebe228980db0256d72fc01ba5c7ae89"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#a9ebe228980db0256d72fc01ba5c7ae89">tvm::runtime::ADT::ADT</a></div><div class="ttdeci">ADT(int32_t tag, std::initializer_list&lt; ObjectRef &gt; init)</div><div class="ttdoc">construct an ADT object reference. </div><div class="ttdef"><b>Definition:</b> container.h:1103</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a1a7727b86efaf35c58a5198ab1c139c8"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a1a7727b86efaf35c58a5198ab1c139c8">tvm::runtime::Array::reserve</a></div><div class="ttdeci">void reserve(int64_t n)</div><div class="ttdoc">Make sure the list has the capacity of at least n. </div><div class="ttdef"><b>Definition:</b> container.h:841</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a58d530f3be4fac7ff99a574c2f6c8ddc"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a58d530f3be4fac7ff99a574c2f6c8ddc">tvm::runtime::DenseMapNode::data_</a></div><div class="ttdeci">Block * data_</div><div class="ttdoc">array of data blocks </div><div class="ttdef"><b>Definition:</b> container.h:2717</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html">tvm::runtime::ArrayNode</a></div><div class="ttdoc">array node content in array </div><div class="ttdef"><b>Definition:</b> container.h:334</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_aaeda6a88310d41a22ce884fb1570b0d2"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#aaeda6a88310d41a22ce884fb1570b0d2">tvm::runtime::String::at</a></div><div class="ttdeci">char at(size_t pos) const</div><div class="ttdoc">Read an element. </div><div class="ttdef"><b>Definition:</b> container.h:1296</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a0d4e97d796619afb8d02cab10451edf5"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a0d4e97d796619afb8d02cab10451edf5">tvm::runtime::Map::iterator::iterator_category</a></div><div class="ttdeci">std::bidirectional_iterator_tag iterator_category</div><div class="ttdef"><b>Definition:</b> container.h:3029</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a6b105410198a644ddbd1b83695711715"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a6b105410198a644ddbd1b83695711715">tvm::runtime::MapNode::iterator::iterator_category</a></div><div class="ttdeci">std::forward_iterator_tag iterator_category</div><div class="ttdef"><b>Definition:</b> container.h:1887</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a5f82ed0ef356225883e118eb76392cd5"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a5f82ed0ef356225883e118eb76392cd5">tvm::runtime::String::data</a></div><div class="ttdeci">const char * data() const</div><div class="ttdoc">Return the data pointer. </div><div class="ttdef"><b>Definition:</b> container.h:1309</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html">tvm::runtime::MapNode::iterator</a></div><div class="ttdef"><b>Definition:</b> container.h:1885</div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdef"><b>Definition:</b> container.h:74</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_ac84683f61368eb10e26e72a0097cccd7"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#ac84683f61368eb10e26e72a0097cccd7">tvm::runtime::Array::operator[]</a></div><div class="ttdeci">const T operator[](int64_t i) const</div><div class="ttdoc">Immutably read i-th element from array. </div><div class="ttdef"><b>Definition:</b> container.h:686</div></div>
<div class="ttc" id="namespacetvm_html_aac2abc149c1a47944c37b560181b15c0"><div class="ttname"><a href="namespacetvm.html#aac2abc149c1a47944c37b560181b15c0">tvm::min</a></div><div class="ttdeci">PrimExpr min(PrimExpr a, PrimExpr b, Span span=Span())</div><div class="ttdoc">take minimum of two values </div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_adf62c96244160116493dd6a3f6ca3b6e"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#adf62c96244160116493dd6a3f6ca3b6e">tvm::runtime::MapNode::iterator::difference_type</a></div><div class="ttdeci">int64_t difference_type</div><div class="ttdef"><b>Definition:</b> container.h:1888</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a6b398835e5160e792634c8ee0783f284"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a6b398835e5160e792634c8ee0783f284">tvm::runtime::Map::operator=</a></div><div class="ttdeci">Map&lt; K, V &gt; &amp; operator=(const Map&lt; K, V &gt; &amp;other)</div><div class="ttdoc">move assign operator </div><div class="ttdef"><b>Definition:</b> container.h:2924</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_abd170b9025d87892f41780c2a4d8bbfc"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#abd170b9025d87892f41780c2a4d8bbfc">tvm::runtime::IterAdapter::IterAdapter</a></div><div class="ttdeci">IterAdapter(TIter iter)</div><div class="ttdef"><b>Definition:</b> container.h:242</div></div>
<div class="ttc" id="classtvm_1_1arith_1_1IterSplitExpr_html"><div class="ttname"><a href="classtvm_1_1arith_1_1IterSplitExpr.html">tvm::arith::IterSplitExpr</a></div><div class="ttdoc">Managed reference to IterSplitExprNode. </div><div class="ttdef"><b>Definition:</b> iter_affine_map.h:186</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectPtr_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectPtr.html">tvm::runtime::ObjectPtr</a></div><div class="ttdoc">A custom smart pointer for Object. </div><div class="ttdef"><b>Definition:</b> object.h:354</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_ad4d1999febc0f97ae2e2c9cc12edd280"><div class="ttname"><a href="namespacetvm_1_1runtime.html#ad4d1999febc0f97ae2e2c9cc12edd280">tvm::runtime::operator!=</a></div><div class="ttdeci">bool operator!=(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1521</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a865a58097e473b532b1373bd15a1e91f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a865a58097e473b532b1373bd15a1e91f">tvm::runtime::Map::operator[]</a></div><div class="ttdeci">const V operator[](const K &amp;key) const</div><div class="ttdoc">Read element from map. </div><div class="ttdef"><b>Definition:</b> container.h:2969</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a1a2d3f6fa9436d7b5b125124c5c20faf"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a1a2d3f6fa9436d7b5b125124c5c20faf">tvm::runtime::IterAdapter::value_type</a></div><div class="ttdeci">typename Converter::ResultType value_type</div><div class="ttdef"><b>Definition:</b> container.h:237</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_acb427db7d19a75da1625be0248983aab"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#acb427db7d19a75da1625be0248983aab">tvm::runtime::ReverseIterAdapter::operator++</a></div><div class="ttdeci">ReverseIterAdapter &amp; operator++(int)</div><div class="ttdef"><b>Definition:</b> container.h:304</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_ab07747919e590f2a5b80c5c2f9bde6ce"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#ab07747919e590f2a5b80c5c2f9bde6ce">tvm::runtime::Array::insert</a></div><div class="ttdeci">void insert(iterator position, IterType first, IterType last)</div><div class="ttdoc">Insert a range of elements into the given position. </div><div class="ttdef"><b>Definition:</b> container.h:760</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1ObjectPtrEqual_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1ObjectPtrEqual.html">tvm::runtime::ObjectPtrEqual</a></div><div class="ttdoc">ObjectRef equal functor. </div><div class="ttdef"><b>Definition:</b> object.h:625</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a19b27f0fea9c594cb61d22e4d64fd66f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a19b27f0fea9c594cb61d22e4d64fd66f">tvm::runtime::Optional::operator!=</a></div><div class="ttdeci">auto operator!=(const Optional&lt; T &gt; &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1647</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_ad1ae0eaa6dfdc48d5f037ee51a867fe7"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#ad1ae0eaa6dfdc48d5f037ee51a867fe7">tvm::runtime::MapNode::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> container.h:2806</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_ab7ea406f099e235de4944fa94c43812e"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#ab7ea406f099e235de4944fa94c43812e">tvm::runtime::MapNode::slots_</a></div><div class="ttdeci">uint64_t slots_</div><div class="ttdoc">number of slots minus 1 </div><div class="ttdef"><b>Definition:</b> container.h:1961</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ab37f503bb71aa9f8399d3d92fed4a0d3"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ab37f503bb71aa9f8399d3d92fed4a0d3">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map()</div><div class="ttdoc">default constructor </div><div class="ttdef"><b>Definition:</b> container.h:2899</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a87edbe5dfbdd7deda742bd187ebee234"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a87edbe5dfbdd7deda742bd187ebee234">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(Array&lt; T &gt; &amp;&amp;other)</div><div class="ttdoc">move constructor </div><div class="ttdef"><b>Definition:</b> container.h:579</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1Array_1_1ValueConverter_html_a0db77cfd8032391d76dffc88eae8e09b"><div class="ttname"><a href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a0db77cfd8032391d76dffc88eae8e09b">tvm::runtime::Array::ValueConverter::ResultType</a></div><div class="ttdeci">T ResultType</div><div class="ttdef"><b>Definition:</b> container.h:654</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a6e1fd44c0112f97adb7db4090c224707"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a6e1fd44c0112f97adb7db4090c224707">tvm::runtime::Map::iterator::value_type</a></div><div class="ttdeci">const std::pair&lt; K, V &gt; value_type</div><div class="ttdef"><b>Definition:</b> container.h:3031</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADTObj_html_a699d898a036382a0c86fba219bcf8102"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADTObj.html#a699d898a036382a0c86fba219bcf8102">tvm::runtime::ADTObj::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Number of fields in the ADT object. </div><div class="ttdef"><b>Definition:</b> container.h:1034</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_ab77f7b17aece9015b0ef91908f75b5f4"><div class="ttname"><a href="namespacetvm_1_1runtime.html#ab77f7b17aece9015b0ef91908f75b5f4">tvm::runtime::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1466</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a415f6b164bc4b4496e717129bd88396b"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a415f6b164bc4b4496e717129bd88396b">tvm::runtime::Optional::operator!=</a></div><div class="ttdeci">auto operator!=(const T &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1664</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a756a222aed384e208f32d35d3412c918"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a756a222aed384e208f32d35d3412c918">tvm::runtime::Downcast</a></div><div class="ttdeci">SubRef Downcast(BaseRef ref)</div><div class="ttdoc">Downcast a base reference type to a more specific type. </div><div class="ttdef"><b>Definition:</b> object.h:882</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_a0593c84ceb05afb1a3f87045a3dc3a59"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#a0593c84ceb05afb1a3f87045a3dc3a59">tvm::runtime::SmallMapNode::at</a></div><div class="ttdeci">const mapped_type &amp; at(const key_type &amp;key) const</div><div class="ttdoc">Index value associated with a key, throw exception if the key does not exist. </div><div class="ttdef"><b>Definition:</b> container.h:1993</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a4adb64a40bda0e39d95f8d82b2df5df3"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4adb64a40bda0e39d95f8d82b2df5df3">tvm::runtime::MapNode::iterator::operator!=</a></div><div class="ttdeci">bool operator!=(const iterator &amp;other) const</div><div class="ttdoc">Compare iterators. </div><div class="ttdef"><b>Definition:</b> container.h:1899</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a540d6f4cb2b8a4430049fad7d24db3d1"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a540d6f4cb2b8a4430049fad7d24db3d1">tvm::runtime::Map::iterator::operator!=</a></div><div class="ttdeci">bool operator!=(const iterator &amp;other) const</div><div class="ttdoc">Compare iterators. </div><div class="ttdef"><b>Definition:</b> container.h:3040</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a362bd28f025d28551159e46c415309bd"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a362bd28f025d28551159e46c415309bd">tvm::runtime::ReverseIterAdapter::operator++</a></div><div class="ttdeci">ReverseIterAdapter &amp; operator++()</div><div class="ttdef"><b>Definition:</b> container.h:296</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_aa8d46402a1b371bb9c711602942f1eab"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#aa8d46402a1b371bb9c711602942f1eab">tvm::runtime::SmallMapNode::erase</a></div><div class="ttdeci">void erase(const iterator &amp;position)</div><div class="ttdoc">Erase the entry associated with the iterator. </div><div class="ttdef"><b>Definition:</b> container.h:2030</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_ae162e2c75ca786277c01a0f91b157fee"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#ae162e2c75ca786277c01a0f91b157fee">tvm::runtime::Optional::operator==</a></div><div class="ttdeci">bool operator==(std::nullptr_t) const</div><div class="ttdef"><b>Definition:</b> container.h:1634</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a22cafc90ebeb8d6a50ce3bc4e183a403"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a22cafc90ebeb8d6a50ce3bc4e183a403">tvm::runtime::ArrayNode::SetItem</a></div><div class="ttdeci">void SetItem(int64_t i, ObjectRef item)</div><div class="ttdoc">Set i-th element of the array in-place. </div><div class="ttdef"><b>Definition:</b> container.h:360</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_a9979171ea0db97d08bffb1bb328c7b96"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#a9979171ea0db97d08bffb1bb328c7b96">tvm::runtime::SmallMapNode::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> container.h:2011</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a773d2e9099e34ab3bcf3b1870d0aee28"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a773d2e9099e34ab3bcf3b1870d0aee28">tvm::runtime::DenseMapNode::at</a></div><div class="ttdeci">mapped_type &amp; at(const key_type &amp;key)</div><div class="ttdoc">Index value associated with a key, throw exception if the key does not exist. </div><div class="ttdef"><b>Definition:</b> container.h:2241</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1StringObj_1_1FromStd_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html">tvm::runtime::StringObj::FromStd</a></div><div class="ttdoc">An object representing string moved from std::string. </div><div class="ttdef"><b>Definition:</b> container.h:1393</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a0f3e68f408a65464de76fa5dc3e34a11"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a0f3e68f408a65464de76fa5dc3e34a11">tvm::runtime::Array::back</a></div><div class="ttdeci">const T back() const</div><div class="ttdef"><b>Definition:</b> container.h:718</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_ac4066242008f1e60533099615a20fdbd"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#ac4066242008f1e60533099615a20fdbd">tvm::runtime::IterAdapter::operator==</a></div><div class="ttdeci">bool operator==(IterAdapter other) const</div><div class="ttdef"><b>Definition:</b> container.h:273</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ac62909410a98a078ff01f688cdf70ffe"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ac62909410a98a078ff01f688cdf70ffe">tvm::runtime::Map::operator=</a></div><div class="ttdeci">Map&lt; K, V &gt; &amp; operator=(Map&lt; K, V &gt; &amp;&amp;other)</div><div class="ttdoc">copy assign operator </div><div class="ttdef"><b>Definition:</b> container.h:2915</div></div>
<div class="ttc" id="namespacetvm_html"><div class="ttname"><a href="namespacetvm.html">tvm</a></div><div class="ttdef"><b>Definition:</b> analyzer.h:36</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a4548877b6a33598c7278101027b97ec6"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a4548877b6a33598c7278101027b97ec6">tvm::runtime::ReverseIterAdapter::iterator_category</a></div><div class="ttdeci">typename std::iterator_traits&lt; TIter &gt;::iterator_category iterator_category</div><div class="ttdef"><b>Definition:</b> container.h:293</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_abfcb7af7536da67a1789d99abfbb4e93"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#abfcb7af7536da67a1789d99abfbb4e93">tvm::runtime::ArrayNode::CopyFrom</a></div><div class="ttdeci">static ObjectPtr&lt; ArrayNode &gt; CopyFrom(int64_t cap, ArrayNode *from)</div><div class="ttdoc">Constructs a container and copy from another. </div><div class="ttdef"><b>Definition:</b> container.h:368</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_ad605c9f9aaed23e669c2a3c595d08ba4"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ad605c9f9aaed23e669c2a3c595d08ba4">tvm::runtime::MapNode::iterator::iterator</a></div><div class="ttdeci">iterator()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> container.h:1893</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_ad83a0ea66d3af9fd1b232e49a960f6f4"><div class="ttname"><a href="namespacetvm_1_1runtime.html#ad83a0ea66d3af9fd1b232e49a960f6f4">tvm::runtime::operator&gt;=</a></div><div class="ttdeci">bool operator&gt;=(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1499</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_ade3c126684dcdc6ed432f3bb7eb62099"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ade3c126684dcdc6ed432f3bb7eb62099">tvm::runtime::Map::iterator::operator==</a></div><div class="ttdeci">bool operator==(const iterator &amp;other) const</div><div class="ttdoc">Compare iterators. </div><div class="ttdef"><b>Definition:</b> container.h:3038</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_a3e3295669feb01b40d022786c47c7981"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#a3e3295669feb01b40d022786c47c7981">tvm::runtime::SmallMapNode::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> container.h:2009</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_af7555a75a5dbdf2f1c1af3fd240e54e7"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#af7555a75a5dbdf2f1c1af3fd240e54e7">tvm::runtime::DenseMapNode::fib_shift_</a></div><div class="ttdeci">uint32_t fib_shift_</div><div class="ttdoc">fib shift in Fibonacci Hashing </div><div class="ttdef"><b>Definition:</b> container.h:2715</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a7afdaa55d2e55e942e732f072a97a862"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a7afdaa55d2e55e942e732f072a97a862">tvm::runtime::Array::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> container.h:707</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a156c1e32c6e7a8a39e43091166563170"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a156c1e32c6e7a8a39e43091166563170">tvm::runtime::Map::CopyOnWrite</a></div><div class="ttdeci">MapNode * CopyOnWrite()</div><div class="ttdoc">copy on write semantics Do nothing if current handle is the unique copy of the array. Otherwise make a new copy of the array to ensure the current handle hold a unique copy. </div><div class="ttdef"><b>Definition:</b> container.h:3015</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_ac5d930b522e9fef9c07e51819d96d2f3"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#ac5d930b522e9fef9c07e51819d96d2f3">tvm::runtime::String::String</a></div><div class="ttdeci">String()</div><div class="ttdoc">Construct an empty string. </div><div class="ttdef"><b>Definition:</b> container.h:1189</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html">tvm::runtime::ReverseIterAdapter</a></div><div class="ttdoc">iterator adapter that adapts TIter to return another type. </div><div class="ttdef"><b>Definition:</b> container.h:287</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a5c0c770f7667f911aa8bec879e3ac214"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a5c0c770f7667f911aa8bec879e3ac214">tvm::runtime::MapNode::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">Number of elements in the SmallMapNode. </div><div class="ttdef"><b>Definition:</b> container.h:1845</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a6071908cdeb00617d3b28a70d05ac649"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a6071908cdeb00617d3b28a70d05ac649">tvm::runtime::DenseMapNode::at</a></div><div class="ttdeci">const mapped_type &amp; at(const key_type &amp;key) const</div><div class="ttdoc">Index value associated with a key, throw exception if the key does not exist. </div><div class="ttdef"><b>Definition:</b> container.h:2235</div></div>
<div class="ttc" id="classtvm_1_1tir_1_1IterVar_html"><div class="ttname"><a href="classtvm_1_1tir_1_1IterVar.html">tvm::tir::IterVar</a></div><div class="ttdoc">Iteration Variable, represents an iteration over an integer interval. </div><div class="ttdef"><b>Definition:</b> var.h:291</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ac40191ef3c2de0c546b48102fa43cd88"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ac40191ef3c2de0c546b48102fa43cd88">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(const std::unordered_map&lt; K, V, Hash, Equal &gt; &amp;init)</div><div class="ttdoc">constructor from unordered_map </div><div class="ttdef"><b>Definition:</b> container.h:2955</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a8052ae36e24a4973c1a123c99cf5152c"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a8052ae36e24a4973c1a123c99cf5152c">tvm::runtime::Map::iterator::operator++</a></div><div class="ttdeci">iterator &amp; operator++()</div><div class="ttdoc">Prefix self increment, e.g. ++iter. </div><div class="ttdef"><b>Definition:</b> container.h:3049</div></div>
<div class="ttc" id="runtime_2memory_8h_html"><div class="ttname"><a href="runtime_2memory_8h.html">memory.h</a></div><div class="ttdoc">Runtime memory management. </div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_ad3b2d03b6683bdaee0b524612b53d419"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#ad3b2d03b6683bdaee0b524612b53d419">tvm::runtime::IterAdapter::iterator_category</a></div><div class="ttdeci">typename std::iterator_traits&lt; TIter &gt;::iterator_category iterator_category</div><div class="ttdef"><b>Definition:</b> container.h:240</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> loop_state.h:457</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_aea0665ed087095ed39354064e5071d4f"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#aea0665ed087095ed39354064e5071d4f">tvm::runtime::ADT::ADT</a></div><div class="ttdeci">ADT(int32_t tag, Iterator begin, Iterator end)</div><div class="ttdoc">construct an ADT object reference. </div><div class="ttdef"><b>Definition:</b> container.h:1089</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADTObj_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADTObj.html">tvm::runtime::ADTObj</a></div><div class="ttdoc">An object representing a structure or enumeration. </div><div class="ttdef"><b>Definition:</b> container.h:1029</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a0ea0aa1d24073721ee7bf9bd5d23c53a"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a0ea0aa1d24073721ee7bf9bd5d23c53a">tvm::runtime::String::HashBytes</a></div><div class="ttdeci">static size_t HashBytes(const char *data, size_t size)</div><div class="ttdoc">Hash the binary bytes. </div><div class="ttdef"><b>Definition:</b> container.h:1339</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a5230a8db9f60b62bc74d14ab8c3580ad"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5230a8db9f60b62bc74d14ab8c3580ad">tvm::runtime::MapNode::iterator::operator++</a></div><div class="ttdeci">iterator operator++(int)</div><div class="ttdoc">Suffix self increment. </div><div class="ttdef"><b>Definition:</b> container.h:1909</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a8064044f8928cf3fed003507d65604c7"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a8064044f8928cf3fed003507d65604c7">tvm::runtime::Array::resize</a></div><div class="ttdeci">void resize(int64_t n)</div><div class="ttdoc">Resize the array. </div><div class="ttdef"><b>Definition:</b> container.h:823</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a3e88cee6eb31d0e495f7debd94b7573d"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a3e88cee6eb31d0e495f7debd94b7573d">tvm::runtime::ArrayNode::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> container.h:337</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_afc8d39f3c9e33bca6083253f7288d900"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#afc8d39f3c9e33bca6083253f7288d900">tvm::runtime::Map::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> container.h:2981</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a2d43c95564271491432d279c12f7f94c"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a2d43c95564271491432d279c12f7f94c">tvm::runtime::ArrayNode::end</a></div><div class="ttdeci">const ObjectRef * end() const</div><div class="ttdef"><b>Definition:</b> container.h:350</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a7c03ae71aa89ec2591ae9ba7b3acc9d1"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a7c03ae71aa89ec2591ae9ba7b3acc9d1">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(const size_t n, const T &amp;val)</div><div class="ttdoc">Constructs a container with n elements. Each element is a copy of val. </div><div class="ttdef"><b>Definition:</b> container.h:629</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a892484a52bf9ba0c48512154ba63a2bf"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a892484a52bf9ba0c48512154ba63a2bf">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(IterType begin, IterType end)</div><div class="ttdoc">constructor from iterator </div><div class="ttdef"><b>Definition:</b> container.h:2940</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a2c20920d4a09a6c022768b353ec8df2a"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a2c20920d4a09a6c022768b353ec8df2a">tvm::runtime::operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;out, const String &amp;input)</div><div class="ttdef"><b>Definition:</b> container.h:1523</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a5389bd1ee67baed336ae520a230002e9"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a5389bd1ee67baed336ae520a230002e9">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(ObjectPtr&lt; Object &gt; n)</div><div class="ttdoc">constructor from pointer </div><div class="ttdef"><b>Definition:</b> container.h:2932</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a9084e513e3a9b49a81fecd403fa415f1"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a9084e513e3a9b49a81fecd403fa415f1">tvm::runtime::IterAdapter::operator+</a></div><div class="ttdeci">IterAdapter operator+(difference_type offset) const</div><div class="ttdef"><b>Definition:</b> container.h:262</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a50385ee3535af422c478d91166331a3c"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a50385ee3535af422c478d91166331a3c">tvm::runtime::Array::GetArrayNode</a></div><div class="ttdeci">ArrayNode * GetArrayNode() const</div><div class="ttdef"><b>Definition:</b> container.h:871</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a8c31c029a28ca7f5ab0ceb3fcf7ded89"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a8c31c029a28ca7f5ab0ceb3fcf7ded89">tvm::runtime::MapNode::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> container.h:2810</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_aeb11bbd3d8a715fa95e4e4c213902061"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#aeb11bbd3d8a715fa95e4e4c213902061">tvm::runtime::SmallMapNode::find</a></div><div class="ttdeci">iterator find(const key_type &amp;key) const</div><div class="ttdoc">Index value associated with a key. </div><div class="ttdef"><b>Definition:</b> container.h:2017</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a0537c9d197068a02c26cd702ab42f6ff"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a0537c9d197068a02c26cd702ab42f6ff">tvm::runtime::make_inplace_array_object</a></div><div class="ttdeci">ObjectPtr&lt; ArrayType &gt; make_inplace_array_object(size_t num_elems, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> memory.h:200</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Object_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Object.html">tvm::runtime::Object</a></div><div class="ttdoc">base class of all object containers. </div><div class="ttdef"><b>Definition:</b> object.h:163</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_af8b7450aea8633a51d3e8c75ed9fe2be"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#af8b7450aea8633a51d3e8c75ed9fe2be">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array()</div><div class="ttdoc">default constructor </div><div class="ttdef"><b>Definition:</b> container.h:573</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_ac3b9b13f9e074e20afe3bbd68cce35f3"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#ac3b9b13f9e074e20afe3bbd68cce35f3">tvm::runtime::DenseMapNode::~DenseMapNode</a></div><div class="ttdeci">~DenseMapNode()</div><div class="ttdoc">Destroy the DenseMapNode. </div><div class="ttdef"><b>Definition:</b> container.h:2227</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_ae27124341aa924bfd3e8e0606fb16f1c"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#ae27124341aa924bfd3e8e0606fb16f1c">tvm::runtime::ADT::tag</a></div><div class="ttdeci">int32_t tag() const</div><div class="ttdoc">Return the ADT tag. </div><div class="ttdef"><b>Definition:</b> container.h:1116</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html">tvm::runtime::SmallMapNode</a></div><div class="ttdoc">A specialization of small-sized hash map. </div><div class="ttdef"><b>Definition:</b> container.h:1970</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a812045bfefb0f80f850d1b39f0e40489"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a812045bfefb0f80f850d1b39f0e40489">tvm::runtime::String::length</a></div><div class="ttdeci">size_t length() const</div><div class="ttdoc">Return the length of the string. </div><div class="ttdef"><b>Definition:</b> container.h:1281</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a75e3f2657cdb7cc613bf922429983165"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a75e3f2657cdb7cc613bf922429983165">tvm::runtime::MapNode::iterator::iterator</a></div><div class="ttdeci">iterator(uint64_t index, const MapNode *self)</div><div class="ttdoc">Construct by value. </div><div class="ttdef"><b>Definition:</b> container.h:1923</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a67431af5ae08050343eaf70629e5e310"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a67431af5ae08050343eaf70629e5e310">tvm::runtime::Map::erase</a></div><div class="ttdeci">void erase(const K &amp;key)</div><div class="ttdef"><b>Definition:</b> container.h:3005</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a127d022f391a566b51abf16ce4bd74af"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a127d022f391a566b51abf16ce4bd74af">tvm::runtime::Array::MutateByApply</a></div><div class="ttdeci">void MutateByApply(F fmutate)</div><div class="ttdoc">Helper function to apply fmutate to mutate an array. </div><div class="ttdef"><b>Definition:</b> container.h:880</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_ab5db2ee9a8be71931324dac552be24c4"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#ab5db2ee9a8be71931324dac552be24c4">tvm::runtime::Array::Set</a></div><div class="ttdeci">void Set(int64_t i, T value)</div><div class="ttdoc">set i-th element of the array. </div><div class="ttdef"><b>Definition:</b> container.h:863</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Closure_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Closure.html">tvm::runtime::Closure</a></div><div class="ttdoc">reference to closure. </div><div class="ttdef"><b>Definition:</b> container.h:1692</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a5bc26222aa0257ece4c3a9d4d70fa1d8"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a5bc26222aa0257ece4c3a9d4d70fa1d8">tvm::runtime::Array::operator=</a></div><div class="ttdeci">Array&lt; T &gt; &amp; operator=(const Array&lt; T &gt; &amp;other)</div><div class="ttdoc">copy assign operator </div><div class="ttdef"><b>Definition:</b> container.h:646</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_aa026b914ee05f81b6c20130b8905f257"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#aa026b914ee05f81b6c20130b8905f257">tvm::runtime::Array::push_back</a></div><div class="ttdeci">void push_back(const T &amp;item)</div><div class="ttdoc">push a new item to the back of the list </div><div class="ttdef"><b>Definition:</b> container.h:732</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ae9ecf711c97150ca34732459b3b2f125"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ae9ecf711c97150ca34732459b3b2f125">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(const Map&lt; K, V &gt; &amp;other)</div><div class="ttdoc">copy constructor </div><div class="ttdef"><b>Definition:</b> container.h:2909</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_ae71116873ea643de9f8ec1836cc116db"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ae71116873ea643de9f8ec1836cc116db">tvm::runtime::ReverseIterAdapter::operator==</a></div><div class="ttdeci">bool operator==(ReverseIterAdapter other) const</div><div class="ttdef"><b>Definition:</b> container.h:325</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html">tvm::runtime::InplaceArrayBase</a></div><div class="ttdoc">Base template for classes with array like memory layout. </div><div class="ttdef"><b>Definition:</b> container.h:146</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a4869a61f3e598fcbf8cdb3c14d66f859"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a4869a61f3e598fcbf8cdb3c14d66f859">tvm::runtime::IterAdapter::operator*</a></div><div class="ttdeci">const value_type operator*() const</div><div class="ttdef"><b>Definition:</b> container.h:275</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a2860450a1004d1f41a9e3586f77cc7aa"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a2860450a1004d1f41a9e3586f77cc7aa">tvm::runtime::ArrayNode::begin</a></div><div class="ttdeci">const ObjectRef * begin() const</div><div class="ttdef"><b>Definition:</b> container.h:347</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a2a049030ff85513916a05924bf519d2c"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a2a049030ff85513916a05924bf519d2c">tvm::runtime::ReverseIterAdapter::operator!=</a></div><div class="ttdeci">bool operator!=(ReverseIterAdapter other) const</div><div class="ttdef"><b>Definition:</b> container.h:326</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a78b7d88d169c1305f5dac0818f34141f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a78b7d88d169c1305f5dac0818f34141f">tvm::runtime::Array::insert</a></div><div class="ttdeci">void insert(iterator position, const T &amp;val)</div><div class="ttdoc">Insert an element into the given position. </div><div class="ttdef"><b>Definition:</b> container.h:742</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_ab5671b2b9d56c2abcfb8d3f03cf6fd9e"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#ab5671b2b9d56c2abcfb8d3f03cf6fd9e">tvm::runtime::IterAdapter::operator-</a></div><div class="ttdeci">IterAdapter operator-(difference_type offset) const</div><div class="ttdef"><b>Definition:</b> container.h:264</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_ade7d41e23d7ac8a0d64e237dfcf958c6"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ade7d41e23d7ac8a0d64e237dfcf958c6">tvm::runtime::ReverseIterAdapter::pointer</a></div><div class="ttdeci">typename Converter::ResultType * pointer</div><div class="ttdef"><b>Definition:</b> container.h:291</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_af51613add20f67643684b1c7fdd5569a"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#af51613add20f67643684b1c7fdd5569a">tvm::runtime::ADT::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">Return the number of fields. </div><div class="ttdef"><b>Definition:</b> container.h:1121</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_a99bd2454e0afbfb9fdf2644f5f709783"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#a99bd2454e0afbfb9fdf2644f5f709783">tvm::runtime::SmallMapNode::count</a></div><div class="ttdeci">size_t count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of times a key exists in the SmallMapNode. </div><div class="ttdef"><b>Definition:</b> container.h:1987</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a15be72990266fc89e03fdf08bae0f331"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a15be72990266fc89e03fdf08bae0f331">tvm::runtime::Optional::value_or</a></div><div class="ttdeci">T value_or(T default_value) const</div><div class="ttdef"><b>Definition:</b> container.h:1629</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_ac785c91cb744c18f3ef21fab098d02b2"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#ac785c91cb744c18f3ef21fab098d02b2">tvm::runtime::String::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Returns a pointer to the char array in the string. </div><div class="ttdef"><b>Definition:</b> container.h:1264</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1StringObj_html_a4ab9dd883ceed3efccf663acfbcd152f"><div class="ttname"><a href="classtvm_1_1runtime_1_1StringObj.html#a4ab9dd883ceed3efccf663acfbcd152f">tvm::runtime::StringObj::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">The pointer to string data. </div><div class="ttdef"><b>Definition:</b> container.h:1142</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_aed6387e67d18b9d5ad18f510fd600a25"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#aed6387e67d18b9d5ad18f510fd600a25">tvm::runtime::Array::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> container.h:695</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_adbf346bfbc9caff697aa754216d14a7c"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#adbf346bfbc9caff697aa754216d14a7c">tvm::runtime::ReverseIterAdapter::value_type</a></div><div class="ttdeci">typename Converter::ResultType value_type</div><div class="ttdef"><b>Definition:</b> container.h:290</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a37dde5a68fe4e1f13494a66f79da419b"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a37dde5a68fe4e1f13494a66f79da419b">tvm::runtime::Optional::Optional</a></div><div class="ttdeci">Optional(NullOptType)</div><div class="ttdoc">Nullopt handling. </div><div class="ttdef"><b>Definition:</b> container.h:1597</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a4b76dbe39fd58a3160cd898378a02469"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a4b76dbe39fd58a3160cd898378a02469">tvm::runtime::Array::front</a></div><div class="ttdeci">const T front() const</div><div class="ttdef"><b>Definition:</b> container.h:710</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_a204397cb319fdb83a72b1d9112a09caa"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#a204397cb319fdb83a72b1d9112a09caa">tvm::runtime::ADT::ADT</a></div><div class="ttdeci">ADT(int32_t tag, std::vector&lt; ObjectRef &gt; fields)</div><div class="ttdoc">construct an ADT object reference. </div><div class="ttdef"><b>Definition:</b> container.h:1079</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_aca259da80169ea60877e17c98a0b472a"><div class="ttname"><a href="namespacetvm_1_1runtime.html#aca259da80169ea60877e17c98a0b472a">tvm::runtime::operator+</a></div><div class="ttdeci">String operator+(const String &amp;lhs, const char *rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1451</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a6e54667aa71ae41d33c22d6bd3973404"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a6e54667aa71ae41d33c22d6bd3973404">tvm::runtime::IterAdapter::operator!=</a></div><div class="ttdeci">bool operator!=(IterAdapter other) const</div><div class="ttdef"><b>Definition:</b> container.h:274</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1StringObj_1_1FromStd_html_ae16447bf3dfb1874dc8e04633ba820b4"><div class="ttname"><a href="classtvm_1_1runtime_1_1StringObj_1_1FromStd.html#ae16447bf3dfb1874dc8e04633ba820b4">tvm::runtime::StringObj::FromStd::FromStd</a></div><div class="ttdeci">FromStd(std::string other)</div><div class="ttdoc">Construct a new FromStd object. </div><div class="ttdef"><b>Definition:</b> container.h:1403</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_ad6a362ac9b5e17443f252f16f1c82703"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#ad6a362ac9b5e17443f252f16f1c82703">tvm::runtime::IterAdapter::operator--</a></div><div class="ttdeci">IterAdapter operator--(int)</div><div class="ttdef"><b>Definition:</b> container.h:256</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a182df92fc8085f81b68933da80782098"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a182df92fc8085f81b68933da80782098">tvm::runtime::DenseMapNode::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> container.h:2262</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a65deca60bf7d1b512b0f42b26dbdb882"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a65deca60bf7d1b512b0f42b26dbdb882">tvm::runtime::DenseMapNode::find</a></div><div class="ttdeci">iterator find(const key_type &amp;key) const</div><div class="ttdoc">Index value associated with a key. </div><div class="ttdef"><b>Definition:</b> container.h:2247</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_af508231fa2e1ac23bc7c1ef8e75f471f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#af508231fa2e1ac23bc7c1ef8e75f471f">tvm::runtime::Optional::value</a></div><div class="ttdeci">T value() const</div><div class="ttdef"><b>Definition:</b> container.h:1621</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a0fd88d16147aad4ed810846ce53d21c9"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a0fd88d16147aad4ed810846ce53d21c9">tvm::runtime::Array::erase</a></div><div class="ttdeci">void erase(iterator position)</div><div class="ttdoc">Erase an element on the given position. </div><div class="ttdef"><b>Definition:</b> container.h:786</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_abb41934cee66ce6f25eba0f6de68ff1f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#abb41934cee66ce6f25eba0f6de68ff1f">tvm::runtime::Optional::operator==</a></div><div class="ttdeci">auto operator==(const T &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1658</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html">tvm::runtime::Array</a></div><div class="ttdoc">Array, container representing a contigious sequence of ObjectRefs. </div><div class="ttdef"><b>Definition:</b> container.h:566</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1ObjectPtrHash_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1ObjectPtrHash.html">tvm::runtime::ObjectPtrHash</a></div><div class="ttdoc">ObjectRef hash functor. </div><div class="ttdef"><b>Definition:</b> object.h:615</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a4474559794818ad1257b70e681929938"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a4474559794818ad1257b70e681929938">tvm::runtime::Optional::Optional</a></div><div class="ttdeci">Optional(std::nullptr_t)</div><div class="ttdef"><b>Definition:</b> container.h:1600</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a467a2dacd260ee1e0fc5d233ba4b46d4"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a467a2dacd260ee1e0fc5d233ba4b46d4">tvm::runtime::DenseMapNode::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> container.h:2274</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a9306ec8e65e9a6fb9bce97b34edf2e86"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a9306ec8e65e9a6fb9bce97b34edf2e86">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(std::initializer_list&lt; std::pair&lt; K, V &gt;&gt; init)</div><div class="ttdoc">constructor from initializer list </div><div class="ttdef"><b>Definition:</b> container.h:2947</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_abc9b8a0b8afac7b49c204c3e33f6b3be"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#abc9b8a0b8afac7b49c204c3e33f6b3be">tvm::runtime::Map::iterator::difference_type</a></div><div class="ttdeci">int64_t difference_type</div><div class="ttdef"><b>Definition:</b> container.h:3030</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_ace1ea25bb95eb97d15788e83649db912"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#ace1ea25bb95eb97d15788e83649db912">tvm::runtime::DenseMapNode::count</a></div><div class="ttdeci">size_t count(const key_type &amp;key) const</div><div class="ttdef"><b>Definition:</b> container.h:2229</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Object_html_afd548730a6139d19fe24473ad66026d7"><div class="ttname"><a href="classtvm_1_1runtime_1_1Object.html#afd548730a6139d19fe24473ad66026d7">tvm::runtime::Object::unique</a></div><div class="ttdeci">bool unique() const</div><div class="ttdef"><b>Definition:</b> object.h:853</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_abce8c6206f11edfd3c493b843d52685f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#abce8c6206f11edfd3c493b843d52685f">tvm::runtime::Map::find</a></div><div class="ttdeci">iterator find(const K &amp;key) const</div><div class="ttdef"><b>Definition:</b> container.h:3003</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1Array_1_1ValueConverter_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html">tvm::runtime::Array::ValueConverter</a></div><div class="ttdef"><b>Definition:</b> container.h:653</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_aa713b1b421fda78159a0a66740943c6c"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#aa713b1b421fda78159a0a66740943c6c">tvm::runtime::Map::count</a></div><div class="ttdeci">size_t count(const K &amp;key) const</div><div class="ttdef"><b>Definition:</b> container.h:2976</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectRef_html_ac261cdb80487fb29ac42b28678f8cbef"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectRef.html#ac261cdb80487fb29ac42b28678f8cbef">tvm::runtime::ObjectRef::data_</a></div><div class="ttdeci">ObjectPtr&lt; Object &gt; data_</div><div class="ttdoc">Internal pointer that backs the reference. </div><div class="ttdef"><b>Definition:</b> object.h:565</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a7bd47dead26bddcdd54db780a3135992"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a7bd47dead26bddcdd54db780a3135992">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(const Array&lt; T &gt; &amp;other)</div><div class="ttdoc">copy constructor </div><div class="ttdef"><b>Definition:</b> container.h:587</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a69e661cb034323ccb707cd73ee3624e4"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a69e661cb034323ccb707cd73ee3624e4">tvm::runtime::Array::erase</a></div><div class="ttdeci">void erase(iterator first, iterator last)</div><div class="ttdoc">Erase a given range of elements. </div><div class="ttdef"><b>Definition:</b> container.h:802</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a53f1d3671d30c2e58cf229f377c96409"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a53f1d3671d30c2e58cf229f377c96409">tvm::runtime::ReverseIterAdapter::operator--</a></div><div class="ttdeci">ReverseIterAdapter &amp; operator--(int)</div><div class="ttdef"><b>Definition:</b> container.h:309</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a2e76c697beb4a77556a869f7cc45f09a"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a2e76c697beb4a77556a869f7cc45f09a">tvm::runtime::operator&lt;=</a></div><div class="ttdeci">bool operator&lt;=(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1488</div></div>
<div class="ttc" id="container_8h_html_a04a1af748cfbdfdf0a5707c02c55652e"><div class="ttname"><a href="container_8h.html#a04a1af748cfbdfdf0a5707c02c55652e">TVM_DISPATCH_MAP_CONST</a></div><div class="ttdeci">#define TVM_DISPATCH_MAP_CONST(base, var, body)</div><div class="ttdef"><b>Definition:</b> container.h:2762</div></div>
<div class="ttc" id="namespacetvm_html_a0df5ca82d2c566f628ebb2f1e84a3fcb"><div class="ttname"><a href="namespacetvm.html#a0df5ca82d2c566f628ebb2f1e84a3fcb">tvm::max</a></div><div class="ttdeci">PrimExpr max(PrimExpr a, PrimExpr b, Span span=Span())</div><div class="ttdoc">take maximum of two values </div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a71be89dffaf8f77fcb8c3d5bbdc202ed"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a71be89dffaf8f77fcb8c3d5bbdc202ed">tvm::runtime::ArrayNode::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Release reference to all the elements. </div><div class="ttdef"><b>Definition:</b> container.h:353</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_add6d4829ad500fae8881b7af46a554de"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#add6d4829ad500fae8881b7af46a554de">tvm::runtime::String::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">Return the length of the string. </div><div class="ttdef"><b>Definition:</b> container.h:1271</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_acb643cc554062422a4fd00bbfb3b0a6d"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#acb643cc554062422a4fd00bbfb3b0a6d">tvm::runtime::IterAdapter::operator--</a></div><div class="ttdeci">IterAdapter &amp; operator--()</div><div class="ttdef"><b>Definition:</b> container.h:247</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ab2e291c9d0a9ad6f3eeae63df135a090"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ab2e291c9d0a9ad6f3eeae63df135a090">tvm::runtime::Map::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> container.h:2999</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a2e5b8e5065518ef40c70d5575edf8806"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a2e5b8e5065518ef40c70d5575edf8806">tvm::runtime::Optional::operator==</a></div><div class="ttdeci">auto operator==(const U &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1666</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html">tvm::runtime::String</a></div><div class="ttdoc">Reference to string objects. </div><div class="ttdef"><b>Definition:</b> container.h:1184</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_ad836e9ac0b9fc9c801d69fbedbd77d51"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#ad836e9ac0b9fc9c801d69fbedbd77d51">tvm::runtime::ReverseIterAdapter::difference_type</a></div><div class="ttdeci">typename std::iterator_traits&lt; TIter &gt;::difference_type difference_type</div><div class="ttdef"><b>Definition:</b> container.h:289</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a98b43ed21bc060868ac03dab520a5da2"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a98b43ed21bc060868ac03dab520a5da2">tvm::runtime::Optional::operator=</a></div><div class="ttdeci">Optional&lt; T &gt; &amp; operator=(T other)</div><div class="ttdef"><b>Definition:</b> container.h:1608</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a5fe6cfc0f51ecc13f40796d626cdbfd5"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a5fe6cfc0f51ecc13f40796d626cdbfd5">tvm::runtime::IterAdapter::reference</a></div><div class="ttdeci">typename Converter::ResultType &amp; reference</div><div class="ttdef"><b>Definition:</b> container.h:239</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1ObjectHash_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1ObjectHash.html">tvm::runtime::ObjectHash</a></div><div class="ttdoc">String-aware ObjectRef equal functor. </div><div class="ttdef"><b>Definition:</b> container.h:86</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectRef_html_ae31a5b9f40781d60a2901994ead700e8"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectRef.html#ae31a5b9f40781d60a2901994ead700e8">tvm::runtime::ObjectRef::same_as</a></div><div class="ttdeci">bool same_as(const ObjectRef &amp;other) const</div><div class="ttdoc">Comparator. </div><div class="ttdef"><b>Definition:</b> object.h:513</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_ad1cf3446de62c7aba99235f2843f839f"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ad1cf3446de62c7aba99235f2843f839f">tvm::runtime::InplaceArrayBase::~InplaceArrayBase</a></div><div class="ttdeci">~InplaceArrayBase()</div><div class="ttdoc">Destroy the Inplace Array Base object. </div><div class="ttdef"><b>Definition:</b> container.h:173</div></div>
<div class="ttc" id="container_8h_html_a1d45968795b6054f63824cb9c5512d5a"><div class="ttname"><a href="container_8h.html#a1d45968795b6054f63824cb9c5512d5a">TVM_DISPATCH_MAP</a></div><div class="ttdeci">#define TVM_DISPATCH_MAP(base, var, body)</div><div class="ttdef"><b>Definition:</b> container.h:2748</div></div>
<div class="ttc" id="object_8h_html_ac6e7295a4999e2c8e4a2c990beca887a"><div class="ttname"><a href="object_8h.html#ac6e7295a4999e2c8e4a2c990beca887a">TVM_DEFINE_OBJECT_REF_METHODS</a></div><div class="ttdeci">#define TVM_DEFINE_OBJECT_REF_METHODS(TypeName, ParentType, ObjectName)</div><div class="ttdef"><b>Definition:</b> object.h:704</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_af3f2fbd0d476ae66fe526f0685b7cb6c"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#af3f2fbd0d476ae66fe526f0685b7cb6c">tvm::runtime::Array::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin() const</div><div class="ttdef"><b>Definition:</b> container.h:668</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_a2a0235e3e9b03abffc3839d14e1b7342"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a2a0235e3e9b03abffc3839d14e1b7342">tvm::runtime::InplaceArrayBase::AddressOf</a></div><div class="ttdeci">void * AddressOf(size_t idx) const</div><div class="ttdoc">Return the raw pointer to the element at idx. </div><div class="ttdef"><b>Definition:</b> container.h:215</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a326af819f031fc52b80de3bb2da87fa2"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a326af819f031fc52b80de3bb2da87fa2">tvm::runtime::ReverseIterAdapter::operator+</a></div><div class="ttdeci">ReverseIterAdapter operator+(difference_type offset) const</div><div class="ttdef"><b>Definition:</b> container.h:314</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_ae13ed54071e9b2605ab0e9810d4af9b1"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#ae13ed54071e9b2605ab0e9810d4af9b1">tvm::runtime::Optional::operator!=</a></div><div class="ttdeci">auto operator!=(const U &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1672</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_afa7ed1b09064bb3d6dea7ad886145346"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#afa7ed1b09064bb3d6dea7ad886145346">tvm::runtime::ReverseIterAdapter::operator--</a></div><div class="ttdeci">ReverseIterAdapter &amp; operator--()</div><div class="ttdef"><b>Definition:</b> container.h:300</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_ab0f16ec4c71f65eec4a2ea9a83711a73"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#ab0f16ec4c71f65eec4a2ea9a83711a73">tvm::runtime::Optional::operator=</a></div><div class="ttdeci">Optional&lt; T &gt; &amp; operator=(std::nullptr_t)</div><div class="ttdef"><b>Definition:</b> container.h:1601</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a0e19189278a3986380ce021cac7ceded"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0e19189278a3986380ce021cac7ceded">tvm::runtime::ReverseIterAdapter::reference</a></div><div class="ttdeci">typename Converter::ResultType &amp; reference</div><div class="ttdef"><b>Definition:</b> container.h:292</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_adc1b48d98f5d1780edadde8130287de4"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#adc1b48d98f5d1780edadde8130287de4">tvm::runtime::IterAdapter::pointer</a></div><div class="ttdeci">typename Converter::ResultType * pointer</div><div class="ttdef"><b>Definition:</b> container.h:238</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a5bac4439279428fb3c0d44aa6b1cc798"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a5bac4439279428fb3c0d44aa6b1cc798">tvm::runtime::MapNode::iterator::self</a></div><div class="ttdeci">const MapNode * self</div><div class="ttdoc">The container it points to. </div><div class="ttdef"><b>Definition:</b> container.h:1927</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_af27376d48f56d42f28440536d1774405"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#af27376d48f56d42f28440536d1774405">tvm::runtime::MapNode::iterator::value_type</a></div><div class="ttdeci">KVType value_type</div><div class="ttdef"><b>Definition:</b> container.h:1889</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_aacdeb14d66a7f85e94ee843c459f7959"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#aacdeb14d66a7f85e94ee843c459f7959">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(IterType first, IterType last)</div><div class="ttdoc">Constructor from iterator. </div><div class="ttdef"><b>Definition:</b> container.h:604</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_abc5b09553663c05b863c4a406a343c92"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abc5b09553663c05b863c4a406a343c92">tvm::runtime::MapNode::iterator::reference</a></div><div class="ttdeci">KVType &amp; reference</div><div class="ttdef"><b>Definition:</b> container.h:1891</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_a88cf389012aad0e129c84c056ae546fc"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#a88cf389012aad0e129c84c056ae546fc">tvm::runtime::ADT::operator[]</a></div><div class="ttdeci">const ObjectRef &amp; operator[](size_t idx) const</div><div class="ttdoc">Access element at index. </div><div class="ttdef"><b>Definition:</b> container.h:1111</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html">tvm::runtime::DenseMapNode</a></div><div class="ttdoc">A specialization of hash map that implements the idea of array-based hash map. Another reference impl...</div><div class="ttdef"><b>Definition:</b> container.h:2200</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a6b097149e69ea03fe3b812a3f5f7fcd9"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a6b097149e69ea03fe3b812a3f5f7fcd9">tvm::runtime::Array::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> container.h:665</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectRef_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectRef.html">tvm::runtime::ObjectRef</a></div><div class="ttdoc">Base class of all object reference. </div><div class="ttdef"><b>Definition:</b> object.h:502</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a9af024da3af390f431b941e1378f813e"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a9af024da3af390f431b941e1378f813e">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(const std::vector&lt; T &gt; &amp;init)</div><div class="ttdoc">constructor from vector </div><div class="ttdef"><b>Definition:</b> container.h:620</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a67f728a692ed84a78a20a2095815f260"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a67f728a692ed84a78a20a2095815f260">tvm::runtime::ReverseIterAdapter::operator-</a></div><div class="ttdeci">std::enable_if&lt; std::is_same&lt; iterator_category, std::random_access_iterator_tag &gt;::value, typename T::difference_type &gt;::type operator-(const ReverseIterAdapter &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> container.h:321</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_ae9734c8e6324f9be27fce8d45d0aa6f4"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#ae9734c8e6324f9be27fce8d45d0aa6f4">tvm::runtime::Array::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> container.h:662</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_a4b37b5fcd2285b818e8f623da8b326b2"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a4b37b5fcd2285b818e8f623da8b326b2">tvm::runtime::InplaceArrayBase::operator[]</a></div><div class="ttdeci">ElemType &amp; operator[](size_t idx)</div><div class="ttdoc">Access element at index. </div><div class="ttdef"><b>Definition:</b> container.h:164</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html">tvm::runtime::MapNode</a></div><div class="ttdoc">Shared content of all specializations of hash map. </div><div class="ttdef"><b>Definition:</b> container.h:1823</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_aba83dc01d0f82381c3505c20a6bb36b7"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#aba83dc01d0f82381c3505c20a6bb36b7">tvm::runtime::Optional::operator==</a></div><div class="ttdeci">auto operator==(const Optional&lt; T &gt; &amp;other) const</div><div class="ttdef"><b>Definition:</b> container.h:1636</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ClosureObj_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ClosureObj.html">tvm::runtime::ClosureObj</a></div><div class="ttdoc">An object representing a closure. This object is used by both the Relay VM and interpreter. </div><div class="ttdef"><b>Definition:</b> container.h:1684</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectPtr_html_a06d1de2ed3cfdde9f698155b14948fc7"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectPtr.html#a06d1de2ed3cfdde9f698155b14948fc7">tvm::runtime::ObjectPtr::get</a></div><div class="ttdeci">T * get() const</div><div class="ttdef"><b>Definition:</b> object.h:407</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a39892e077bef2ff9379bd97b2f3e1a69"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a39892e077bef2ff9379bd97b2f3e1a69">tvm::runtime::Optional::Optional</a></div><div class="ttdeci">Optional(T other)</div><div class="ttdef"><b>Definition:</b> container.h:1606</div></div>
<div class="ttc" id="object_8h_html"><div class="ttname"><a href="object_8h.html">object.h</a></div><div class="ttdoc">A managed object in the TVM runtime. </div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_abd9253b9f7f2bcc9535a6047b3d1b529"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#abd9253b9f7f2bcc9535a6047b3d1b529">tvm::runtime::MapNode::iterator::operator--</a></div><div class="ttdeci">iterator operator--(int)</div><div class="ttdoc">Suffix self decrement. </div><div class="ttdef"><b>Definition:</b> container.h:1915</div></div>
<div class="ttc" id="object_8h_html_a3aea9b3f65aeb9150c0fa7800e5573c6"><div class="ttname"><a href="object_8h.html#a3aea9b3f65aeb9150c0fa7800e5573c6">TVM_DECLARE_FINAL_OBJECT_INFO</a></div><div class="ttdeci">#define TVM_DECLARE_FINAL_OBJECT_INFO(TypeName, ParentType)</div><div class="ttdoc">helper macro to declare type information in a final class. </div><div class="ttdef"><b>Definition:</b> object.h:662</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a57b4c19389363853e409527badb5b177"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a57b4c19389363853e409527badb5b177">tvm::runtime::make_object</a></div><div class="ttdeci">ObjectPtr&lt; MapNode &gt; make_object()=delete</div><div class="ttdef"><b>Definition:</b> container.h:1024</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_ae82a366999c6d2a503411868f3bcf6af"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#ae82a366999c6d2a503411868f3bcf6af">tvm::runtime::Array::CopyOnWrite</a></div><div class="ttdeci">ArrayNode * CopyOnWrite()</div><div class="ttdoc">Copy on write semantics Do nothing if current handle is the unique copy of the array. Otherwise make a new copy of the array to ensure the current handle hold a unique copy. </div><div class="ttdef"><b>Definition:</b> container.h:957</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_ac77c2b6d2b8176af69f6e6cccbe736c2"><div class="ttname"><a href="namespacetvm_1_1runtime.html#ac77c2b6d2b8176af69f6e6cccbe736c2">tvm::runtime::operator==</a></div><div class="ttdeci">bool operator==(const char *lhs, const String &amp;rhs)</div><div class="ttdef"><b>Definition:</b> container.h:1510</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a60c1dac32729c4bf8351972da11793e4"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a60c1dac32729c4bf8351972da11793e4">tvm::runtime::Map::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> container.h:3001</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a7fbfe0e01b0fa54e151bd481956dcfec"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a7fbfe0e01b0fa54e151bd481956dcfec">tvm::runtime::Map::at</a></div><div class="ttdeci">const V at(const K &amp;key) const</div><div class="ttdoc">Read element from map. </div><div class="ttdef"><b>Definition:</b> container.h:2963</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a932f36903b04ecbe0568d76890549680"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a932f36903b04ecbe0568d76890549680">tvm::runtime::Map::Map</a></div><div class="ttdeci">Map(Map&lt; K, V &gt; &amp;&amp;other)</div><div class="ttdoc">move constructor </div><div class="ttdef"><b>Definition:</b> container.h:2904</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a8f52fa8c97344586060ca735a3b91b39"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a8f52fa8c97344586060ca735a3b91b39">tvm::runtime::Array::operator=</a></div><div class="ttdeci">Array&lt; T &gt; &amp; operator=(Array&lt; T &gt; &amp;&amp;other)</div><div class="ttdoc">move assign operator </div><div class="ttdef"><b>Definition:</b> container.h:636</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html">tvm::runtime::IterAdapter</a></div><div class="ttdoc">iterator adapter that adapts TIter to return another type. </div><div class="ttdef"><b>Definition:</b> container.h:234</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a40f67dd792619d7d41ac45fc0f52a0c4"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a40f67dd792619d7d41ac45fc0f52a0c4">tvm::runtime::IterAdapter::operator++</a></div><div class="ttdeci">IterAdapter &amp; operator++()</div><div class="ttdef"><b>Definition:</b> container.h:243</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html_a871e902541f0a7e550e74ae0c621994c"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html#a871e902541f0a7e550e74ae0c621994c">tvm::runtime::ADT::Tuple</a></div><div class="ttdeci">static ADT Tuple(Args &amp;&amp;... args)</div><div class="ttdoc">Construct a tuple object. </div><div class="ttdef"><b>Definition:</b> container.h:1131</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_ac09b2cd5327e5102ab373b482530f1e2"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#ac09b2cd5327e5102ab373b482530f1e2">tvm::runtime::MapNode::iterator::operator*</a></div><div class="ttdeci">reference operator*() const</div><div class="ttdoc">De-reference iterators. </div><div class="ttdef"><b>Definition:</b> container.h:1903</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a26079aec4fc32333eb492a8c4a2ca849"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a26079aec4fc32333eb492a8c4a2ca849">tvm::runtime::Map::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> container.h:2971</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_aff337677f23f7d665960f553fb52ab86"><div class="ttname"><a href="namespacetvm_1_1runtime.html#aff337677f23f7d665960f553fb52ab86">tvm::runtime::Merge</a></div><div class="ttdeci">Map&lt; K, V &gt; Merge(Map&lt; K, V &gt; lhs, const Map&lt; K, V &gt; &amp;rhs)</div><div class="ttdoc">Merge two Maps. </div><div class="ttdef"><b>Definition:</b> container.h:3084</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1StringObj_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1StringObj.html">tvm::runtime::StringObj</a></div><div class="ttdoc">An object representing string. It&amp;#39;s POD type. </div><div class="ttdef"><b>Definition:</b> container.h:1139</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1DenseMapNode_html_a2e0612bed81949dd88fd440a467aa8c0"><div class="ttname"><a href="classtvm_1_1runtime_1_1DenseMapNode.html#a2e0612bed81949dd88fd440a467aa8c0">tvm::runtime::DenseMapNode::erase</a></div><div class="ttdeci">void erase(const iterator &amp;position)</div><div class="ttdoc">Erase the entry associated with the iterator. </div><div class="ttdef"><b>Definition:</b> container.h:2255</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a5bbe56d308014b49fec6374315f8d43a"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a5bbe56d308014b49fec6374315f8d43a">tvm::runtime::IterAdapter::operator-</a></div><div class="ttdeci">std::enable_if&lt; std::is_same&lt; iterator_category, std::random_access_iterator_tag &gt;::value, typename T::difference_type &gt;::type operator-(const IterAdapter &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> container.h:269</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html">tvm::runtime::Map</a></div><div class="ttdoc">Map container of NodeRef-&gt;NodeRef in DSL graph. Map implements copy on write semantics, which means map is mutable but copy will happen when array is referenced in more than two places. </div><div class="ttdef"><b>Definition:</b> container.h:2891</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_ae447f7c7a742fb3f5613a632706509df"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#ae447f7c7a742fb3f5613a632706509df">tvm::runtime::InplaceArrayBase::Self</a></div><div class="ttdeci">ArrayType * Self() const</div><div class="ttdoc">Return the self object for the array. </div><div class="ttdef"><b>Definition:</b> container.h:205</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a410953f5ac23f6ca5caa257def8b08bd"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a410953f5ac23f6ca5caa257def8b08bd">tvm::runtime::ArrayNode::at</a></div><div class="ttdeci">const ObjectRef at(int64_t i) const</div><div class="ttdoc">Read i-th element from array. </div><div class="ttdef"><b>Definition:</b> container.h:344</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a68df7bab89fca339e3918438dd80300d"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a68df7bab89fca339e3918438dd80300d">tvm::runtime::String::String</a></div><div class="ttdeci">String(const char *other)</div><div class="ttdoc">Construct a new String object. </div><div class="ttdef"><b>Definition:</b> container.h:1205</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a420e3711ae1cdfc044e4f90b600e76cd"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a420e3711ae1cdfc044e4f90b600e76cd">tvm::runtime::Array::capacity</a></div><div class="ttdeci">size_t capacity() const</div><div class="ttdef"><b>Definition:</b> container.h:701</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1TVMArgValue_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1TVMArgValue.html">tvm::runtime::TVMArgValue</a></div><div class="ttdoc">A single argument value to PackedFunc. Containing both type_code and TVMValue. </div><div class="ttdef"><b>Definition:</b> packed_func.h:582</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_a45c91b04c230f7400727b1bc02a93f02"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a45c91b04c230f7400727b1bc02a93f02">tvm::runtime::InplaceArrayBase::operator[]</a></div><div class="ttdeci">const ElemType &amp; operator[](size_t idx) const</div><div class="ttdoc">Access element at index. </div><div class="ttdef"><b>Definition:</b> container.h:153</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html">tvm::runtime::Optional</a></div><div class="ttdoc">Optional container that to represent to a Nullable variant of T. </div><div class="ttdef"><b>Definition:</b> container.h:1580</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a3fda35a31720bc5d9c70d0b4fe26ecf0"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a3fda35a31720bc5d9c70d0b4fe26ecf0">tvm::runtime::MapNode::erase</a></div><div class="ttdeci">void erase(const key_type &amp;key)</div><div class="ttdoc">Erase the entry associated with the key, do nothing if not exists. </div><div class="ttdef"><b>Definition:</b> container.h:1883</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1SmallMapNode_html_a866679f23f724edc2d165f530f058b09"><div class="ttname"><a href="classtvm_1_1runtime_1_1SmallMapNode.html#a866679f23f724edc2d165f530f058b09">tvm::runtime::SmallMapNode::at</a></div><div class="ttdeci">mapped_type &amp; at(const key_type &amp;key)</div><div class="ttdoc">Index value associated with a key, throw exception if the key does not exist. </div><div class="ttdef"><b>Definition:</b> container.h:2003</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_a76971f210bcd72c05992ae57b2ac8b2e"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#a76971f210bcd72c05992ae57b2ac8b2e">tvm::runtime::IterAdapter::operator++</a></div><div class="ttdeci">IterAdapter operator++(int)</div><div class="ttdef"><b>Definition:</b> container.h:251</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_aa39300bd019f435ab23353b991019811"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#aa39300bd019f435ab23353b991019811">tvm::runtime::Array::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdoc">Remove the last item of the list. </div><div class="ttdef"><b>Definition:</b> container.h:775</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a264c17028af85fe4619852f804e9464a"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a264c17028af85fe4619852f804e9464a">tvm::runtime::MapNode::iterator::operator==</a></div><div class="ttdeci">bool operator==(const iterator &amp;other) const</div><div class="ttdoc">Compare iterators. </div><div class="ttdef"><b>Definition:</b> container.h:1895</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a0c38eac8fa87129d754972cd305a6a89"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a0c38eac8fa87129d754972cd305a6a89">tvm::runtime::MapNode::iterator::pointer</a></div><div class="ttdeci">KVType * pointer</div><div class="ttdef"><b>Definition:</b> container.h:1890</div></div>
<div class="ttc" id="namespacetvm_html_aae7034e3e41c18e7fb78ff32bfc6a318"><div class="ttname"><a href="namespacetvm.html#aae7034e3e41c18e7fb78ff32bfc6a318">tvm::NullOpt</a></div><div class="ttdeci">constexpr runtime::NullOptType NullOpt</div><div class="ttdef"><b>Definition:</b> container.h:3111</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a1dda4b706346d1299cea059957e9ee70"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a1dda4b706346d1299cea059957e9ee70">tvm::runtime::Array::rend</a></div><div class="ttdeci">reverse_iterator rend() const</div><div class="ttdef"><b>Definition:</b> container.h:674</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_ae7e2ecfde14f41cfbe28a2c845a023b7"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ae7e2ecfde14f41cfbe28a2c845a023b7">tvm::runtime::Map::iterator::reference</a></div><div class="ttdeci">value_type reference</div><div class="ttdef"><b>Definition:</b> container.h:3033</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_abd2918a29b15ea51e0ff7c88affa212f"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#abd2918a29b15ea51e0ff7c88affa212f">tvm::runtime::Array::Assign</a></div><div class="ttdeci">void Assign(IterType first, IterType last)</div><div class="ttdoc">reset the array to content from iterator. </div><div class="ttdef"><b>Definition:</b> container.h:930</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_a897a877128c8b8a7e57dec0847cf33c7"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#a897a877128c8b8a7e57dec0847cf33c7">tvm::runtime::String::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Retun if the string is empty. </div><div class="ttdef"><b>Definition:</b> container.h:1288</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1Array_1_1ValueConverter_html_a4bb65df089f7cafd324faa1cc6175403"><div class="ttname"><a href="structtvm_1_1runtime_1_1Array_1_1ValueConverter.html#a4bb65df089f7cafd324faa1cc6175403">tvm::runtime::Array::ValueConverter::convert</a></div><div class="ttdeci">static T convert(const ObjectRef &amp;n)</div><div class="ttdef"><b>Definition:</b> container.h:655</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_ad3a78d88e3a9292d11ce04ff2dfe0702"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#ad3a78d88e3a9292d11ce04ff2dfe0702">tvm::runtime::Map::Set</a></div><div class="ttdeci">void Set(const K &amp;key, const V &amp;value)</div><div class="ttdoc">set the Map. </div><div class="ttdef"><b>Definition:</b> container.h:2994</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_a788c24447dd50bef05bf8cdc7c7f2f66"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#a788c24447dd50bef05bf8cdc7c7f2f66">tvm::runtime::Map::iterator::operator*</a></div><div class="ttdeci">reference operator*() const</div><div class="ttdoc">De-reference iterators. </div><div class="ttdef"><b>Definition:</b> container.h:3044</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ObjectRef_html_a2d76fa1fb628ff276a284e61123589c5"><div class="ttname"><a href="classtvm_1_1runtime_1_1ObjectRef.html#a2d76fa1fb628ff276a284e61123589c5">tvm::runtime::ObjectRef::as</a></div><div class="ttdeci">const ObjectType * as() const</div><div class="ttdoc">Try to downcast the internal Object to a raw pointer of a corresponding type. </div><div class="ttdef"><b>Definition:</b> object.h:856</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADT_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADT.html">tvm::runtime::ADT</a></div><div class="ttdoc">reference to algebraic data type objects. </div><div class="ttdef"><b>Definition:</b> container.h:1071</div></div>
<div class="ttc" id="structtvm_1_1runtime_1_1NullOptType_html"><div class="ttname"><a href="structtvm_1_1runtime_1_1NullOptType.html">tvm::runtime::NullOptType</a></div><div class="ttdoc">Helper to represent nullptr for optional. </div><div class="ttdef"><b>Definition:</b> container.h:1564</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_a32af8cd9a493a1b072c03e5becbfa8b6"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#a32af8cd9a493a1b072c03e5becbfa8b6">tvm::runtime::Optional::operator!=</a></div><div class="ttdeci">bool operator!=(std::nullptr_t) const</div><div class="ttdef"><b>Definition:</b> container.h:1635</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_ad3af61a0b16c6d8a4e6b1c2f6e8f4a44"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#ad3af61a0b16c6d8a4e6b1c2f6e8f4a44">tvm::runtime::String::compare</a></div><div class="ttdeci">int compare(const String &amp;other) const</div><div class="ttdoc">Compares this String object to other. </div><div class="ttdef"><b>Definition:</b> container.h:1231</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a478af2e3338db97bf9dd3411de6d9a8a"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a478af2e3338db97bf9dd3411de6d9a8a">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(std::initializer_list&lt; T &gt; init)</div><div class="ttdoc">constructor from initializer list </div><div class="ttdef"><b>Definition:</b> container.h:612</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a579235eb3691b76d29b4ae5f178318ef"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a579235eb3691b76d29b4ae5f178318ef">tvm::runtime::ReverseIterAdapter::ReverseIterAdapter</a></div><div class="ttdeci">ReverseIterAdapter(TIter iter)</div><div class="ttdef"><b>Definition:</b> container.h:295</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1InplaceArrayBase_html_a483d75a65f68676ed0a16fca8024ccd6"><div class="ttname"><a href="classtvm_1_1runtime_1_1InplaceArrayBase.html#a483d75a65f68676ed0a16fca8024ccd6">tvm::runtime::InplaceArrayBase::EmplaceInit</a></div><div class="ttdeci">void EmplaceInit(size_t idx, Args &amp;&amp;... args)</div><div class="ttdoc">Construct a value in place with the arguments. </div><div class="ttdef"><b>Definition:</b> container.h:195</div></div>
<div class="ttc" id="namespacetvm_1_1tir_1_1builtin_html_ae7816fdebd5d56f2145cdf371b756eb4"><div class="ttname"><a href="namespacetvm_1_1tir_1_1builtin.html#ae7816fdebd5d56f2145cdf371b756eb4">tvm::tir::builtin::ret</a></div><div class="ttdeci">const Op &amp; ret()</div><div class="ttdoc">Return value. </div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ADTObj_html_a8c1835b988e836dd451a343bac7e402d"><div class="ttname"><a href="classtvm_1_1runtime_1_1ADTObj.html#a8c1835b988e836dd451a343bac7e402d">tvm::runtime::ADTObj::tag</a></div><div class="ttdeci">int32_t tag</div><div class="ttdoc">The tag representing the constructor used. </div><div class="ttdef"><b>Definition:</b> container.h:1032</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a670b7adb420248489fd57a9458ced561"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a670b7adb420248489fd57a9458ced561">tvm::runtime::MapNode::count</a></div><div class="ttdeci">size_t count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of times a key exists in the hash map. </div><div class="ttdef"><b>Definition:</b> container.h:2794</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1IterAdapter_html_aa4c2c9d77272b79dad3c3a4ff392d186"><div class="ttname"><a href="classtvm_1_1runtime_1_1IterAdapter.html#aa4c2c9d77272b79dad3c3a4ff392d186">tvm::runtime::IterAdapter::difference_type</a></div><div class="ttdeci">typename std::iterator_traits&lt; TIter &gt;::difference_type difference_type</div><div class="ttdef"><b>Definition:</b> container.h:236</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_html_a093955a395c75f89c5a7f8a71b13250a"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map.html#a093955a395c75f89c5a7f8a71b13250a">tvm::runtime::Map::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Release reference to all the elements. </div><div class="ttdef"><b>Definition:</b> container.h:2983</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_ad8b40ddeffccb6f221601eda70202f9a"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ad8b40ddeffccb6f221601eda70202f9a">tvm::runtime::Map::iterator::iterator</a></div><div class="ttdeci">iterator()</div><div class="ttdef"><b>Definition:</b> container.h:3035</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html_ac1e67f17ae0b5d4c72670908469fff50"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html#ac1e67f17ae0b5d4c72670908469fff50">tvm::runtime::Map::iterator::operator++</a></div><div class="ttdeci">iterator operator++(int)</div><div class="ttdoc">Suffix self increment. </div><div class="ttdef"><b>Definition:</b> container.h:3054</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_aae210dbc3667622a873a27b822462ace"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#aae210dbc3667622a873a27b822462ace">tvm::runtime::ArrayNode::CreateRepeated</a></div><div class="ttdeci">static ObjectPtr&lt; ArrayNode &gt; CreateRepeated(int64_t n, const ObjectRef &amp;val)</div><div class="ttdoc">Constructs a container with n elements. Each element is a copy of val. </div><div class="ttdef"><b>Definition:</b> container.h:407</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Optional_html_aa07cc5bd536a18454ed737fb42b80be2"><div class="ttname"><a href="classtvm_1_1runtime_1_1Optional.html#aa07cc5bd536a18454ed737fb42b80be2">tvm::runtime::Optional::Optional</a></div><div class="ttdeci">Optional(ObjectPtr&lt; Object &gt; ptr)</div><div class="ttdoc">Construct from an ObjectPtr whose type already matches the ContainerType. </div><div class="ttdef"><b>Definition:</b> container.h:1595</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ReverseIterAdapter_html_a0b4fc047041f8e1cb3454ee89120444a"><div class="ttname"><a href="classtvm_1_1runtime_1_1ReverseIterAdapter.html#a0b4fc047041f8e1cb3454ee89120444a">tvm::runtime::ReverseIterAdapter::operator*</a></div><div class="ttdeci">const value_type operator*() const</div><div class="ttdef"><b>Definition:</b> container.h:327</div></div>
<div class="ttc" id="object_8h_html_ac2b7418e9549512b5db0126cf2a716f1"><div class="ttname"><a href="object_8h.html#ac2b7418e9549512b5db0126cf2a716f1">TVM_DECLARE_BASE_OBJECT_INFO</a></div><div class="ttdeci">#define TVM_DECLARE_BASE_OBJECT_INFO(TypeName, ParentType)</div><div class="ttdoc">helper macro to declare a base object type that can be inherited. </div><div class="ttdef"><b>Definition:</b> object.h:639</div></div>
<div class="ttc" id="object_8h_html_a782d0de62fbf75736e29c1e79c22c7f1"><div class="ttname"><a href="object_8h.html#a782d0de62fbf75736e29c1e79c22c7f1">TVM_DEFINE_NOTNULLABLE_OBJECT_REF_METHODS</a></div><div class="ttdeci">#define TVM_DEFINE_NOTNULLABLE_OBJECT_REF_METHODS(TypeName, ParentType, ObjectName)</div><div class="ttdef"><b>Definition:</b> object.h:719</div></div>
<div class="ttc" id="classtvm_1_1te_1_1IterVarAttr_html"><div class="ttname"><a href="classtvm_1_1te_1_1IterVarAttr.html">tvm::te::IterVarAttr</a></div><div class="ttdoc">Additional scheduable attributes about IterVar. </div><div class="ttdef"><b>Definition:</b> schedule.h:425</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_af5035bdfd76577c89f9fcde46db7edc4"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#af5035bdfd76577c89f9fcde46db7edc4">tvm::runtime::Array::Array</a></div><div class="ttdeci">Array(ObjectPtr&lt; Object &gt; n)</div><div class="ttdoc">constructor from pointer </div><div class="ttdef"><b>Definition:</b> container.h:595</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a4b03d8f363b6bcac8ff59cd40b2a9cca"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a4b03d8f363b6bcac8ff59cd40b2a9cca">tvm::runtime::MapNode::KVType</a></div><div class="ttdeci">std::pair&lt; ObjectRef, ObjectRef &gt; KVType</div><div class="ttdoc">Type of value stored in the hash map. </div><div class="ttdef"><b>Definition:</b> container.h:1830</div></div>
<div class="ttc" id="namespacetvm_1_1runtime_html_a4a8b9d4d20b7993992145f73efa2abf2"><div class="ttname"><a href="namespacetvm_1_1runtime.html#a4a8b9d4d20b7993992145f73efa2abf2">tvm::runtime::Concat</a></div><div class="ttdeci">Array&lt; T &gt; Concat(Array&lt; T &gt; lhs, const Array&lt; T &gt; &amp;rhs)</div><div class="ttdoc">Concat two Arrays. </div><div class="ttdef"><b>Definition:</b> container.h:1015</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_html_a2285f106f6afa29f512a7818ad59e9e5"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode.html#a2285f106f6afa29f512a7818ad59e9e5">tvm::runtime::MapNode::size_</a></div><div class="ttdeci">uint64_t size_</div><div class="ttdoc">number of entries in the container </div><div class="ttdef"><b>Definition:</b> container.h:1963</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1String_html_abe6782ebaf76b9e3e1ef6ae21f5447c7"><div class="ttname"><a href="classtvm_1_1runtime_1_1String.html#abe6782ebaf76b9e3e1ef6ae21f5447c7">tvm::runtime::String::compare</a></div><div class="ttdeci">int compare(const std::string &amp;other) const</div><div class="ttdoc">Compares this String object to other. </div><div class="ttdef"><b>Definition:</b> container.h:1243</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Array_html_a0c6b43e7ddd25655961a4bdf2251fd4e"><div class="ttname"><a href="classtvm_1_1runtime_1_1Array.html#a0c6b43e7ddd25655961a4bdf2251fd4e">tvm::runtime::Array::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Release reference to all the elements. </div><div class="ttdef"><b>Definition:</b> container.h:848</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1ArrayNode_html_a1507dd1a766a7ef40f04dbf8c14ffe25"><div class="ttname"><a href="classtvm_1_1runtime_1_1ArrayNode.html#a1507dd1a766a7ef40f04dbf8c14ffe25">tvm::runtime::ArrayNode::MoveFrom</a></div><div class="ttdeci">static ObjectPtr&lt; ArrayNode &gt; MoveFrom(int64_t cap, ArrayNode *from)</div><div class="ttdoc">Constructs a container and move from another. </div><div class="ttdef"><b>Definition:</b> container.h:387</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1Map_1_1iterator_html"><div class="ttname"><a href="classtvm_1_1runtime_1_1Map_1_1iterator.html">tvm::runtime::Map::iterator</a></div><div class="ttdoc">Iterator of the hash map. </div><div class="ttdef"><b>Definition:</b> container.h:3027</div></div>
<div class="ttc" id="classtvm_1_1runtime_1_1MapNode_1_1iterator_html_a4c7cd9342748ba6abbc671a4258dc814"><div class="ttname"><a href="classtvm_1_1runtime_1_1MapNode_1_1iterator.html#a4c7cd9342748ba6abbc671a4258dc814">tvm::runtime::MapNode::iterator::index</a></div><div class="ttdeci">uint64_t index</div><div class="ttdoc">The position on the array. </div><div class="ttdef"><b>Definition:</b> container.h:1925</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
